!function(){var t,n={54754:function(e,t,n){var a,i;a=[n(65781),n(27728)],void 0===(i=function(e,t){}.apply(t,a))||(e.exports=i)},18395:function(e,t,n){var a,i;n(69070),a=[t,n(89554),n(41539),n(54747),n(21249),n(39968),n(43397),n(32153)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.initCampaigns=t.getDisplayedCampaigns=void 0,r=u(r),s=u(s),l=u(l);t.initCampaigns=function(){var e,t=r.default.customConfig.campaigns||{};$.isEmptyObject(t)||(e=JSON.parse(t));var n,a=[];for(var i in e)if(e.hasOwnProperty(i)&&((n=e[i])&&!$.isEmptyObject(n)&&n.html&&n.html.length>0)){var o={campaign:{mode:i,html:e[i].html,code:e[i].code,uri:e[i].uri}};a.push(o)}r.default.customConfig.campaigns=a};function d(e,t){return e.campaign.mode=t,e}t.getDisplayedCampaigns=function(){if(r.default.customConfig.inDocAdsEnabled&&(!r.default.customConfig.suspendAdsInSinglePagePdfs||1!==l.default.getTotal())){var e=r.default.customConfig.campaigns,t=[],n=e.length;return e.forEach((function(a){if(1===n)a.campaign.mode===s.default.campaign.constants.MODE.DYNAMIC&&(a=d(a,s.default.campaign.constants.MODE.FIXED_TOP));else if(2===n)a.campaign.mode===s.default.campaign.constants.MODE.DYNAMIC&&(i=e,o=s.default.campaign.constants.MODE.FIXED_TOP,i.forEach((function(e){if(e.campaign.mode===o)return!0})),1)&&(a=d(a,s.default.campaign.constants.MODE.FIXED_TOP));else if(a.campaign.mode===s.default.campaign.constants.MODE.DYNAMIC)return;var i,o;t.push(a)})),t.map((function(e){return{position:e.campaign.mode,uri:e.campaign.uri}}))}}}.apply(t,a))||(e.exports=i)},91886:function(e,t,n){var a,i;n(69070),a=[t,n(3843),n(83710),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(39968),n(29455),n(89559),n(20282),n(99427),n(3874),n(34707),n(24221),n(18395),n(21669),n(20178)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y){"use strict";function w(e){return e&&e.__esModule?e:{default:e}}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,f=w(f),c=w(c),p=w(p),g=w(g),m=w(m),v=w(v),h=w(h),_=w(_),E=w(E),y=w(y);var A=void 0,C=function(){var e,t=f.default.customConfig.readingProgress.serverReadingProgress;$.isEmptyObject(t)||(e=JSON.parse(t)),e&&"success"===e.status?f.default.customConfig.readingProgress.location=e.location:(LIT.Reader.LogEnabled&&console.log("Failure to retrieve progress successfully"),f.default.customConfig.readingProgress.location={}),T()},T=function(){v.default.readerUI.init(),LIT.Reader.LogEnabled&&console.log("MODULE CONFIG:"),LIT.Reader.LogEnabled&&console.log(f.default);var e,t=g.default.getProgressStorageKey(),n=c.default.getMultipleSync([f.default.customConfig.readerSettingsLocalStorageKey,t]);for(var a in n[f.default.customConfig.readerSettingsLocalStorageKey]?n[f.default.customConfig.readerSettingsLocalStorageKey]=JSON.parse(n[f.default.customConfig.readerSettingsLocalStorageKey]):n[f.default.customConfig.readerSettingsLocalStorageKey]={},p.default.getDefaultSettings())p.default.getDefaultSettings().hasOwnProperty(a)&&(n[f.default.customConfig.readerSettingsLocalStorageKey].hasOwnProperty(a)&&void 0!==n[f.default.customConfig.readerSettingsLocalStorageKey][a]||(n[f.default.customConfig.readerSettingsLocalStorageKey][a]=p.default.getDefaultSettings()[a]));if(c.default.put(f.default.customConfig.readerSettingsLocalStorageKey,n[f.default.customConfig.readerSettingsLocalStorageKey]),n[t]){var i=JSON.parse(n[t]);e=i=JSON.parse(i)}var o=f.default.customConfig.readingProgress;g.default.shouldOverrideLocalProgress(f.default.customConfig.readingProgress,i)?e=JSON.parse(o.location):g.default.syncProgress(i),e=e&&e.location?e.location:e;var r,s=A.goto,l=!!A.goto;if(l)try{JSON.parse(s)}catch(e){l=!1}l&&A.goto||(s=void 0),v.default.events.control(),p.default.initSettings(),n[f.default.customConfig.readerSettingsLocalStorageKey]&&(r="object"!==R(n[f.default.customConfig.readerSettingsLocalStorageKey])?JSON.parse(n[f.default.customConfig.readerSettingsLocalStorageKey]):n[f.default.customConfig.readerSettingsLocalStorageKey]);var u=EREADER.utils.isLargeDesktop()?64:32;r=r||p.default.getDefaultSettings(),EREADER.utils.setIfPropertyNotPresent(r,"columnGap",u),EREADER.utils.setIfPropertyNotPresent(r,"columnMaxWidth",680),EREADER.utils.setIfPropertyNotPresent(r,"columnMinWidth",230),p.default.updateReader(r),window.CACHED_SETTINGS=r,v.default.readerUI.afterSettingsInit(),f.default.customConfig.inDocAdsEnabled&&(0,b.initCampaigns)(),_.default.contentActions.loadEbook(r,A.ebook,e,s).then((function(e){h.default.trigger(h.default.eventTypes.START,{customProperties:{eventTime:Date.now()}}),v.default.readerUI.onLoadEbook()})),y.default.cloneDataFromOldReader()},S={loadUI:function(e){E.default.init(),m.default.init(g.default),A=e;var t=c.default.getSync(f.default.customConfig.readerSettingsLocalStorageKey);function n(){if(EREADER.utils.isMobile()||EREADER.utils.isTablet()){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")}}Keyboard.applySettings(t),$(window).on("resize",n),n(),Keyboard.scope("reader"),v.default.readerUI.loadPrivate(),C()},tooltipSelector:function(){return"*:not(iframe):not([data-no-tooltip])[title]"}};t.default=S}.apply(t,a))||(e.exports=i)},49032:function(e,t,n){var a,i;a=[n(24812),n(69070),n(73210),n(26699),n(32023),n(74916),n(64765),n(85626),n(30037)],void 0===(i=function(e,t,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}s=u(s),l=u(l);var d={};(function(){var e=this,t=function(n){try{return n.initKeyboardEvent("keyup",!1,!1,e,"+",3,!0,!1,!0,!1,!1),"+"==(n.keyIdentifier||n.key)&&3==(n.keyLocation||n.location)&&(n.ctrlKey?n.altKey?1:3:n.shiftKey?2:4)||9}catch(e){t=0}}(document.createEvent("KeyboardEvent")),n={char:"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,locale:"",detail:0,bubbles:!1,cancelable:!1,keyCode:0,charCode:0,which:0},a=Function.prototype.call.bind(Object.prototype.hasOwnProperty),i=Object.defineProperty||function(e,t,n){"value"in n&&(e[t]=n.value)};e.crossBrowser_initKeyboardEvent=function(o,r){var s;s=t?document.createEvent("KeyboardEvent"):document.createEvent("Event");var l,u={};for(l in n)a(n,l)&&(u[l]=(a(r,l)&&r||n)[l]);var d=u.ctrlKey,f=u.shiftKey,c=u.altKey,p=u.metaKey,g=u.altGraphKey,m=t>3?((d?"Control":"")+(f?" Shift":"")+(c?" Alt":"")+(p?" Meta":"")+(g?" AltGraph":"")).trim():null,v=u.key+"",h=u.char+"",_=u.location,b=u.keyCode||(u.keyCode=v&&v.charCodeAt(0)||0),E=u.charCode||(u.charCode=h&&h.charCodeAt(0)||0),y=u.bubbles,w=u.cancelable,R=u.repeat,A=u.locale,C=e;for(l in u.which||(u.which=u.keyCode),"initKeyEvent"in s?s.initKeyEvent(o,y,w,C,d,c,f,p,b,E):t&&"initKeyboardEvent"in s?1==t?s.initKeyboardEvent(o,y,w,C,v,_,d,f,c,p,g):2==t?s.initKeyboardEvent(o,y,w,C,d,c,f,p,b,E):3==t?s.initKeyboardEvent(o,y,w,C,v,_,d,c,f,p,g):4==t?s.initKeyboardEvent(o,y,w,C,v,_,m,R,A):s.initKeyboardEvent(o,y,w,C,h,v,_,m,R,A):s.initEvent(o,y,w),n)if(a(n,l)&&s[l]!=u[l])try{delete s[l],i(s,l,{writable:!0,value:u[l]})}catch(e){}return s}}).call(window);var f={comparePressedKey:function(e,t){var n={Backspace:8,Tab:9,Enter:13,Escape:27,Esc:27,ArrowLeft:37,Left:37,ArrowUp:38,Up:38,ArrowRight:39,Right:39,ArrowDown:40,Down:40,Delete:46,Del:46},a=!1;return $.each(t,(function(t,i){var o=i,r=isNaN(o);if(void 0!==e.key)r?e.key.length>1&&(a=o.includes(e.key)):a=isNaN(e.key)?n[e.key]===o:e.key===o;else if(void 0!==e.keyIdentifier)r?(e.keyIdentifier.length>1&&(a=o.includes(e.keyIdentifier)),a=o===e.keyIdentifier):a=isNaN(e.keyIdentifier)?n[e.keyIdentifier]===o:e.keyIdentifier===o;else if(void 0!==e.keyCode)if(r){var s=!1;$.each(n,(function(t,n){if(o===t&&e.keyCode===n)return s=!0,!1})),a=s}else a=e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||e.keyCode===o;if(a)return!1})),a},resetToDefaults:function(){for(var e in f.defaultOptions)f.defaultOptions.hasOwnProperty(e)&&"string"==typeof f.defaultOptions[e]&&(f[e]=f.defaultOptions[e])},resetAccessKeys:function(){var e=function(e){if(!e||!e.length)return"";var t=e[e.length-1];return/^[a-z0-9]+$/i.test(t)?t:""};for(var t in f.accesskeys={},f)if(f.hasOwnProperty(t)){var n=f[t];"string"==typeof n&&(f.accesskeys[t]=e(n))}},applySettings:function(e){if(this.resetToDefaults(),e&&e.keyboard)for(var t in f)f.hasOwnProperty(t)&&"string"==typeof f[t]&&"string"==typeof e.keyboard[t]&&(f[t]=e.keyboard[t]);this.resetAccessKeys()},dispatch:function(e,t){if(!t.cancelBubble&&!t.defaultPrevented&&(void 0===t.returnValue||t.returnValue)){var n=t.srcElement||t.target;if(n)for(var a=n;a;){var i=a.nodeName;if("input"===i||"textarea"===i)return;if(a.getAttribute){var o=a.getAttribute("contenteditable");if("true"===o||"contenteditable"===o)return}if(a.classList&&a.classList.contains("keyboard-input"))return;a=a.parentNode}var r=crossBrowser_initKeyboardEvent(t.type,{bubbles:!0,cancelable:!1,keyCode:t.keyCode,charCode:t.charCode,which:t.which,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,char:t.char?t.char:String.fromCharCode(t.charCode),key:t.key?t.key:t.keyCode});e.dispatchEvent(r)}},scope:function(e){e||alert("!SCOPE ACTIVATE!"),l.default.setScope(e)},on:function(e,t,n){e||console.error("!KEYS!"),d.hasOwnProperty(t)||(d[t]=[]),d[t].push(e),l.default.unbind(e,t),(0,l.default)(e,t,(function(){EREADER.utils.isMaterialViewerOpen()||$(".tip-container").length>0||($(document.body).addClass("keyboard"),n())}))},off:function(e){if(e||alert("!SCOPE OFF!"),d.hasOwnProperty(e))for(var t in d[e])l.default.unbind(t,e)},i18n:{ToggleRightPanel:s.default.settings,PagePrevious:s.default.i18n_page_previous,PageNext:s.default.i18n_page_next,PagePreviousAlt:s.default.i18n_page_previous+" (access key)",PageNextAlt:s.default.i18n_page_next+" (access key)",NodePrevious:s.default.paging_left+" (access key)",NodeNext:s.default.paging_right+" (access key)",Boookmark:s.default.bookmark,Paging:s.default.paging,FullScreenToggle:s.default.enter_fullscreen+" / "+s.default.exit_fullscreen,ZoomScreenToggle:s.default.zoom_width+" / "+s.default.zoom_height,ZoomOut:s.default.zoomout,ZoomIn:s.default.zoomin,SwitchToLibrary:s.default.view_library,ShareList:s.default.share_list,SaveOffline:s.default.save_offline,DownloadList:s.default.download,ShowNarrator:s.default.narrator,ShowSearch:s.default.search,FullSite:s.default.fullSite,Cite:s.default.cite,MediaOverlaysRateIncrease:s.default.i18n_audio_rate_increase,MediaOverlaysRateDecrease:s.default.i18n_audio_rate_decrease,MediaOverlaysPlayPause:s.default.i18n_audio_play+" / "+s.default.i18n_audio_pause,MediaOverlaysPrevious:s.default.i18n_audio_previous,MediaOverlaysNext:s.default.i18n_audio_next,MediaOverlayTouchToPlayToggle:s.default.i18n_audio_touch_toggle,BackgroundAudioPlayPause:s.default.i18n_audio_play_background+" / "+s.default.i18n_audio_pause_background},defaultOptions:{},accesskeys:{},ToggleRightPanel:"o",readingOptions:"r",scrollUp:"up",scrollDown:"down",PagePrevious:"left",PageNext:"right",NodePrevious:"a",NodeNext:"d",ToggleLeftPanel:"i",Boookmark:"b",Paging:"p",FullScreenToggle:"u",ZoomScreenToggle:"h",ZoomOut:"z",ZoomIn:"x",SwitchToLibrary:"e",ShareList:"j",SaveOffline:"k",DownloadList:"g",ShowNarrator:"n",ShowSearch:"s",FullSite:"v",Cite:"c",SwitchFormat:"f",MediaOverlaysRateIncrease:"9",MediaOverlaysRateDecrease:"8",MediaOverlaysPlayPause:"1",MediaOverlaysPrevious:"2",MediaOverlaysNext:"3",MediaOverlayTouchToPlayToggle:"4",BackgroundAudioPlayPause:"5"};try{for(var c in f.defaultOptions={},f)f.hasOwnProperty(c)&&"string"==typeof f[c]&&(f.defaultOptions[c]=f[c]);f.resetAccessKeys()}catch(e){console.error(e)}window.Keyboard=f}.apply(t,a))||(e.exports=i)},95430:function(e,t,n){var a,i;a=[n(66992),n(41539),n(78783),n(33948),n(60285),n(41637),n(4002),n(26729),n(54998),n(49032),n(43734),n(15921),n(73262),n(78522),n(20679),n(75125),n(65426),n(53954)],void 0===(i=function(e,t,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}if(s=_(s),l=_(l),s.default.prototype.trigger=s.default.prototype.emit,window.EventEmitter=s.default,window.URI=l.default,"URL"in window==!1){if("webkitURL"in window==!1)throw Error("Browser does not support window.URL");window.URL=window.webkitURL}}.apply(t,a))||(e.exports=i)},89559:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(69826),n(41539),n(9653),n(57327),n(82772),n(29253),n(32564),n(39968),n(29455),n(43397),n(24221),n(33279)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p,g){"use strict";function m(e){return e&&e.__esModule?e:{default:e}}var v;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,d=m(d),f=m(f),c=m(c),p=m(p),g=m(g);var h=$(".settings-dialog"),_=$(".preview-text"),b=function(e){"justify"===e.justifyText?$(c.default.checklayout_info.reading_area).addClass("justified").removeClass("justified-auto"):"auto"===e.justifyText?$(c.default.checklayout_info.reading_area).addClass("justified-auto").removeClass("justified"):$(c.default.checklayout_info.reading_area).removeClass("justified justified-auto"),e.hyphenate?$(c.default.checklayout_info.reading_area).addClass("hyphenated"):$(c.default.checklayout_info.reading_area).removeClass("hyphenated"),p.default.displayActions.updateDisplaySettings(e),g.default.check()},E=o.debounce(b,300);function y(){v={fontSize:100,syntheticSpread:d.default.customConfig.displayOptions.displayFormat,scroll:d.default.customConfig.displayOptions.displayMode,columnGap:EREADER.utils.isLargeDesktop()?64:32,columnMaxWidth:680,columnMinWidth:230,justifyText:"default",hyphenate:!1}}function w(e){for(var t=!0,n=["fontSize","justifyText","hyphenate"],a=0;a<n.length;a++){var i=n[a];if(v.hasOwnProperty(i)&&e.hasOwnProperty(i)&&v[i]!==e[i]){t=!1;break}}var o=$(".options-return-defaults");t?o.removeClass("show"):o.addClass("show")}var R={initSettings:function(){y(),h=$(".settings-dialog"),_=$(".preview-text");var e=$("#font-size-input"),t=h.find(".font-btn");$("#readingOptionsBtn").one("click.settings",(function(e){$(e.target).closest("#settings-dialog").length||g()})),p.default.displayActions.initDisplaySettings();var n=$("#scroll-doc-radio"),a=$("#flow-vertical"),i=$("#flow-horizontal"),o=$("#columns-single"),r=$("#columns-facing"),s=$("#columns-default"),l=$('.settings-dialog input[name="justify"]'),u=$("#hyphenate-checkbox");h.find("input").on("change",(function(t){var g={fontSize:Number(e.val()),syntheticSpread:v.syntheticSpread,scroll:v.scroll};f.default.get(d.default.customConfig.readerSettingsLocalStorageKey,(function(e){e&&(g.syntheticSpread=e.syntheticSpread,g.scroll=e.scroll)})),n.prop("checked")?(g.scroll="scroll-doc",$('input[name="display-format"]').prop("disabled",!0)):a.prop("checked")?(g.scroll="scroll-continuous",$('input[name="display-format"]').prop("disabled",!0)):i.prop("checked")&&(g.scroll="auto",$('input[name="display-format"]').prop("disabled",!1)),r.prop("checked")?($(c.default.checklayout_info.reading_area).addClass(c.default.checklayout_info.facing),g.syntheticSpread="double"):o.prop("checked")?g.syntheticSpread="single":s.prop("checked")&&(g.syntheticSpread="auto");var m=l.filter(":checked").val();g.justifyText=-1!==["default","auto","justify"].indexOf(m)?m:"default",g.hyphenate=u.prop("checked"),$(c.default.checklayout_info.reading_area).hasClass(c.default.checklayout_info.fixed)&&(g.fontSize=100,g.justifyText="default",g.hyphenate=!1),p.default.displayActions.saveDisplaySettings(t),w(g),E(g),f.default.get(d.default.customConfig.readerSettingsLocalStorageKey,(function(e){for(var t in e||(e={}),g)g.hasOwnProperty(t)&&(e[t]=g[t]);f.default.put(d.default.customConfig.readerSettingsLocalStorageKey,e),setTimeout((function(){Keyboard.applySettings(e)}),100)}))})),$(".options-return-defaults").on("click",(function(){f.default.get(d.default.customConfig.readerSettingsLocalStorageKey,(function(e){e||(e={}),e.fontSize=v.fontSize,e.justifyText=v.justifyText,e.hyphenate=v.hyphenate,b(e),f.default.put(d.default.customConfig.readerSettingsLocalStorageKey,e,(function(){g()}))}))}));t.on("click",(function(){var n,a,i;n=$(this),a=Number(e.val()),i=n.hasClass("plus")?a+10:a-10,t.prop("disabled",!1),i>=200&&t.filter(".plus").prop("disabled",!0),i<=50&&t.filter(".minus").prop("disabled",!0),e.val(i).trigger("change")}));var g=function(){f.default.get(d.default.customConfig.readerSettingsLocalStorageKey,(function(d){for(var f in d=d||v,v)!v.hasOwnProperty(f)||d.hasOwnProperty(f)||d[f]||(d[f]=v[f]);w(d),e.val(d.fontSize),Number(e.val())>=200&&t.filter(".plus").prop("disabled",!0),Number(e.val())<=50&&t.filter(".minus").prop("disabled",!0),"double"===d.syntheticSpread?r.prop("checked",!0):"single"===d.syntheticSpread?o.prop("checked",!0):s.prop("checked",!0),"scroll-continuous"===d.scroll?(a.prop("checked",!0),$('input[name="display-format"]').prop("disabled",!0)):"scroll-doc"===d.scroll?(n.prop("checked",!0),$('input[name="display-format"]').prop("disabled",!0)):(i.prop("checked",!0),$('input[name="display-format"]').prop("disabled",!1)),d.justifyText=-1!==["default","auto","justify"].indexOf(d.justifyText)?d.justifyText:"default","default"!==d.justifyText?l.filter('[value="'+d.justifyText+'"]').prop("checked",!0):l.prop("checked",!1),u.prop("checked",d.hyphenate),$(c.default.checklayout_info.reading_area).hasClass("isFixed")&&(d.fontSize=100),_.css({fontSize:d.fontSize/100+"em"});var g=p.default.displayActions.getDisplaySettingsData(d,CACHED_SETTINGS);h.addClass(g.classes),g.changed&&b(d),CACHED_SETTINGS=d}))};document.addEventListener("visibilitychange",(function(){document.visibilityState}))},updateReader:b,getDefaultSettings:function(){return v||y(),v}};t.default=R}.apply(t,a))||(e.exports=i)},27728:function(t,n,a){var i,o;i=[a(32564),a(95430),a(91886),a(24221),a(48790)],void 0===(o=function(t,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a=r(a),i=r(i),(o=r(o)).default.initEreaderMetaData().then((function(){i.default.init().then((function(){$(document.body).on("click",(function(){$(document.body).removeClass("keyboard")})),$(document).on("keyup",(function(e){$(document.body).addClass("keyboard")})),$(document.body).tooltip({selector:a.default.tooltipSelector(),placement:function(e,t){var n="auto";return"left-page-btn"==t.id?n="right":"right-page-btn"==t.id?n="left":t.dataset.tooltipPosition&&(n=t.dataset.tooltipPosition),n},container:"body"}).on("show.bs.tooltip",(function(e){if("ontouchstart"in document.documentElement)e.preventDefault();else{$(a.default.tooltipSelector()).not(e.target).tooltip("hide");var t=e.target;setTimeout((function(){$(t).tooltip("hide")}),8e3)}}));var e=EREADER.utils.getURLQueryParams();e.ebook=EREADER.utils.getEbookUrl(e.ebook),a.default.loadUI(e)})).catch((function(e){console.error(e)}))})).catch((function(t){console.error(e)}))}.apply(n,i))||(t.exports=o)},32514:function(e,t,n){var a,i;n(69070),a=[t,n(47941),n(57327),n(41539),n(74916),n(64765),n(89554),n(54747),n(15306),n(69826),n(85626),n(39968),n(88995),n(10520),n(58951),n(1809),n(32153),n(43397),n(38031),n(48217),n(41930),n(73461),n(35668),n(3071),n(34329),n(9979),n(30145),n(29775),n(7754),n(38834),n(77995),n(47419),n(27003),n(30326),n(15378),n(82343),n(56533),n(56194),n(30331),n(38156),n(72798),n(70408),n(27493),n(21555),n(20270),n(18767),n(86997),n(43663),n(14375),n(58150),n(33279),n(24221)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y,w,R,A,C,T,S,O,D,P,I,L,k,x,M,N,F,U,B,j,V,H,K,W,z,G,q,Y,Z,J,X,Q){"use strict";function ee(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,f=ee(f),c=ee(c),p=ee(p),g=ee(g),m=ee(m),v=ee(v),h=ee(h),_=ee(_),b=ee(b),E=ee(E),y=ee(y),w=ee(w),R=ee(R),A=ee(A),C=ee(C),T=ee(T),S=ee(S),O=ee(O),D=ee(D),P=ee(P),I=ee(I),L=ee(L),k=ee(k),x=ee(x),M=ee(M),N=ee(N),F=ee(F),U=ee(U),B=ee(B),j=ee(j),V=ee(V),H=ee(H),K=ee(K),W=ee(W),z=ee(z),G=ee(G),q=ee(q),Y=ee(Y),Z=ee(Z),J=ee(J),X=ee(X),Q=ee(Q);var te,ne,ae,ie,oe,re,se=[],le=[],ue=c.default.customConfig,de=ue.profileConfig,fe=ue.switchFormats&&ue.switchFormats.available&&Object.keys(ue.switchFormats.available).length>1,ce=["download","share","print","saveOffline","user"],pe=["download","share","print","formats","website","saveOffline","help","narrator","user"],ge=["formats","pagination","bookmark","readingOptions"],me=["website"],ve=["material","info","links","notes"],he=["details","outline","materials","annotation","linking"],_e=["details","outline","materials",ue.isScitrusHelpGuideEnabled?"annotation":"","linking","readingOptions","share",fe?"formats":"","saveOffline"].filter((function(e){return""!==e}));if(de){!function(){var e="epub"!==ue.format;se.push("bookmark"),de.downloadSuppressed&&se.push("download"),de.switchFormatsSuppressed&&se.push("formats"),!ue.helpEnabled&&se.push("help"),(!ue.epubActions.narrator||e)&&se.push("narrator");ue.nodeNavigationDisabled&&!e&&se.push("pagination"),de.printSuppressed&&se.push("print"),de.offlineSuppressed&&se.push("saveOffline");de.accessSharingSuppressed&&se.push("share");de.siteLinkOutSuppressed&&se.push("website"),!e&&se.push("zoom"),de.materialsSuppressed&&se.push("materials"),de.linksSuppressed&&se.push("linking"),de.notesSuppressed&&se.push("annotation")}();!function(){var e=ue.epubActions.download.files;for(var t in e)e[t].available&&le.push(e[t])}();var be,Ee=ue.sharedAccessConfig.isShared,ye=b.default.accessPermissionConfig(),we=Ee?"group":"group_add",Re=Ee?"dropdown-list medium wide":"dropdown-list medium wider";te='<div class="d-inline-flex clipboard share-access-navbar">'+(0,E.default)({id:"shareTrigger",classList:"shareAccessUrl btn--light",title:f.default.share_list+" ["+Keyboard.accesskeys.ShareList+"]",ariaLabel:"share access",content:'<span class="icon material-icons">'+we+"</span>",extraContent:'<div class="d-none"><button class="shareAccessUrlClip">Copy Access</button></div>'})+"</div>",(Ee||ye.isNoAccess)&&(be=Ee?(0,K.default)({strings:f.default,sharedViewData:m.default.data()}):(0,W.default)({strings:f.default,a:v.default.data(),data:{title:f.default.shared_access,message:f.default.shareAccess_message,accessUrl:ye.accessUrl,isButtonVisible:ye.isButtonVisible,isFreeToRead:ye.freeToRead}}),te=(0,y.default)({classList:"clipboard",trigger:{ariaLabel:"Share access",icon:'<span class="icon material-icons">'+we+"</span>",id:"shareTrigger",title:f.default.shared_access+" ["+Keyboard.accesskeys.ShareList+"]"},content:{classList:Re,content:be}})),ne=[{name:"bookmark",template:'<div class="d-inline-flex grouped">'+(0,E.default)({class:"icon-bookmark",title:f.default.bookmark+" ["+Keyboard.Boookmark+"]",ariaLabel:f.default.bookmark,content:'<span class="icon material-icons">bookmark_border</span>\n        <span class="icon material-icons hide">bookmark</span>'})+"</div>"},{name:"download",template:(0,y.default)({classList:"navbar-download not_resolved_yet",dataPersist:"true",trigger:{ariaLabel:"Download document",classList:"btn--cta_roundedColored",icon:'<span class="icon material-icons">get_app</span>',title:f.default.download+" ["+Keyboard.accesskeys.DownloadList+"]",tooltip:"bottom"},content:{classList:"dropdown-list medium",content:(0,U.default)({files:le,title:f.default.download_button_text,strings:f.default,internalConfig:p.default,extraClasses:ye.isNoAccess?"access-tip__container":""})}}),templateMore:(0,A.default)({classList:"download_list",content:(0,q.default)({files:le,strings:f.default,internalConfig:p.default})})},{name:"formats",template:x.default,templateMore:Z.default},{name:"help",templateMore:J.default},{name:"narrator",template:(0,j.default)({strings:f.default,keyboard:Keyboard}),templateMore:(0,A.default)({classList:"narrator",content:(0,E.default)({classList:"rawerMenu--trigger list-button checkbox",content:'<span class="icon material-icons">record_voice_over</span><span class="tab-text">Narration Controls</span>'})})},{name:"readingOptions",template:(0,y.default)({classList:"grouped reading_options settings-dialog reading-options-navbar",trigger:{ariaLabel:"Select node",icon:'<span class="icon material-icons reflow">format_size</span><span class="icon reader-reading-options fxl"></span>',id:"readingOptionsBtn",hasPopup:"true",title:f.default.help_reading_options+" ["+Keyboard.accesskeys.readingOptions+"]"},content:{classList:"dropdown-list",content:(0,N.default)({isReadingFlowEnabled:ue.isReadingFlowEnabled})}})},{name:"pagination",template:(0,y.default)({classList:"paging grouped",trigger:{ariaLabel:"Select node",classList:"",icon:'<span class="d-none d-md-inline-block pagination_button_text"></span><span class="cpage"></span><span class="separator">/</span><span class="allpages"></span><span class="animated_arrow_down"></span>',title:f.default.paging_reflow+" ["+Keyboard.accesskeys.Paging+"]"},content:{classList:"dropdown-list medium",content:(0,M.default)({internalConfig:p.default})}})},{name:"print",template:'<div class="d-inline-flex print print-navbar">'+(0,E.default)({title:f.default.printing_label,ariaLabel:f.default.printing_label,content:'<span class="icon material-icons">print</span>'})+"</div>",templateMore:(0,A.default)({classList:ye.isNoAccess?"print access-tip__container":"print",content:(0,E.default)({classList:"drawerMenu--trigger list-button",title:f.default.printing_label,ariaLabel:f.default.printing_label,content:'<span class="icon material-icons">print</span><span class="tab-text">'+f.default.printing_label+"</span>"})})},{name:"saveOffline",template:(0,y.default)({classList:"save-offline-navbar",trigger:{id:"save-offline-button",ariaLabel:"Save for offline",classList:"navbarButton",icon:'<span class="icon idle reader-offline_pin"></span>',haspopup:"true",title:f.default.save_for_offline},content:{classList:"dropdown-list wide",content:(0,R.default)({content:(0,V.default)({strings:f.default,customConfig:ue})})}}),templateMore:(0,V.default)({showSeparator:!0,strings:f.default,customConfig:ue,extraClasses:ye.isNoAccess?"access-tip__container":""})},{name:"search",template:(0,y.default)({classList:"search",dataPersist:"true",trigger:{ariaLabel:"Search document",classList:"search-trigger",icon:'<span class="icon material-icons">search</span>',title:f.default.search+" ["+Keyboard.ShowSearch+"]"},content:{content:(0,H.default)({strings:f.default})}})},{name:"share",template:te,templateMore:(0,A.default)({classList:"clipboard",content:(0,Y.default)({strings:f.default,isShared:ue.sharedAccessConfig.isShared})})},{name:"user",template:(0,y.default)({classList:"user-navbar",trigger:{ariaLabel:"User info",classList:"btn--cta_rounded"+(ue.user.isLoggedIn?"":" loggedout"),icon:ue.user.isLoggedIn?"<span>"+ue.user.avatarName+"</span>":'<span class="icon material-icons">account_circle</span>',id:"user_button",haspopup:"true",title:"User actions"},content:{classList:"dropdown-list medium user_id",content:(0,z.default)({user:ue.user}),id:"user-panel"}}),templateMore:(0,A.default)({classList:"user_id"+(ue.user.isLoggedIn?" logged":""),content:(0,z.default)({user:ue.user})})},{name:"website",template:'<div class="grouped hide-sm">'+(0,w.default)({ariaLabel:"View in website",classlist:"open-in-website js__fullSite btn btn--light",href:ue.siteUrl||"#",target:"_blank",content:'<span class="icon material-icons">open_in_new</span>    <span class="tab-text">View in Publisher\'s site</span>'})+"</div>",templateMore:(0,A.default)({classList:"view_in_website",content:(0,w.default)({ariaLabel:"View in website",classlist:"drawerMenu--trigger list-button btn js__fullSite",href:ue.siteUrl||"#",target:"_blank",content:'<span class="icon material-icons">open_in_new</span>    <span class="tab-text">View in Publisher\'s site</span>'})})},{name:"zoom",template:(0,G.default)({strings:f.default,keyboard:Keyboard})}],ae=[{name:"material",template:"material"},{name:"info",template:"info"},{name:"links",template:"links"},{name:"notes",template:"notes"}];var Ae={id:g.default.tabs.notes+"Desktop",title:f.default.notes_title,ariaLabel:"Toggle "+f.default.notes_title+" panel",tooltip:"right",target:"#"+g.default.tabs.notes};ue.isScitrusHelpGuideEnabled?(Ae.icon={class:"reader-scitrus_icon",paths:'<span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span><span class="path5"></span><span class="path6"></span>'},Ae.class="btn--scitrus",Ae.svgIcon='<svg width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.5 12.5c-.8.4-1.9.3-3-.3a8.4 8.4 0 00-8.3 0H5c-1 .6-1.7 1.5-1.7 2.4 0 1 .6 1.8 1.7 2.4l4.2 2.5 4.2-2.5c2.4-1.3 4-3.8 4.2-6.7v-.1-.1-.2-.1c0 1.2-.4 2.2-1.2 2.7z" fill="url(#paint0_linear)"/><path d="M13.6 2.5L9.3 0V5a8.4 8.4 0 004.2 7.2v.1c1.1.6 2.2.7 3 .3.8-.5 1.2-1.5 1.2-2.7 0-3.1-1.6-5.8-4-7.3z" fill="url(#paint1_linear)"/><path d="M5.1 17c-1-.6-1.7-1.4-1.7-2.4S4 12.8 5 12.2A8.5 8.5 0 009.4 5V0L5 2.5A8.4 8.4 0 005 17.1z" fill="url(#paint2_linear)"/><defs><linearGradient id="paint0_linear" x1="3.4" y1="14.6" x2="17.7" y2="14.6" gradientUnits="userSpaceOnUse"><stop stop-color="#737380"/><stop offset="1" stop-color="#737380" stop-opacity="0"/></linearGradient><linearGradient id="paint1_linear" x1="18.2" y1="10" x2="7.2" y2="3.7" gradientUnits="userSpaceOnUse"><stop stop-color="#737380"/><stop offset="1" stop-color="#737380" stop-opacity="0"/></linearGradient><linearGradient id="paint2_linear" x1="9.9" y1=".3" x2="1.4" y2="14.9" gradientUnits="userSpaceOnUse"><stop stop-color="#737380"/><stop offset="1" stop-color="#737380" stop-opacity="0"/></linearGradient></defs></svg>'):Ae.icon={class:"reader-notes"},ie=[{name:"details",trigger:{id:g.default.tabs.info+"Desktop",title:f.default.info_title,ariaLabel:"Toggle "+f.default.info_title+" panel",tooltip:"right",target:"#"+g.default.tabs.info,icon:{class:"material-icons",text:"info"}}},{name:"outline",trigger:{id:g.default.tabs.toc+"Desktop",title:f.default.outline_title,ariaLabel:"Toggle "+f.default.outline_title+" panel",tooltip:"right",target:"#"+g.default.tabs.toc,icon:{class:"material-icons",text:"list"}}},{name:"materials",trigger:{id:g.default.tabs.data+"Desktop",title:f.default.data_title,ariaLabel:"Toggle "+f.default.data_title+" panel",tooltip:"right",target:"#"+g.default.tabs.data,icon:{class:"reader-material-folder"}}},{name:"annotation",trigger:Ae},{name:"linking",trigger:{id:g.default.tabs.links+"Desktop",title:f.default.links_title,ariaLabel:"Toggle "+f.default.links_title+" panel",tooltip:"right",target:"#"+g.default.tabs.links,icon:{class:"material-icons rotate-135",text:"link"}}}],oe=[{name:"details",text:f.default.help_details,template:(0,T.default)({strings:f.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-44},target:{element:"#infoDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:88},panel:{x:336,y:76},target:{element:"#infoDesktop",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"outline",text:f.default.help_outline,template:(0,I.default)({strings:f.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-86},target:{element:"#chaptersDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:88},panel:{x:336,y:76},target:{element:"#chaptersDesktop",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"materials",text:f.default.help_materials,template:(0,D.default)({strings:f.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-128},target:{element:"#filesDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:24},panel:{x:336,y:0},target:{element:"#figures",parentElement:"#leftPanelmobile",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"annotation",text:f.default.help_annotation,template:(0,C.default)({strings:f.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-170},target:{element:"#notesDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:88},panel:{x:336,y:76},target:{element:"#notesDesktop",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"linking",text:f.default.help_link,template:(0,O.default)({strings:f.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-128},target:{element:"#linksDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:24},panel:{x:336,y:-248},target:{element:"#references",parentElement:"#leftPanelmobile",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"readingOptions",text:f.default.help_reading_options,template:(0,L.default)({strings:f.default}),device:{desktop:{arrow:{position:"right",x:138,y:114},panel:{x:158,y:57},target:{element:"#readingOptionsBtn",trigger:!0}},tablet:{arrow:{position:"left",x:-135,y:116},panel:{x:-415,y:57},target:{element:"#readingOptionsBtn",trigger:!0}}},tipTarget:"#readingOptionsBtn"},{name:"share",text:f.default.help_sharing,template:(0,k.default)({strings:f.default}),device:{desktop:{arrow:{position:"top",x:0,y:36},panel:{x:-155,y:56},target:{element:"#shareTrigger",trigger:!1}},tablet:{arrow:{position:"top",x:0,y:36},panel:{x:-155,y:56},target:{element:"#shareTrigger",trigger:!1}}},tipTarget:".share-access-navbar"},{name:"formats",text:f.default.help_formats,template:(0,S.default)({strings:f.default}),device:{desktop:{arrow:{position:"top",x:14,y:37},panel:{x:-124,y:57},target:{element:"#formatsTrigger",trigger:!1}},tablet:{arrow:{position:"top",x:16,y:40},panel:{x:-110,y:60},target:{element:"#formatsTrigger",trigger:!1}}},tipTarget:".navbar-switch-formats"},{name:"saveOffline",text:f.default.help_offline,template:(0,P.default)({strings:f.default}),device:{desktop:{arrow:{position:"left",x:-234,y:148},panel:{x:-514,y:60},target:{element:"#settings_button",trigger:!0}},tablet:{arrow:{position:"left",x:-20,y:12},panel:{x:-300,y:-72},target:{element:".offlineSeparator",parentElement:"#settings_button",trigger:!0}}},tipTarget:"#settings_button"}],re={text:f.default.help_scitrus,content:f.default.help_scitrus_desc,device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-170},target:{element:"#notesDesktop"}}},target:"#reader-left-panel"}}var Ce=function(e,t,n){e.length>0&&t.length>0&&t.forEach((function(t){var a=e.attr(t);void 0!==a&&e.attr(t,a.replace(/node/g,n))}))},Te={returnSuppressedArray:function(){return se},returnActionList:function(){return ne},returnActionOrder:function(){return{center:ge,left:me,right:ce,more:pe}},returnTabList:function(){return ae},returnTabOrder:function(){return ve},returnButtonList:function(){return ie},returnButtonOrder:function(){return he},returnTipList:function(){return oe},returnTipOrder:function(){return _e},returnOneTimeItem:function(){return re},returnMoreMenu:function(e){return{name:"more",template:(0,y.default)({trigger:{ariaLabel:"view more options",classList:"rpanel_toggle",id:"settings_button",icon:'<span class="icon material-icons">more_horiz</span>',hasPopup:"true",title:f.default.more+" ["+Keyboard.ToggleRightPanel+"]",tooltip:"bottom"},content:{ariaLabel:f.default.rpanel,classList:"dropdown-list wide",content:(0,R.default)({content:(0,B.default)({items:e})}),id:"reader-right-panel"}})}},returnLeftMenu:function(){return{name:"menu",template:(0,F.default)({strings:f.default,keyboard:Keyboard})}},afterPublicationLoad:function(){Q.default.displayActions.columnsEnabled()||$(_.default.navbar_info.readingOptions).find(".option-columns").remove();var e=$(".reading_options").find(_.default.dropdown_info.content);if(X.default.isPDF()?e.addClass("slim"):e.addClass("medium"),!c.default.customConfig.nodeNavigationDisabled){var t=$(_.default.paging_info.paging_class),n=t.find(_.default.dropdown_info.trigger),a=t.find(_.default.dropdown_info.content),i=h.default.getHtmlData();n.attr({title:i.title}),n.addClass(i.classes),n.find(".pagination_button_text").html(i.text),a.find('input[name="page-select"]').attr("type",i.inputType);var o=n.attr("aria-label");n.attr("aria-label",o.replace("node",i.text.toLowerCase()));var r=i.text.toLowerCase();Ce(n,["aria-label"],r);var s=$(_.default.paging_info.pageSelector);s.find(".list_title").text("go to "+r),Ce(s.find("div"),["aria-label"],r),Ce(s.find("input"),["aria-label"],r),Ce(s.find("button"),["title","data-alt-title"],r),i.displayInfoRow||$(_.default.paging_info.infoRow).parent().remove(),h.default.getTotal()<2&&$(_.default.paging_info.paging_class).remove()}X.default.check()}};t.default=Te}.apply(t,a))||(e.exports=i)},1809:function(e,t,n){var a,i;n(69070),a=[t,n(85626),n(39968),n(43397),n(40529)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={$element:null,isShowBanner:!1,type:null,config:null,id:i.default.access_banner.id,init:function(){s.settings(),s.isShowBanner&&(s.$element=$(i.default.access_banner.id),s.create(),s.controller())},settings:function(){var e=a.default.customConfig.freeToReadConfig;e.isFreeToRead&&e.isBannerEnabled&&(s.isShowBanner=!0,s.type="free to read",s.config=e)},controller:function(){$(document).on("click",s.id+" .close",(function(){s.destroy($(this))}))},create:function(){var e=$("#reading-area");if(s.config.isBannerEnabled){var t=(0,o.default)(s.data());e.prepend($(t))}},data:function(){if("free to read"===s.type)return{id:i.default.access_banner.id.substr(1),classes:"popup_container backgroundNotice top",config:s.config,strings:n.default,isFTR:!0}},destroy:function(e){e.closest(".popup_container").slideUp("normal",(function(){e.closest(s.id).remove()})),$(window).off("resize.AccessBanner")}},l=s;t.default=l}.apply(t,a))||(e.exports=i)},7475:function(e,t,n){var a,i;n(69070),a=[t,n(91058),n(32564),n(74916),n(15306),n(85626),n(43397),n(39968),n(9568),n(23069),n(4646),n(84222)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=p(r),s=p(s),l=p(l),u=p(u),d=p(d),f=p(f),c=p(c);var g={timerAlertElement:null,clockIconElement:null,container:null,state:{mode:s.default.rental_preview.modes.DISABLED,remainingTimeEndPoint:"",popupMessage:"",alertHidden:!0,closedByUser:!1},timer:null,init:function(){this._setMode(),this.isEnabled()&&(this.container=document.querySelector("#app-container"),this.timer=new u.default,this.start())},start:function(){var e=this,t=l.default.customConfig.epubActions.time,n=EREADER.utils.isOffline();this.timer.updateTime(t),this.getActualRemainingTime((function(t){e.timer.updateTime(parseInt(t))})),this.appendTimerAlertHTML(n),n?this.openAlert():this.timer.startTimer((function(){e.handleTimerTick(),e.hasExpired()&&(e.createExpiredPopup(),l.default.customConfig.epubActions.rental?e.reloadPage(4e3):e.redirectToSite(4e3))}))},getTimerAlertData:function(e){var t={id:s.default.rental_preview.timer_element_id.substr(1),text:this.state.popupMessage,isOffline:e};return t.timeString=this.timer.getFormattedTime(),t.timeStringDigital=this.timer.getFormattedTime(s.default.timer.fromats.DIGITAL),t},appendTimerAlertHTML:function(e){if(this.container&&!this.timerAlertElement){var t=(0,c.default)(this.getTimerAlertData(e));this.container.insertAdjacentHTML("afterbegin",t),this.timerAlertElement=this.container.querySelector(s.default.rental_preview.timer_element_id),this.clockIconElement=this.timerAlertElement.querySelector(".icon"),this.addCloseAlertEventListener()}},addCloseAlertEventListener:function(){if(this.timerAlertElement){var e=this;this.timerAlertElement.querySelector(".close").addEventListener("click",(function(){e.state.alertHidden=!0,e.state.closedByUser=!0,e.timerAlertElement.classList.add("closed")}))}},openAlert:function(){this.timerAlertElement&&(this.state.alertHidden=!1,this.timerAlertElement.classList.remove("closed"))},showClockIcon:function(){this.clockIconElement.classList.remove("hidden")},createExpiredPopup:function(){var e={hasIcon:"true",icon:"access_time",title:r.default.viewMode_expired_title,description:r.default.viewMode_expired_text},t=(0,f.default)({settings:e});d.default.customPopup({closeBtn:!1,escBtn:!1,overlayClick:!1,customClasses:"rental"},t)},reloadPage:function(e){window.setTimeout((function(){window.location.reload()}),e)},redirectToSite:function(e){window.setTimeout((function(){window.location.replace(l.default.customConfig.siteUrl)}),e)},handleTimerTick:function(){this.timerAlertElement&&(this.shouldHideAlertElement()||!this.state.alertHidden||this.state.closedByUser||(this.openAlert(),this.showClockIcon()),this.timerAlertElement.querySelector("#timeLeft").textContent=this.timer.getFormattedTime(),this.timerAlertElement.querySelector("#timeLeftDigital").textContent=this.timer.getFormattedTime(s.default.timer.fromats.DIGITAL))},getActualRemainingTime:function(e){$.ajax({url:this.state.remainingTimeEndPoint,dataType:"json",success:function(t){e(t.remainingDuration)},error:function(){e(0)}})},shouldHideAlertElement:function(){return this.timer.currentTime.D>=2},toTransparent:function(){this.isEnabled()&&this.timerAlertElement.classList.add("transparent")},toOpaque:function(){this.isEnabled()&&this.timerAlertElement.classList.remove("transparent")},isEnabled:function(){return this.state.mode!==s.default.rental_preview.modes.DISABLED},hasExpired:function(){return this.timer.hasCompleted()},_setMode:function(){var e=l.default.customConfig;e.epubActions.preview?(this.state.mode=s.default.rental_preview.modes.PREVIEW,this.state.remainingTimeEndPoint=e.previewUrl,this.state.popupMessage=r.default.viewMode_preview):e.epubActions.rental&&(this.state.mode=s.default.rental_preview.modes.RENTAL,this.state.remainingTimeEndPoint=e.accessDurationUrl,this.state.popupMessage=r.default.viewMode_rental)}};t.default=g}.apply(t,a))||(e.exports=i)},9568:function(e,t,n){var a,i;n(69070),a=[t,n(83112),n(83710),n(41539),n(39714),n(32564),n(74916),n(23123),n(91058),n(43397)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d){"use strict";var f;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,d=(f=d)&&f.__esModule?f:{default:f};var c=function(){this.currentTime={D:0,H:0,M:0,S:0},this.duration=0,this.updateTime=function(e){"string"==typeof e?(this.currentTime=this.timeStringToTimeObject(e),this.duration=this.timeObjectToMs(this.currentTime)):"number"==typeof e?(this.currentTime=this.msToTimeObject(e),this.duration=e):"number"==typeof e.D&&"number"==typeof e.H&&"number"==typeof e.M&&"number"==typeof e.S&&(this.currentTime.D=e.D,this.currentTime.H=e.H,this.currentTime.M=e.M,this.currentTime.S=e.S,this.duration=this.timeObjectToMs(this.currentTime))},this.getFormattedTime=function(e){var t;return e===d.default.timer.fromats.DIGITAL?this.currentTime.D<1&&this.currentTime.H<1?this.currentTime.M+1+" min":this.currentTime.D<2?(t=1===this.currentTime.D?this.currentTime.H+24:this.currentTime.H).toString().padStart(2,"0")+":"+this.currentTime.M.toString().padStart(2,"0"):this.getExpirationDate():this.currentTime.D<1&&this.currentTime.H<1&&this.currentTime.M<1?"1 minute":this.currentTime.D<1&&this.currentTime.H<1?this.currentTime.M+1+" minutes":this.currentTime.D<2?((t=1===this.currentTime.D?this.currentTime.H+24:this.currentTime.H)>0?t+"h ":"")+this.currentTime.M+"m ":void 0},this.startTimer=function(e){var t=this,n=setInterval((function(){e(),t.duration=t.duration-1e3,t.duration<0&&clearInterval(n);t.updateTime(t.duration)}),1e3)},this.hasCompleted=function(){return 0===this.currentTime.D&&0===this.currentTime.H&&0===this.currentTime.M&&0===this.currentTime.S},this.timeStringToTimeObject=function(e){var t=e.split(":");return{D:Math.floor(parseInt(t[0])/24),H:parseInt(t[0]),M:parseInt(t[1]),S:parseInt(t[2])}},this.msToTimeObject=function(e){var t=Math.floor(e%6e4/1e3),n=Math.floor(e%36e5/6e4);return{H:Math.floor(e%864e5/36e5),M:n,S:t,D:Math.floor(e/864e5)}},this.timeObjectToMs=function(e){return 1e3*(e.S+60*e.M+3600*e.H+86400*e.D)},this.getExpirationDate=function(){var e=new Date,t=this.currentTime.D;e.setDate(e.getDate()+t);var n=e.getDate();return"Exp. "+e.toLocaleString("en-GB",{month:"short"})+" "+n+", "+e.getFullYear()}};t.default=c}.apply(t,a))||(e.exports=i)},72487:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(32564),n(3843),n(83710),n(43397),n(85626),n(34707),n(23069),n(99427),n(65426),n(39968),n(88995),n(4646),n(38031)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p,g,m){"use strict";function v(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=v(r),s=v(s),l=v(l),u=v(u),d=v(d),f=v(f),c=v(c),p=v(p),g=v(g),m=v(m);var h=c.default.customConfig.alertPopupMsg,_="authorized",b="unauthorized",E="POST",y=c.default.customConfig,w={isCopying:!1,COPY_BTN:"#copy-to-clipboard",setup:function(){if($("body").on("click",".shareAccessUrl",o.debounce((function(){d.default.isOffline()?u.default.toast("OFFLINE","share access"):w.access()}),2e3,{leading:!0,trailing:!1})),f.default.isSupported()){var e=new f.default("#copy-to-clipboard",{text:function(e){return e.getAttribute("data-clipboard-text")}});return EREADER.utils.ltTablet()&&$(r.default.right_panel_info.close_btn).trigger("click"),e.on("success",(function(){u.default.toast("SUCCESS","","",s.default.sharedAccess_copied)})),e.on("error",(function(){u.default.toast("SORRY")})),e}},destroy:function(e){void 0!==e&&e.destroy()},copy:function(e,t,n,a){w.isCopying=!0,void 0!==a&&a(),w.createSharePopup(n.title,n.label,t)},showTermMessage:function(){var e='<p class="subTitle">'+o.template(s.default.terms_and_conditions_label)({url:c.default.customConfig.termsAndConditionsUrl})+(c.default.customConfig.sharedAccessConfig.shareSponsorLink?"<br/>"+o.template(s.default.learn_more_label)({url:c.default.customConfig.sharedAccessConfig.shareSponsorLink}):"")+"</p>",t={customClasses:"termsPopup",primaryBtn:!0,primaryBtnClasses:"js__close acceptTerms",primaryBtnText:s.default.generic_agree,secondaryBtn:!0,secondaryBtnText:"CANCEL"},n={hasIcon:"true",icon:"group_add",messageType:"info",title:s.default.sharedAccess_title,description:e},a=(0,g.default)({settings:n});u.default.customPopup(t,a),$(".acceptTerms").on("click",(function(e){p.default.access_terms_accepted=!0,w.tryShareAccess()}))},createSharePopup:function(e,t,n){var a='<label class="subTitle" for="share-url-input-id">'+t+"</label>",i=document.createElement("div");i.setAttribute("id","clipboard-input"),i.className="clipboard-input";var o=document.createElement("div");o.setAttribute("id","share-url-input-cont");var r=document.createElement("input");EREADER.utils.setAttributes(r,{id:"share-url-input-id",type:"text",value:n,readonly:"readonly"}),o.appendChild(r);var s=document.createElement("div");EREADER.utils.setAttributes(s,{id:"copy-to-clipboard","data-clipboard-text":n,role:"button"}),s.textContent="COPY",i.appendChild(o),f.default.isSupported&&(i.appendChild(s),i.className="clipboard-input supported"),s.addEventListener("click",(function(){w.isCopying=!1}));var l={hasIcon:"true",icon:"group_add",messageType:"info",title:e,description:a+i.outerHTML},d=(0,g.default)({settings:l});u.default.customPopup({customClasses:"shareLink"},d),setTimeout((function(){$("#share-url-input-id").focus().select()}),500)},access:function(){var e=m.default.accessPermissionConfig();e.isNoAccess?u.default.toast("FREE_ACCESS","share access to","","",e):y.epubActions.shareAccess?w.checkAuthorizedSharing((function(e,t){t.error?u.default.toast("TEMPORARY_ERROR","Share access link generation",void 0,h.SHARING_TEMPORARY_ERROR):e.authorized?($(r.default.menudrawer_info.offline_btn).removeClass(r.default.menudrawer_info.permissionDisabled),c.default.customConfig.sharedAccessConfig.alwaysDisplaySharingTermsPopup||!p.default.access_terms_accepted?w.showTermMessage():w.tryShareAccess()):!1===e.authorized&&("Permission Depleted"===e.errorType?(u.default.toast("PERMISSIONS_DEPLETED","access sharing","Access to this publication cannot be shared"),$(r.default.menudrawer_info.offline_btn).addClass(r.default.menudrawer_info.permissionDisabled)):"Sharing Unauthorized"===e.errorType?(u.default.toast("USER_UNAUTHORIZED","shared",void 0,h.SHARING_UNAUTHORIZED),$(r.default.menudrawer_info.offline_btn).addClass(r.default.menudrawer_info.permissionDisabled)):"Sharing Unavailable"===e.errorType?u.default.toast("SHARING_UNAVAILABLE",void 0,void 0,h.SHARING_UNAVAILABLE):u.default.toast("TEMPORARY_ERROR","Share access link generation",void 0,h.SHARING_TEMPORARY_ERROR))})):u.default.toast("SHARING_DISABLED",void 0,void 0,h.SHARING_DISABLED)},tryShareAccess:function(){w.getJsonFromServer((function(e,t){!e.error&&e.authorized?(w.copy("#copy-to-clipboard",t.shareUrl,{title:s.default.sharedAccess_title,label:s.default.sharedAccess_label,success:s.default.sharedAccess_copied}),l.default.trigger(l.default.eventTypes.SHARE,{customProperties:{eventTime:Date.now(),shareType:"P2P",shareURL:t.shareUrl}})):u.default.toast("TEMPORARY_ERROR","Share access link generation",void 0,h.SHARING_TEMPORARY_ERROR)}))},getJsonFromServer:function(e){$.ajax({url:R.getShareAccessUrl(),method:E,async:!1,success:function(t){t.status===_?e({authorized:!0},t):t.status===b&&e({authorized:!1},t)},error:function(t){e({error:!0},t)}})},checkAuthorizedSharing:function(e){$.ajax({url:R.getAuthorizedSharingAccessUrl(),method:E,async:!1,success:function(t){e(t,{error:!1})},error:function(t){e(t,{error:!0})}})},checkShareAuthorization:function(){c.default.customConfig.epubActions.shareAccess&&w.checkAuthorizedSharing((function(e,t){t.error||("Permission Depleted"===e.errorType?p.default.authorized_sharing_available=!0:p.default.authorized_sharing_available=e.authorized&&!d.default.isOffline())}))}};var R={getShareAccessUrl:function(){var e=c.default.customConfig.shareAccessUrl,t=c.default.customConfig.doi,n=c.default.customConfig.format;return void 0===e||0===e.length?"":e+"?doi="+encodeURIComponent(t)+"&format="+n+"&shareType=P2P"},getAuthorizedSharingAccessUrl:function(){var e=c.default.customConfig.authorizeSharing,t=c.default.customConfig.doi,n=c.default.customConfig.format;return void 0===e||0===e.length?"":e+"?doi="+encodeURIComponent(t)+"&format="+n+"&shareType=P2P"}},A=w;t.default=A}.apply(t,a))||(e.exports=i)},58951:function(e,t,n){var a,i;n(69070),a=[t,n(32564),n(69826),n(41539),n(85626),n(39968),n(23069),n(43397),n(57659),n(4646)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=f(o),r=f(r),s=f(s),l=f(l),u=f(u),d=f(d);var c=r.default.customConfig.sharedAccessConfig;function p(e){e||setTimeout((function(){$("body").attr("data-alert-open",!0)}),10)}var g={$element:null,$overlay:null,init:function(e){c.isShared&&(g.$overlay=$(".shared_overlay-btn"),g.testForErrors()||0!==$(l.default.shared_access_view_info.id).length||function(e){if(r.default.customConfig.sharedAccessConfig.isShareBannerEnabled){var t=(0,u.default)(g.data());e.prepend($(t)),p(EREADER.utils.isMobile())}}($("#reading-area")),g.$element=g.getTopMessage(),g.controller())},controller:function(){g.$element.find(".btn").on("click",(function(e){$(this).blur()})),$(window).on("resize.sharedView",(function(e){var t=EREADER.utils.isMobile();t||g.$element.css("display",""),p(t)})),g.$element.on("click",".close",(function(){g.destroy()})),$("#app-navbar").on("click",".sharedAccess_mobileTrigger",(function(){!function(){var e=g.data(),t='<p class="subTitle">'+e.strings.sharedAccess_view_title+"</p>";e.isMediaShareType&&""!==e.config.shareMediaMessage?t+="<small>"+e.config.shareMediaMessage+"</small>":e.isP2PShareType&&""!==e.config.shareSponsorMessage&&(t+="<small>"+e.config.shareSponsorMessage+"</small>");var n={hasIcon:"true",icon:"group",messageType:"info",title:o.default.shared_access,description:t},a=(0,d.default)({settings:n}),i={customClasses:"sharedAccessMessage",secondaryBtn:!0};""!==e.config.shareSponsorLink&&(i.primaryBtn=!0,i.primaryBtnText=o.default.learn_more,i.primaryBtnElement="a",i.primaryBtnHref=e.config.shareSponsorLink),s.default.customPopup(i,a)}()}))},getTopMessage:function(){return $(l.default.shared_access_view_info.id)},data:function(){return{id:l.default.shared_access_view_info.id.substr(1),isMediaShareType:"MEDIA"===c.shareType,isP2PShareType:"P2P"===c.shareType,classes:"popup_container backgroundNotice top",config:c,strings:o.default}},testForErrors:function(){return!1},toOpaque:function(){var e=EREADER.utils.isMobile()||EREADER.utils.isTablet();c.isShared&&e&&g.$overlay.removeClass("transparent")},toTransparent:function(){var e=EREADER.utils.isMobile()||EREADER.utils.isTablet();c.isShared&&e&&g.$overlay.addClass("transparent")},destroy:function(){g.$element.slideUp("normal",(function(){g.$element.remove(),g.$overlay.removeClass("d-none")})),$("body").removeAttr("data-alert-open"),$(window).off("resize.sharedView")}},m=g;t.default=m}.apply(t,a))||(e.exports=i)},55598:function(e,t,n){var a,i;n(69070),a=[t,n(68309),n(39968),n(99427)],i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=o(a),i=o(i);var r={setup:function(){var e=a.default.customConfig.analyticsConfig;i.default.isOffline()||e&&e.enabled&&this.setupProviders(e)},setupProviders:function(e){var t=e.providers;if(void 0!==t)for(var n=0;n<t.length;n++){var a=t[n];"hotjar"===a.name&&a.enabled?this.setupHotJar(a):"atm"===a.name&&a.enabled&&s(a)}},setupHotJar:function(e){var t=e.siteId,n=e.version;t&&this.AddHotJarScriptEl(t,n)},AddHotJarScriptEl:function(e,t){var n,a,i,o;n=window,a=document,n.hj=n.hj||function(){(n.hj.q=n.hj.q||[]).push(arguments)},n._hjSettings={hjid:e,hjsv:t},i=a.getElementsByTagName("head")[0],(o=a.createElement("script")).async=1,o.src="https://static.hotjar.com/c/hotjar-"+n._hjSettings.hjid+".js?sv="+n._hjSettings.hjsv,i.appendChild(o)}};function s(e){window.readerAtmEventData&&function(e){var t=window.digitalData?window.digitalData:{};if(t.event=t.event||[],e.eventData&&(e.eventName||window.readerAtmEventName)){var n=e.eventName?e.eventName:window.readerAtmEventName;t.event.push({eventData:e.eventData,eventName:n})}else console.error("Server returned malformed or empty atm event object",e)}(window.readerAtmEventData)}var l=r;t.default=l}.apply(t,a),void 0===i||(e.exports=i)},4794:function(e,t,n){var a;n(69070),void 0===(a=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){e instanceof Object&&(this.readerEventGlobalVariables=EREADER.EVENTS.GLOBAL_EVENTS,this.type=t,this.readerEventCustomProperties=e.customProperties)};t.default=n}.apply(t,[t]))||(e.exports=a)},34707:function(e,t,n){var a,i;n(69070),a=[t,n(3843),n(83710),n(32564),n(91058),n(92222),n(47941),n(85827),n(41539),n(74916),n(23123),n(57327),n(26699),n(32023),n(39968),n(99427),n(4794),n(29455)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_){"use strict";function b(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,m=b(m),v=b(v),h=b(h),_=b(_);var E={eventTypes:{START:"start",END:"end",READ:"read",VIEW_AD:"viewAd",SHARE:"share",DOWNLOAD:"download",PRINT:"print",SAVE_OFFLINE:"saveOffline",START_TOUR:"startTour",TOUR_TIP:"tourTip",OPEN_LEFT_MENU:"openLeftMenu"},storageKeys:{readerEventsStorageKey:"readerEvents_"+m.default.customConfig.doi+"_"+m.default.customConfig.format},method:"POST",eventsKey:"readerEvents"},y={eventTypes:E.eventTypes,trigger:function(e,t){if(m.default.customConfig.eventsConfig.enabled)switch(e){case E.eventTypes.START:y.start(t);break;case E.eventTypes.END:y.end(t);break;case E.eventTypes.READ:y.read(t);break;case E.eventTypes.SHARE:y.share(t);break;case E.eventTypes.DOWNLOAD:y.download(t);break;case E.eventTypes.PRINT:y.print(t);break;case E.eventTypes.SAVE_OFFLINE:y.saveOffline(t);break;case E.eventTypes.START_TOUR:y.startTour(t);break;case E.eventTypes.TOUR_TIP:y.tourTip(t);break;case E.eventTypes.OPEN_LEFT_MENU:y.openLeftMenu(t)}},start:function(e){S(!0),$(window).on("beforeunload",(function(e){T()&&y.trigger(y.eventTypes.END,{customProperties:{eventTime:Date.now()}})})),$(window).on("online",(function(){m.default.customConfig.eventsConfig.enabled&&(T()?EREADER.EVENTS.GLOBAL_EVENTS.isOnline=!0:S(!0))})),$(window).on("offline",(function(){m.default.customConfig.eventsConfig.enabled&&T()&&(EREADER.EVENTS.GLOBAL_EVENTS.isOnline=!1)})),EREADER.EVENTS={STORED_EVENTS:[],READ_ENTRY:{},LEFT_MENU_OPENED_BEFORE:{info:!1,chapters:!1,files:!1,notes:!1,links:!1},GLOBAL_EVENTS:{eReaderEpisodeId:EREADER.utils.generateUID(),episodeType:EREADER.utils.getEpisodeType(),episodeStartingTime:Date.now(),isMobile:EREADER.utils.isMobile(),doi:m.default.customConfig.doi,publicationTitle:m.default.customConfig.title,format:m.default.customConfig.format,isOnline:!v.default.isOffline()}},function(){P();var e=setInterval((function(){EREADER.EVENTS.GLOBAL_EVENTS.episodeRemainingTime?EREADER.EVENTS.GLOBAL_EVENTS.episodeRemainingTime-(new Date).getTime()<0&&(y.trigger(y.eventTypes.END,{customProperties:{eventTime:Date.now()}}),clearInterval(e)):(-100,clearInterval(e))}),1e3)}(),w(e,E.eventTypes.START)},end:function(e){T()&&(C(e,!0),function(e){e.customProperties.episodeDuration=parseInt((Date.now()-EREADER.EVENTS.GLOBAL_EVENTS.episodeStartingTime)/1e3)}(e),w(e,E.eventTypes.END,!0),S(),EREADER.EVENTS={STORED_EVENTS:[],READ_ENTRY:{},LEFT_MENU_OPENED_BEFORE:{info:!1,chapters:!1,files:!1,notes:!1,links:!1},GLOBAL_EVENTS:{}})},read:function(e){R(e,E.eventTypes.READ,!0)},viewAd:function(e){w(e,E.eventTypes.VIEW_AD)},share:function(e){R(e,E.eventTypes.SHARE)},download:function(e){R(e,E.eventTypes.DOWNLOAD)},print:function(e){R(e,E.eventTypes.PRINT)},saveOffline:function(e){R(e,E.eventTypes.SAVE_OFFLINE)},startTour:function(e){R(e,E.eventTypes.START_TOUR)},tourTip:function(e){R(e,E.eventTypes.TOUR_TIP)},openLeftMenu:function(e){var t=e.customProperties.openedMenuItem;EREADER.EVENTS.LEFT_MENU_OPENED_BEFORE[t]||(EREADER.EVENTS.LEFT_MENU_OPENED_BEFORE[t]=!0,R(e,E.eventTypes.OPEN_LEFT_MENU))}};function w(e,t,n){EREADER.EVENTS.STORED_EVENTS.push(function(e,t){var n=new h.default(e,t);if(!n)return;return n}(e,t)),EREADER.EVENTS.STORED_EVENTS.length!==m.default.customConfig.eventsConfig.allowedNumOfEventsPerReq-2||n||y.trigger(y.eventTypes.END,{customProperties:{eventTime:Date.now()}})}function R(e,t,n){T()?(A(e,t,n),P()):(y.trigger(y.eventTypes.START,{customProperties:{eventTime:Date.now()}}),A(e,t,n))}function A(e,t,n){n?C(e):w(e,t)}function C(e,t){var n=EREADER.EVENTS.READ_ENTRY;$.isEmptyObject(n)?t||(EREADER.EVENTS.READ_ENTRY=e):(n.customProperties.location!==e.customProperties.location||t)&&(n.customProperties.readDuration=parseInt((e.customProperties.eventTime-n.customProperties.eventTime)/1e3),w(n,E.eventTypes.READ,t),function(e){"campaign"===e.customProperties.locationType&&e.customProperties.readDuration>=m.default.customConfig.eventsConfig.adImpressionDuration&&y.viewAd({customProperties:{eventTime:Date.now(),campaignCode:EREADER.reader.package().spine.items[e.customProperties.spineIndex].campaign.code||""}})}(n),EREADER.EVENTS.READ_ENTRY={},t||(EREADER.EVENTS.READ_ENTRY=e))}function T(){return void 0!==EREADER.EVENTS.GLOBAL_EVENTS.eReaderEpisodeId&&void 0!==EREADER.EVENTS.GLOBAL_EVENTS.eReaderEpisodeId}function S(e){if(v.default.isOffline())e||function(e,t){_.default.get(t,(function(n){n?_.default.put(t,n.concat(e),$.noop):_.default.put(t,e,$.noop)}))}(EREADER.EVENTS.STORED_EVENTS,E.storageKeys.readerEventsStorageKey);else if(e){var t=function(e){return $.isEmptyObject(e)?{}:e.reduce((function(e,t){var n=t.readerEventGlobalVariables.eReaderEpisodeId;return e[n]||(e[n]=[]),e[n].push(t),e}),{})}(function(e){var t;return _.default.get(e,(function(e){t=e})),t||{}}(E.storageKeys.readerEventsStorageKey));a=E.storageKeys.readerEventsStorageKey,_.default.remove(a);var n=0;$.each(Object.keys(t),(function(e,a){if(n>=50)return!1;O(t[a]),n++}))}else{O(EREADER.EVENTS.STORED_EVENTS)}var a}function O(e){if(function(e){return!$.isEmptyObject(e)&&(!(e.length<3)&&function(e){for(var t=0,n=0,a=0;a<e.length;a++){var i=e[a];if(i.type===E.eventTypes.START&&n++,i.type===E.eventTypes.END&&t++,n>1||t>1)return!1}return 1===n&&1===t}(e))}(e=function(e){var t=m.default.customConfig.eventsConfig.excludedEvents.split(",");return e.filter((function(e){return!t.includes(e.type)}))}(e)))if(navigator.sendBeacon){var t=function(e){var t=new FormData;return t.append(E.eventsKey,JSON.stringify(e)),navigator.sendBeacon(m.default.customConfig.eventsConfig.readerEventsAnalyticsUrl,t)}(e);t||D(e)}else D(e)}function D(e){var t={};t[E.eventsKey]=JSON.stringify(e),$.ajax({url:m.default.customConfig.eventsConfig.readerEventsAnalyticsUrl,method:E.method,dataType:"json",data:t})}function P(){var e=m.default.customConfig.eventsConfig.episodeRemainingTime;EREADER.EVENTS.GLOBAL_EVENTS.episodeRemainingTime=e?new Date(Date.now()+parseInt(e)).getTime():new Date(Date.now()+3e5).getTime()}var I=y;t.default=I}.apply(t,a))||(e.exports=i)},36658:function(e,t,n){var a,i;n(69070),a=[t,n(68309),n(69826),n(41539),n(85626),n(39968),n(10520),n(99427),n(43397),n(45380),n(9064),n(90029)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}var g,m;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=p(o),r=p(r),s=p(s),l=p(l),u=p(u),d=p(d),f=p(f),c=p(c);var v="../src/images/remarq_logo.png",h="../src/images/hypothesis_logo.png",_={setup:function(){g=$("#"+s.default.panes.notes);var e=r.default.customConfig.annotationsConfig,t=r.default.customConfig.profileConfig.notesSuppressed;if(l.default.isOffline()){g.html((0,d.default)({title:o.default.notes_title,settings:{icon:"wifi",errorType:"offline",text:o.default.notes_offline}})),window.addEventListener("online",(function e(){_.setup(),removeEventListener("online",e)}))}else r.default.customConfig.epubActions.preview?g.html((0,d.default)({title:o.default.notes_title,settings:{icon:"fingerprint",errorType:"authorized",text:o.default.notes_not_authorized}})):e&&e.enabled&&!t?(this.setupProviders(e),this.AnnotationsTriggers()):g.html((0,d.default)({title:o.default.notes_title,settings:{icon:"remove_from_queue",errorType:"display",text:o.default.notes_not_enabled}}))},setupProviders:function(e){var t=e.providers;if(void 0!==t){var n=t.length,a={singleProvider:!1,id:""};1===n&&(a.singleProvider=!0,a.id=t[0].name),g.html((0,f.default)({tabTitle:o.default.notes_title,settings:a}));for(var i=0,r=t.length;i<r;i++){var s=t[i];a={id:s.name,name:s.title},"remarq"===s.name?a.src=v:"hypothesis"===s.name&&(a.src=h),g.find(".drawerMenu").append((0,c.default)({settings:a})),this.processProvider(s,n)}}else g.html((0,d.default)({title:o.default.notes_title,settings:{icon:"remove_from_queue",errorType:"display",text:o.default.notes_error}}))},processProvider:function(e,t){var n=e.name;"remarq"===n?(this.registerRemarqEvents(),1===t&&this.setupRemarq(e)):"hypothesis"===n&&1===t&&this.setupHypothesis(e)},onRemarqSelection:function(){var e,t=r.default.customConfig.annotationsConfig.providers;$.each(t,(function(t,n){if(EREADER.utils.displaySpinner($("#"+n.name+"-api")),"remarq"===n.name)return e=n,!1})),void 0!==e&&this.setupRemarq(e)},onHypothesisSelection:function(){var e,t=r.default.customConfig.annotationsConfig.providers;$.each(t,(function(t,n){if(EREADER.utils.displaySpinner($("#"+n.name+"-api")),"hypothesis"===n.name)return e=n,!1})),void 0!==e&&this.setupHypothesis(e)},setupRemarq:function(e){var t=e.src;if(t){var n=this.getScriptEl(t);e.apiBase&&n.setAttribute("data-api-base",e.apiBase),e.version&&n.setAttribute("data-version",e.version),n.async=!0,this.addScriptDataToPage(n)}},setupHypothesis:function(e){var t=e.src;window.hypothesisConfig=function(){return{onLayoutChange:function(e){LIT.Reader.LogEnabled&&console.log(e)},theme:e.theme,externalContainerSelector:"#hypothesis-api",branding:e.branding}};var n=document.createElement("script");n.setAttribute("src",t),n.setAttribute("id","hypothesis_id"),n.setAttribute("async","true"),document.head.appendChild(n)},addScriptDataToPage:function(e){e&&document.getElementsByTagName("head")[0].appendChild(e)},getScriptEl:function(e){var t=document.createElement("script");return t.src=e,t},injectRemarq:function(){Remarq.inject("#remarq-api")},stopRemarq:function(){Remarq.stop(),m.disconnect()},stopHypothesis:function(){document.head.removeChild(document.getElementById("hypothesis_id"))},registerRemarqEvents:function(){var e=this;$(document).on("Remarq_loaded",(function(t){e.injectRemarq()})),$(document).on("Remarq_injected",(function(e){_.AddScitrusVisibleObserver(),$("#remarq-api iframe").attr("tabindex","-1"),LIT.Reader.LogEnabled&&console.log("Remarq successfully injected and displayed!")}))},AddScitrusVisibleObserver:function(){var e=$(u.default.left_panel_info.id),t=document.getElementById("notes").parentElement;$("body").hasClass(u.default.left_panel_info.panel_class)&&e.toggleClass("scitrus-visible");(m=new MutationObserver((function(t,n){$.each(t,(function(t,n){"attributes"===n.type&&"aria-expanded"===n.attributeName&&e.toggleClass("scitrus-visible")}))}))).observe(t,{attributes:!0})},AnnotationsTriggers:function(){$("#Remarq").click((function(){_.onRemarqSelection()})),$("#change_Remarq").click((function(){_.stopRemarq()})),$("#Hypothesis").click((function(){_.onHypothesisSelection()})),$("#change_Hypothesis").click((function(){_.stopHypothesis()}))}},b=_;t.default=b}.apply(t,a))||(e.exports=i)},88995:function(e,t,n){var a,i;n(69070),a=[t,n(39968)],void 0===(i=function(e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var i={search_notification_shown:!1,access_terms_accepted:!1,authorized_sharing_available:!0,download_available:!1,download_single:!1,download_files_key:"",download_files_size:"",download_files_type:"",isFixedLayout:"epub"!==(n=(a=n)&&a.__esModule?a:{default:a}).default.customConfig.format};t.default=i}.apply(t,a))||(e.exports=i)},10520:function(e,t,n){var a;n(69070),void 0===(a=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n="tab-pane",a={toc:"chapters",info:"info",data:"files",notes:"notes",links:"links",ref:"references",cit:"citations",recommended:"recommended",fig:"figures",tables:"tables",media:"media",suppl:"supplementary",help:"help"},i={tabs:a,panes:{toc:"reader-toc-body",info:a.info+"-"+n,data:a.data+"-"+n,notes:a.notes+"-"+n,links:a.links+"-"+n,ref:a.ref+"-"+n,cit:a.cit+"-"+n,recommended:a.recommended+"-"+n,fig:a.fig+"-"+n,tables:a.tables+"-"+n,media:a.media+"-"+n,suppl:a.suppl+"-"+n,help:a.help+"-"+n},suffix:n};t.default=i}.apply(t,[t]))||(e.exports=a)},70828:function(e,t,n){var a,i;n(69070),a=[t,n(74916),n(15306),n(3843),n(83710),n(69826),n(41539),n(47941),n(26699),n(32023),n(39968),n(99427),n(23069),n(43397),n(4646),n(38031),n(85626),n(34707),n(33279),n(18395)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E){"use strict";function y(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,f=y(f),c=y(c),p=y(p),g=y(g),m=y(m),v=y(v),h=y(h),_=y(_),b=y(b);var w=f.default.customConfig.alertPopupMsg,R=function(e,t){v.default.fetchPermissions({reqType:v.default.PERMISSION_DOWNLOAD},t).done((function(t){v.default.canUsePermissions(t).done((function(t){A(e,t)})).fail((function(t){A(e,t.availableUsage),LIT.Reader.LogEnabled&&console.log(t.message)}))})).fail((function(t){e.preventDefault(),S(t)}))},A=function(e,t){var n={position:"toast",preset:"sorry"},a="";if(t===v.default.PERMISSION_NOT_AVAILABLE)p.default.toast("USER_UNAUTHORIZED","downloaded",void 0,w.USER_UNAUTHORIZED),C(e);else{if(t===v.default.UNLIMITED_USAGE)return O(e),!1;if(t>v.default.NO_USAGE){n={customClasses:"downloadPopup",primaryBtn:!0,primaryBtnElement:"a",primaryBtnHref:"#",primaryBtnClasses:"downloadPreview",primaryBtnText:h.default.generic_download,secondaryBtn:!0};var i={hasIcon:"true",icon:"get_app",title:h.default.download_title,description:h.default.download_text.replace("<span>X</span>",t)};a=(0,m.default)({settings:i}),p.default.customPopup(n,a),1===t?C(e):T(e)}else p.default.toast("PERMISSIONS_DEPLETED","download","The publication cannot be downloaded"),C(e)}},C=function(e){$(e.currentTarget).addClass(g.default.menudrawer_info.permissionDisabled)},T=function(e){$(e.currentTarget).removeClass(g.default.menudrawer_info.permissionDisabled)},S=function(e){p.default.toast("TEMPORARY_ERROR","Download"),console.error("Error downloading this document, "+e.message)},O=function(e,t){var n;t&&p.default.closeAlert(),L?(k.singleFile(e),n=D(P.data("download-files-key"))):(k.multipleFiles(e),n=D(I.val())),_.default.trigger(_.default.eventTypes.DOWNLOAD,{customProperties:{eventTime:Date.now(),downloadedFormat:n}})};function D(e){return f.default.customConfig.epubActions.download.files[e].shortCode}var P,I,L=!0,k={checkPermission:R,manageDownload:function(e,t){if(a=!1,i=P=e,o=v.default.accessPermissionConfig(P,"left"),P.data("single-download")&&(i=$(g.default.menudrawer_info.download_list)),c.default.isOffline()&&P.data("single-download")?p.default.toast("OFFLINE",h.default.download_offline):o.isNoAccess?(EREADER.utils.isMobile()||EREADER.utils.isMobileHeight())&&P.data("single-download")?p.default.toast("FREE_ACCESS","download"," format","",o):p.default.tip("FREE_ACCESS_TIP","download"," format",o):i.hasClass(g.default.menudrawer_info.not_resolved_yet)?p.default.popup("TEMPORARY_ERROR_ALTER","Download publication"):i.hasClass(g.default.menudrawer_info.could_not_resolve)?p.default.popup("SERIOUS_ERROR","Download publication"):i.hasClass(g.default.menudrawer_info.disable_by_default)||i.hasClass(g.default.menudrawer_info.disabled)?p.default.toast("TEMPORARY_ERROR","Download"):a=P.data("single-download"),a)if(L=P.data("single-download")){t.preventDefault();var n=e.attr("data-download-files-key");R(t,n)}else 0!==(I=$("#download-dialog").find("input[name='download-format']:checked")).length?R(t,I.val()):(t.preventDefault(),p.default.customPopup({appendTarget:$(g.default.menudrawer_info.download_list+" .formError"),position:"form",customClasses:"dark",preset:"fail"},h.default.download_no_option_selected));else t.preventDefault();var a,i,o},singleFile:function(e){var t=P.data("download-files-key");if(void 0!==t&&0!==t.length){var n=f.default.customConfig.epubActions.download.files[t].url;if(void 0!==n)return f.default.customConfig.adsInclusionEnabled&&(n=k.appendCampaignsToUrl(n)),EREADER.utils.isIosDevice()||EREADER.utils.isSafari()?window.location.assign(n):window.open(n);e.preventDefault(),p.default.toast("SORRY"),LIT.Reader.LogEnabled&&console.debug("Download error: No URL was found")}else p.default.toast("SORRY"),LIT.Reader.LogEnabled&&console.debug("Error opening file. No URL specified.")},multipleFiles:function(e){var t=f.default.customConfig.epubActions.download.files[I.val()];if(t&&t.url)return f.default.customConfig.adsInclusionEnabled&&(t.url=k.appendCampaignsToUrl(t.url)),EREADER.utils.isIosDevice()||EREADER.utils.isSafari()?window.location.assign(t.url):window.open(t.url);e.preventDefault(),p.default.toast("SORRY"),LIT.Reader.LogEnabled&&console.debug("Download error: No URL was found")},initDownloadHandlers:function(){$(document).on("click",".downloadPreview",(function(e){e.preventDefault(),O(e,!0)})),$(document).on("click",".downloadRetry",(function(e){R(e)}))},dropdownHandlers:function(){var e=$(g.default.navbar_info.navbarDownload),t=e.hasClass(g.default.menudrawer_info.permissionDisabled)||e.hasClass(g.default.menudrawer_info.not_resolved_yet)||e.hasClass(g.default.menudrawer_info.could_not_resolve),n=f.default.customConfig.epubActions.download,a=!$.isEmptyObject(n)&&Object.keys(n.files).length>1;e.find(".dropdown-trigger").on("dropdown:open",(function(n){!window.READER_OFFLINE&&!t||a||e.hasClass(g.default.menudrawer_info.permissionDisabled)&&(n.preventDefault(),k.checkPermission())}))},appendCampaignsToUrl:function(e){if(b.default.isPDF()){var t=(0,E.getDisplayedCampaigns)();if(t&&t.length>0){var n=e.includes("?")?"&campaigns=":"?campaigns=";e=e+n+encodeURIComponent(JSON.stringify(t))}}return e}};k.initDownloadHandlers();var x=k;t.default=x}.apply(t,a))||(e.exports=i)},3874:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(68309),n(57327),n(41539),n(26699),n(32023),n(32564),n(69826),n(85626),n(39968),n(55598),n(88995),n(99427),n(82710),n(54417),n(33279),n(16414),n(23069),n(9703),n(73383),n(43397),n(16709),n(38031),n(7025),n(28478),n(54998),n(10366),n(24221)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y,w,R,A,C,T,S,O,D){"use strict";function P(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,d=P(d),f=P(f),c=P(c),p=P(p),g=P(g),m=P(m),v=P(v),h=P(h),_=P(_),b=P(b),E=P(E),y=P(y),w=P(w),R=P(R),A=P(A),C=P(C),T=P(T),O=P(O),D=P(D);var I=!1,L=$("body"),k=function(){var e=$(".atyLoader");0!==e.length&&(e.fadeOut().remove(),$("#scrolled-content-frame").removeClass("overflowHidden"),$(".scrollHere").removeClass("scrollHere"),$(".search .results > div").length>0&&_.default.buttons.enable())},x=!0,M={events:{control:function(){"undefined"!=typeof EREADER&&(M.events.initEreaderFunctions(),M.events.initCustomHandlers(),M.events.contentDocumentLoaded(),M.events.contentDocumentLoadStart(),M.events.paginationChanged(),M.events.readerViewCreated(),M.events.onDropdownClosed())},initEreaderFunctions:function(){!g.default.isOffline()&&f.default.customConfig.restrictCopying&&A.default.isCopyingAllowed().then((function(e){e||($(document).on("copy",(function(e){b.default.toast("OFFLINE","","",d.default.copying_not_allowed),e.preventDefault()})),D.default.contentActions.addContentEventListener("copy",(function(e){b.default.toast("OFFLINE","","",d.default.copying_not_allowed),e.preventDefault()})))})),EREADER.on(O.default.UPDATE_NAVBAR,(function(e){m.default.update()})),EREADER.printButtonClicked=!1,EREADER.replaceByEreaderSearch=function(e){!e.ctrlKey&&!e.metaKey||70!==e.keyCode||EREADER.utils.isMaterialViewerOpen()||(document.activeElement.blur(),e.preventDefault(),$(w.default.search_info.search_trigger).trigger("click"))},EREADER.transpileContent=function(){var e=$("[data-panel-desktop]");$("[data-panel-mobile]").each((function(){var t=$(this),n=t.data("vport"),a=t.data("panelMobile"),i=D.default.contentActions.shouldGetFiguresFromContent();if("materials"!==a||!g.default.isOffline()||i){var o=e.filter("[data-panel-desktop='"+a+"']");$(window).width()<=n?o.children().detach().appendTo(t):t.children().detach().appendTo(o)}}))};L.height(),L.width();var e=L.height()+L.width();EREADER.isTouchDeviceKeyboardTriggered=function(){if(EREADER.utils.isTouchDevice()){var t=$(document.activeElement)[0].tagName,n=L.height()+L.width();if("INPUT"===t&&e>n)return!0;if(R.default.isZoomed()&&e===n)return!0}return!1},f.default.customConfig.restrictContent&&f.default.customConfig.currentUrl&&!f.default.customConfig.currentUrl.includes(new URI(window.location.href).hostname())&&$("html").remove();var t=o.debounce(y.default.scroll.horizontal,150),n=$("#reading-area");D.default.contentActions.addContentEventListener("mousewheel DOMMouseScroll",(function(e){t(e,3)})),n.on("mousewheel DOMMouseScroll",(function(e){t(e,3)})),window.addEventListener("orientationchange",(function(){setTimeout((function(){R.default.fitWidth()}),1)}))},initCustomHandlers:function(){L.on("focus",".btn, .page-switch-overlay-icon",(function(e){setTimeout((function(){$(this).blur();var e=$("body .tooltip.in");e.length>0&&(e.removeClass("in"),e.one("bsTransitionEnd",(function(){$(this).remove()})))}),500)}))},contentDocumentLoaded:function(){EREADER.on(O.default.CONTENT_LOADED,(function(){h.default.isZoomButtonsDisplayed()&&R.default.enableZoom(),x=!1,k(),EREADER.emit(O.default.UPDATE_NAVBAR),v.default.scrollTocIntoView()}))},contentDocumentLoadStart:function(){EREADER.on(O.default.CONTENT_LOAD_START,(function(){if(x=!0,0===$(".atyLoader").length&&(g.default.isOffline()||h.default.shouldUseLoader()&&($(w.default.reader_info.reading_area).append((0,T.default)({strings:d.default})),$("#scrolled-content-frame").addClass("overflowHidden"))),EREADER.utils.isTouchDevice()&&!I&&(y.default.touch.addListeners(),I=!0),x){$.when((e=$.Deferred(),setTimeout((function(){x&&(x=!1,e.resolve("Timed out"))}),8e3),e.promise())).done((function(e){k()}))}var e}))},paginationChanged:function(){EREADER.on(O.default.PAGINATION_CHANGED,(function(){EREADER.emit(O.default.UPDATE_NAVBAR),h.default.toggleDisplayFormat()}))},readerViewCreated:function(){EREADER.on(O.default.READER_VIEW_CREATED,(function(){EREADER.utils.isTouchDevice()&&L.addClass("isTouchDevice"),EREADER.utils.isIosDevice()&&L.addClass("iOS")}))},onDropdownClosed:function(){$(w.default.dropdown_info.trigger).on("dropdown:closed",(function(){EREADER.utils.scrolledContentFocus()}))}},readerUI:{init:function(){C.default.init()},afterSettingsInit:function(){m.default.init(),c.default.setup()},loadPrivate:function(){!function(){var e=f.default.customConfig.epubActions;if(p.default.isFixedLayout="epub"!==f.default.customConfig.format,void 0!==e){var t=e.download;if(t&&t.files){var n=0,a="";$.each(t.files,(function(e,t){t.available&&(n++,a=e)})),p.default.download_available=0!==n,1===n&&(p.default.download_single=!0,p.default.download_files_key=a,p.default.download_files_size=t.files[a].size,p.default.download_files_type=t.files[a].name,p.default.download_files_url=t.files[a].url)}}}(),m.default.loadPanel(d.default.i18n_toolbar);var e=$(w.default.menudrawer_info.user_panel).find("a");e.length>0&&e.on("click",(function(e){g.default.isOffline()&&(e.preventDefault(),b.default.toast("OFFLINE",$(this).html()))}))},onLoadEbook:function(e){m.default.afterPublicationLoad(),E.default.keyboard(),E.default.offline(),this.updateDocumentTitle(f.default.customConfig.title),EREADER.transpileContent(),EREADER.emit(O.default.PAGINATION_CHANGED)},updateDocumentTitle:function(e){0===document.title.length&&e?document.title=e:e=document.title,$(w.default.book_info.book_title).html(e),$(w.default.book_info.book_title).attr("title",e)}}},N=M;t.default=N}.apply(t,a))||(e.exports=i)},7025:function(e,t,n){var a,i;n(69070),a=[t,n(23069),n(99427),n(10366)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a);var r={consoleMessages:{notFound:"There was an error while trying to open this document.",unauthorized:"Access to this content has been lost.",serviceNotAvailable:" There was an error while trying to open this document.",offlineError:"Offline Error",contentNotAvailable:"-9 - This content is no longer available offline.",generalError:"There was an error while trying to open this document."},status_code:{NOT_FOUND:404,UNAUTHORIZED:401,SERVICE_NOT_AVAILABLE:503,CONTENT_NOT_AVAILABLE:-9},events:(i=o(i)).default.FILE_LOAD_ERROR+" "+i.default.DISPLAY_CONTENT_ERROR+" "+i.default.OFFLINE_LOAD_ERROR};function s(e,t){var i="";!function(e){return e.status===r.status_code.NOT_FOUND}(t)?!function(e){return e.status===r.status_code.SERVICE_NOT_AVAILABLE}(t)?!function(e){return e.status===r.status_code.UNAUTHORIZED}(t)?!function(e){return e.status===r.status_code.CONTENT_NOT_AVAILABLE}(t)?EREADER.utils.isOffline()?(a.default.setFailedRequest(t.failed_request),n.default.toast("OFFLINE","fetch new content"),i=r.consoleMessages.contentNotAvailable):(n.default.fullpage("GENERIC"),i=r.consoleMessages.generalError):(n.default.fullpage("-9",{goToLibrary:!0}),!0,i=r.consoleMessages.offlineError):(n.default.fullpage("401",{autoreload:!0}),i=r.consoleMessages.serviceNotAvailable):(n.default.fullpage("503"),i=r.consoleMessages.unauthorized):(n.default.fullpage("404"),i=r.consoleMessages.notFound),LIT.Reader.LogEnabled&&console.debug(i,e,t)}var l={init:function(){$(window).on(r.events,s)}};t.default=l}.apply(t,a))||(e.exports=i)},9703:function(e,t,n){var a,i;n(69070),a=[t,n(3843),n(83710),n(43397),n(85626),n(99427),n(34707),n(23069)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=u(i),o=u(o),r=u(r),s=u(s),l=u(l);var d={offline:function(){$(".citation_btn").on("click",(function(e){r.default.isOffline()&&(e.preventDefault(),l.default.toast("OFFLINE",o.default.offlineCitation))})),$(i.default.fullSite_info.fullSite_class).on("click",(function(e){r.default.isOffline()?(e.preventDefault(),l.default.toast("OFFLINE",o.default.offlineFullSite)):s.default.trigger(s.default.eventTypes.END,{customProperties:{eventTime:Date.now(),episodeDuration:""}})}))},keyboard:function(){if($(i.default.menudrawer_info.offline_documents).length>0){Keyboard.on(Keyboard.SwitchToLibrary,"reader",(function(){}))}0!==$(i.default.paging_info.paging_class)&&Keyboard.on(Keyboard.Paging,"reader",(function(){$(i.default.paging_info.paging_class+" "+i.default.dropdown_info.trigger).trigger("click")})),0!==$(".clipboard").length&&Keyboard.on(Keyboard.ShareList,"reader",(function(){$("#shareTrigger").trigger("click")})),0!==$(i.default.narrator_info.narrator_class).length&&Keyboard.on(Keyboard.ShowNarrator,"reader",(function(){$(i.default.narrator_info.narrator_class+" "+i.default.dropdown_info.trigger).trigger("click")})),0!==$(i.default.fullSite_info.fullSite_class).length&&Keyboard.on(Keyboard.FullSite,"reader",(function(){$(i.default.fullSite_info.fullSite_class)[0].click(),r.default.isOffline()||s.default.trigger(s.default.eventTypes.END,{customProperties:{eventTime:Date.now(),episodeDuration:""}})})),0!==$(i.default.cite_info.cite_class).length&&Keyboard.on(Keyboard.Cite,"reader",(function(){$(i.default.cite_info.cite_class)[0].click()})),0!==$(".navbar-center #formatsTrigger").length&&Keyboard.on(Keyboard.SwitchFormat,"reader",(function(){$(".navbar-center #formatsTrigger")[0].click()})),0!==$(".navbar-center #readingOptionsBtn").length&&Keyboard.on(Keyboard.readingOptions,"reader",(function(){$(".navbar-center #readingOptionsBtn")[0].click()})),$(document).on("keydown",(function(e){"Escape"===e.key&&$(".tooltip").tooltip("hide")})),$._data(document.body,"events").mouseout[0]=function(){},$(document).on("mouseout",".tooltip-inner",(function(){$(".tooltip").tooltip("hide")})),0!==$(i.default.menudrawer_info.offline_library).length&&Keyboard.on(Keyboard.SaveOffline,"reader",(function(){$(i.default.menudrawer_info.offline_library+" "+i.default.dropdown_info.trigger).trigger("click")})),0!==$(i.default.search_info.search_class)&&(Keyboard.on(Keyboard.ShowSearch,"reader",(function(){$(i.default.search_info.search_trigger).trigger("click")})),$(window).on("keydown",(function(e){EREADER.replaceByEreaderSearch(e)}))),EREADER.utils.isTouchDevice()||Keyboard.on(Keyboard.DownloadList,"reader",(function(){$(".navbar-download > button").trigger("click"),$("a.navbar-download").trigger("click")}))}};t.default=d}.apply(t,a))||(e.exports=i)},73383:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(33279),n(7475),n(58951),n(32153),n(24221)],void 0===(i=function(e,n,a,i,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(){i.default.toTransparent(),a.default.toTransparent()}function d(){i.default.toOpaque(),a.default.toOpaque()}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),r=l(r),s=l(s);var f=function(){return u(),r.default.goRight(),!1},c=function(){return d(),r.default.goLeft(),!1},p={clientX:0,clientY:0},g=$("#epub-reader-frame"),m=!1,v=!1,h=!1,_=!1,b=!1,E=-1,y=-1,w=function(e){var t=n.default.isScrolling(),a=e.changedTouches[0].clientY-p.clientY,i=e.changedTouches[0].clientX-p.clientX,o=t?0:40,r={swipedRight:i>o,swipedLeft:i<-1*o,swipedUp:a<-1*o,swipedDown:a>o,horSwipe:!1,verSwipe:!1};return r.swipedRight&&r.swipedUp?Math.abs(i)>Math.abs(a)?r.swipedUp=!1:r.swipedRight=!1:r.swipedLeft&&r.swipedDown&&(Math.abs(i)>Math.abs(a)?r.swipedDown=!1:r.swipedLeft=!1),r.horSwipe=r.swipedLeft||r.swipedRight,r.verSwipe=r.swipedUp||r.swipedDown,r},R=function(e){var t=$(e.target).parents(".table-wrap"),n=!1,a=w(e),i={navigateNext:!1,navigatePrev:!1};t.length&&(t[0].scrollWidth>t[0].clientWidth||t[0].scrollHeight>t[0].clientHeight)&&(n=!0),n?function(e,t,n){var a=e[0].scrollWidth>e[0].clientWidth,i=e[0].scrollHeight>e[0].clientHeight,o=e.scrollLeft()+e.innerWidth()>=e[0].scrollWidth,r=0===e.scrollLeft(),s=e.scrollTop()+e.innerHeight()>=e[0].scrollHeight,l=0===e.scrollTop();v=E+e.innerWidth()>=e[0].scrollWidth,h=0===E,_=y+e.innerHeight()>=e[0].scrollHeight,b=0===y;var u=t.swipedRight&&r&&h||t.swipedDown&&l&&b||t.swipedRight&&!a||t.swipedDown&&!i;t.swipedLeft&&o&&v||t.swipedUp&&s&&_||t.swipedLeft&&!a||t.swipedUp&&!i?n.navigateNext=!0:u&&(n.navigatePrev=!0);E=e.scrollLeft(),y=e.scrollTop()}(t,a,i):a.swipedUp||a.swipedLeft?i.navigateNext=!0:(a.swipedDown||a.swipedRight)&&(i.navigatePrev=!0),i.navigateNext?f():i.navigatePrev&&c()};var A={touch:{addListeners:function(){var e=o.debounce((function(e){e=e.originalEvent,p.clientY=e.touches[0].clientY,p.clientX=e.touches[0].clientX}),50),t=o.debounce((function(e){var t=$("body"),a=t.hasClass("isTouchDevice"),i=t.hasClass("info-visible"),o=t.hasClass("settings-visible"),r=a&&!i&&!o;n.default.isScrolling()?function(e){var t=w(e);t.swipedUp?u():t.swipedDown&&d()}(e.originalEvent):r&&R(e.originalEvent)}),50);s.default.contentActions.addContentEventListener("touchstart.swipe",e),s.default.contentActions.addContentEventListener("touchend.swipe",t),$(document).on("touchstart.swipe",e),$(document).on("touchend.swipe",t)}},scroll:{horizontal:function(e){g.length||(g=$("#epub-reader-frame"));var t=!n.default.isScrolling()&&!s.default.displayActions.fixedShouldScroll(),a=$(e.target).parents(".table-wrap");a.length&&a[0].scrollHeight>a[0].clientHeight&&(t=!1),$("body").hasClass("noteRef_open")&&1===$(e.target).parents(".noteRef").length&&(t=!1);var i=(void 0!==e.originalEvent.wheelDelta?e.originalEvent.wheelDelta:-40*e.originalEvent.detail)<0;if(i?u():d(),t){if(!m&&n.default.isBookViewScrollable())return m=!0,!1;if(m=!1,i){if(n.default.isPDF()&&r.default.isLastPage())return;f()}else c();return s.default.displayActions.fixBookPagePosition(),!1}m=!1}},toTransparent:u,toOpaque:d,onFullscreenChange:function(e){document.addEventListener("fullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1),document.addEventListener("MSFullscreenChange",e,!1),document.addEventListener("webkitfullscreenchange",e,!1)}};t.default=A}.apply(t,a))||(e.exports=i)},15510:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(47941),n(21249),n(3843),n(83710),n(85626),n(39968),n(32514),n(65714),n(34707),n(91389),n(26977)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p){"use strict";function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,s=g(s),l=g(l),u=g(u),d=g(d),f=g(f),c=g(c),p=g(p);var m=l.default.customConfig,v=m.profileConfig,h=u.default.returnTipOrder(),_=u.default.returnTipList(),b=u.default.returnSuppressedArray(),E=[],y=[],w=function(e){return d.default.searchInArray(y,e,"name")},R=function(){E=[],y=[],d.default._manageSuppressed(h,E,_,b),d.default._updateObjectList(E,_,y)},A={init:function(){},onLoadPublication:function(e){if(m.helpEnabled&&e){var t=y[w("readingOptions")].device;t.desktop.arrow.x-=68,t.desktop.panel.x-=68,t.tablet.arrow.x+=68,t.tablet.panel.x+=68}},renderMobileWidget:function(){if(m.helpEnabled)return R(),{tips:y}},renderDesktopWidget:function(){m.helpEnabled&&(R(),$("#app-container").after((0,p.default)({strings:s.default,tips:y,FAQLink:A.getFAQLink(l.default.customConfig.faqLinkData)})),function(){var e=Object.keys(m.switchFormats.available).length;if(!v.switchFormatsSuppressed&&e>1){var t=y[w("formats")].device;Object.keys(t).map((function(e){var n=t[e];n.target.element=".navbar-switch-formats",n.arrow.x=n.arrow.x+6,n.panel.x=n.panel.x+6}))}if(!v.linksSuppressed){var n=$(".l-panel--button-container button").length;n<5&&(y[w("linking")].device.desktop.panel.y+=42*(n-2))}if($(".save-offline-navbar").length>0){var a=y[w("saveOffline")].device;Object.keys(a).map((function(e){var t=a[e];t.target.element=".save-offline-navbar .offline",t.target.parentElement=".save-offline-navbar .navbarButton",t.arrow.x=-20,t.arrow.y=24,t.panel.x=-300,t.panel.y=-8})),y[w("saveOffline")].tipTarget=".save-offline-navbar"}}(),$(document).on("click",".startTour",o.debounce((function(){f.default.trigger(f.default.eventTypes.START_TOUR,{customProperties:{eventTime:Date.now()}}),A.closeHelpGuide(),c.default.tour.start(y,void 0)}))),$(document).on("click",".pauseTour, .closeTipGuide",o.debounce((function(){A.closeHelpGuide(),c.default.tour.pause()}))),$(document).on("click",".tourTip",o.debounce((function(){A.closeHelpGuide(),c.default.tour.start(y,$(this).data("tip"))}))),$(document).on("click",".closeHelpGuide",A.closeHelpGuide),$(document).on("click","#helpGuideTrigger",c.default.removeTipElements),$(document).on("click",".helpGuide .toggle-submenu",(function(){var e=42*y.length+75+79;$(this).parents(".drawerMenu").css("height","auto"),$(this).parents(".drawerMenu.submenu-visible").css("height",e+"px")})),$(window).resize((function(){A.closeHelpGuide(),$(".tip-overlay").isVisible()&&c.default.tour.pause()})))},closeHelpGuide:function(){$('#helpGuideTrigger[aria-expanded="true"]').trigger("click")},getFAQLink:function(e){var t={enabled:e.enabled,label:"Check the FAQ",url:e.url,title:""};return e.label&&(t.label=e.label),t.label.length>=26&&(t.title=t.label,t.label=t.label.substring(0,26)+"..."),t}},C=A;t.default=C}.apply(t,a))||(e.exports=i)},33652:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(39968),n(32514),n(91389),n(76340),n(29455)],void 0===(i=function(e,n,a,i,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),r=l(r),s=l(s);var u=n.default.customConfig,d={device:{},settings:{},init:function(){EREADER.utils.isTablet()||EREADER.utils.isMobile()||u.profileConfig.notesSuppressed||!u.annotationsConfig.enabled||!u.isScitrusHelpGuideEnabled||s.default.get("isAnnotationTipDisplayedBefore",(function(e){e||(d.create(),d.actions())}))},actions:function(){$(document).on("click",".closeOneTimeTour",o.debounce((function(){d.remove(!0)}))),$(document).on("click",".openLeftPanel",o.debounce((function(){$('[data-trigger="#notes"]').trigger("click")}))),$(document).on("click","#helpGuideTrigger",(function(e){d.remove()})),$(document).on("click",".l-panel--button-container [data-trigger]",(function(e){d.remove("#notes"===$(e.currentTarget).attr("data-trigger"))})),$(window).resize((function(){d.remove()}))},create:function(){var e=a.default.returnOneTimeItem();d.device=e.device.desktop,d.settings={tour:e,target:e.target,arrow:d.device.arrow.position},d.render()},render:function(){var e=$(d.device.target.element);$(d.settings.target||"#app-container").before((0,r.default)(d.settings)),i.default.position(e,d.device.panel,d.device.arrow),$('[data-trigger="#notes"]').addClass("tour-active")},remove:function(e){var t=$(".one-time-tour");0!==t.length&&(t.remove(),$('[data-trigger="#notes"]').removeClass("tour-active"),e&&s.default.put("isAnnotationTipDisplayedBefore",!0))}},f=d;t.default=f}.apply(t,a))||(e.exports=i)},91389:function(e,t,n){var a,i;n(69070),a=[t,n(68309),n(3843),n(83710),n(41539),n(88674),n(32564),n(85626),n(65714),n(34707),n(91755)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,l=c(l),u=c(u),d=c(d),f=c(f);var p={tour:{start:function(e,t){var n=t||"details",a=u.default.searchInArray(e,n,"name"),i=e.length,o=EREADER.utils.isTablet()?e[a].device.tablet:e[a].device.desktop;p.removeTipElements();var r={strings:l.default,totalTips:i,currentTip:a+1,tip:e[a],arrow:o.arrow.position};a+1<i&&$.extend(!0,r,{nextTip:e[a+1].name}),p.renderTip(r,o)},pause:function(){p.closeOtherTriggeredElements(),p.removeTipElements()}},renderTip:function(e,t){d.default.trigger(d.default.eventTypes.TOUR_TIP,{customProperties:{eventTime:Date.now()}});var n=$(t.target.element),a=$(e.tip.tipTarget||"#app-container"),i=t.target.parentElement?$(t.target.parentElement):$(t.target.element);function o(e){return new Promise((function(t){setTimeout(t,e)}))}p.closeOtherTriggeredElements(i),(t.target.trigger?(i.trigger("click").blur(),n[0].scrollIntoView(!0),o(400)):o(100)).then((function(){a.before((0,f.default)(e)),p.position(n,t.panel,t.arrow)}))},position:function(e,t,n){var a=e.offset(),i=$(".guidedTip"),o=$(".tipArrow");i[0].style.left=a.left+t.x+"px",i[0].style.top=a.top+t.y+"px",o[0].style.left=a.left+n.x+"px",o[0].style.top=a.top+n.y+"px"},closeOtherTriggeredElements:function(e){var t=$("body").hasClass("info-visible");void 0!==e?!e.parents("#reader-left-panel").length&&t&&$("#leftPanelbtn").trigger("click"):t&&$("#leftPanelbtn").trigger("click");$('#readingOptionsBtn[aria-expanded="true"]').trigger("click"),$('#settings_button[aria-expanded="true"]').trigger("click"),$('#save-offline-button[aria-expanded="true"]').trigger("click")},removeTipElements:function(){var e=$(".tip-container");0!==e.length&&e.remove()}},g=p;t.default=g}.apply(t,a))||(e.exports=i)},21669:function(e,t,n){var a,i;n(69070),a=[t,n(32564),n(10366),n(33652),n(7475)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=r(a),i=r(i),o=r(o);var s={init:function(){EREADER.on(a.default.LOAD_PROGRESS,s.progress),EREADER.on(a.default.INITIAL_LOAD_COMPLETED,s.completed),$("#statusHeading").html("Preparing publication")},progress:function(e,t){!isNaN(e)&&e&&(t||100!==e||(e=99),$(".coffee")[0].style.transform="translate(0,"+(100-e)+"%)")},completed:function(){EREADER.off(a.default.LOAD_PROGRESS,s.progress),EREADER.off(a.default.INITIAL_LOAD_COMPLETED,s.completed),s.progress(100,!0);var e=$(".skeleton");setTimeout((function(){i.default.init(),o.default.init(),e.removeClass("skeleton"),$(".cup-container .cup").fadeOut(300),$(".cup-container").fadeOut(500,"linear",(function(){this.remove(),$("#statusHeading").html("Publication loaded")}))}),0)}},l=s;t.default=l}.apply(t,a))||(e.exports=i)},23100:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(32564),n(24812),n(85626),n(39968),n(43397)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=u(r),s=u(s),l=u(l);var d,f=function(){var e=$("#"+p.popupId).closest(".popup_wrapper"),t=$("#"+p.overlay);e.remove(),0!==t.length&&t.remove()},c={position:"popup",autoFade:!1,autoReload:!1,waitToFade:4e3,customClasses:"",appendTarget:"",preset:"",hasIcon:!1,icon:"",iconClass:"",closeBtn:!0,closeBtnClass:"close",closeSpeed:"slow",escBtn:!0,primaryBtn:!1,primaryBtnElement:"button",primaryBtnHref:"",primaryBtnClasses:"",primaryBtnText:r.default.generic_gotIt,secondaryBtn:!1,secondaryBtnElement:"button",secondaryBtnClasses:"js__close",secondaryBtnText:r.default.generic_cancel,hasOverlay:!1,overlayClick:!0},p={popupId:l.default.alertpopups_info.alert_id,overlay:l.default.alertpopups_info.overlay_id,contentSection:l.default.alertpopups_info.alert_content,contentText:l.default.alertpopups_info.contentText,buttonSection:l.default.alertpopups_info.alert_buttons,closeBtnClass:l.default.alertpopups_info.close_btn_classes,goTolibrary:l.default.alertpopups_info.goTo_library,libraryUrl:s.default.customConfig.libraryPath},g={},m="",v="",h=function(e){"top"===g.position&&(void 0===e.autoFade&&(g.autoFade=!0),void 0===e.closeBtn&&(g.closeBtn=!1)),"toast"===g.position&&(void 0===e.autoFade&&(g.autoFade=!0,g.autoReload=!1,g.escBtn=!1),g.closeBtn=!1,g.hasOverlay=!1),"form"!==g.position&&"full"!==g.position||(g.escBtn=!1,g.closeBtn=!1,g.hasOverlay=!1),"access-tip"===g.position&&(g.closeBtn=!1),""!==g.icon&&(g.hasIcon=!0),""===g.iconClass&&(g.iconClass="material-icons"),""===g.appendTarget&&(g.appendTarget=$("body"))},_=function(e){var t=e.preset,n=e.icon,a=e.position;g.hasIcon=!0,void 0===n&&("fail"===t&&(g.icon="toast"===a||"form"===a?"cancel":"highlight_off"),"success"===t&&(g.icon="toast"===a||"form"===a?"check_circle":"check_circle_outline"),"info"===t&&(g.icon="toast"===a||"form"===a?"error":"error_outline"),"sorry"===t&&(g.icon="sentiment_very_dissatisfied")),g.customClasses+=" "+t},b=function(){var e="popup_container ";return e+=g.customClasses,e+=" "+g.position},E=function(){var e='<div class="flex-container">';return g.hasIcon&&(e+='<i class="hasIcon icon '+g.iconClass+'">'+g.icon+"</i>"),e+=v?"<div class="+p.contentText+">"+m+v+"</div></div>":"<div class="+p.contentText+">"+m+"</div></div>","<div class="+p.contentSection+">"+e+"</div>"},y=function(){var e="";return g.closeBtn&&(e+='<button class="'+p.closeBtnClass+'">close</button>'),(g.primaryBtn||g.secondaryBtn)&&(e+="<div class="+p.buttonSection+">",g.primaryBtn&&(e+="<"+g.primaryBtnElement,""!==g.primaryBtnHref&&(e+=' href="'+g.primaryBtnHref+'"',e+='target="_blank"'),e+=' class="primary btn--cta__light '+g.primaryBtnClasses+'">'+g.primaryBtnText+"</"+g.primaryBtnElement+">"),g.secondaryBtn&&(e+="<"+g.secondaryBtnElement+' class="secondary btn '+g.secondaryBtnClasses+'">'+g.secondaryBtnText+"</"+g.secondaryBtnElement+">"),e+="</div>"),e},w=function(e){if(clearTimeout(d),g.autoReload)window.setTimeout((function(){window.location.reload(!0)}),g.waitToFade);else if(g.autoFade)d=window.setTimeout((function(){R(e)}),g.waitToFade);else{var t=e.find(".js__close");g.overlayClick&&(t=e.find(".js__close, #"+p.overlay)),t.on("click",(function(){R(e)}))}$(document).bind("keyup.popup",(function(t){Keyboard.comparePressedKey(t,["Escape"])&&g.escBtn&&R(e)}))},R=function(e){var t;(t=e&&e.length?e:$("#"+p.popupId).closest(".popup_wrapper")).remove(),0!==t.length&&t.fadeToggle(g.closeSpeed,(function(){t.remove(),"undefined"!=typeof EREADER&&EREADER.utils.scrolledContentFocus()}));var n=$("#"+p.overlay);0!==n.length&&"dialog"===t.attr("role")&&n.fadeOut(g.closeSpeed,(function(){n.remove(),"undefined"!=typeof EREADER&&EREADER.utils.scrolledContentFocus()})),"alert"===t.attr("role")&&clearTimeout(d),$(document).unbind("keyup.popup")},A={popup:function(e,t){for(var n in m=e,v=t.button,c)void 0!==t?(g[n]=t[n],void 0===t[n]?g[n]=c[n]:g[n]=t[n]):g[n]=c[n];h(t),""!==g.preset&&_(t);var a=$("#"+p.popupId);if(a.length&&(a.hasClass(t.role)||a.attr("role")===t.role))if("toast"===g.position)R();else{if("access-tip"===t.role&&g.appendTarget.find(".popup_wrapper").length)return void f();f()}var i=g.appendTarget;if("popup"===g.position||g.hasOverlay){var o='<div id="'+p.overlay+'"></div>';i.prepend(o)}var r='<div class="popup_wrapper"><div tabindex="0" id="'+p.popupId+'" class="'+b()+'">'+E()+y()+"</div></div>",s=$(r),l=s[0].querySelector(".popupDescription")||s[0].querySelector(".text");if(s.attr("role",t.role),s.attr("aria-label",l.textContent),i.prepend(s),s[0].focus(),s.find("."+p.buttonSection).length>0&&($("#"+p.popupId).addClass("hasButtons"),"toast"===g.position)){var u=$("#"+p.popupId),d=u.find("."+p.buttonSection),A=u.find(" ."+p.contentSection);d.appendTo(A)}w(s)},removePopup:f};t.default=A}.apply(t,a))||(e.exports=i)},23069:function(e,t,n){var a,i;n(69070),a=[t,n(32564),n(74916),n(15306),n(39968),n(85626),n(23100),n(23026),n(4646),n(21555)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=f(o),r=f(r),s=f(s),l=f(l),u=f(u),d=f(d);var c={title:{"-9":r.default.fullpage_9_title,401:r.default.fullpage_401_title,404:r.default.fullpage_404_title,503:r.default.fullpage_503_title,GENERIC:r.default.fullpage_generic_title,LINK_INVALID:r.default.fullpage_link_invalid_title,LINK_SUSPENDED:r.default.fullpage_link_suspended_title,LINK_TERMINATED:r.default.fullpage_link_terminated_title,OFFLINE_UNAVAILABLE:r.default.fullpage_offline_unavailable,PUBLICATION_NOT_OFFLINE:r.default.fullpage_not_offline,CANCEL:"",CONNECTION_ERROR:"",GENERIC_ALTER:"",OFFLINE:"",OVER_QUOTA:"",PERMISSIONS_DEPLETED:"",SERVER_UNAVAILABLE:"",SERVICE_UNAVAILABLE:"",SHARE_PREVIEW:"",SORRY:"",SUCCESS:"",TEMPORARY_ERROR:"",UNSUPPORTED:"",USER_UNAUTHORIZED:"",ACCESS_UNAUTHORIZED:r.default.viewMode_expired_title,CONFIRMATION:"<Action>?",TERMS:"<Feature name>",TERMS_NEW_TAB:"<Feature name>",TEMPORARY_ERROR_ALTER:r.default.permissions_retry_title,SERIOUS_ERROR:r.default.permissions_refresh_title,VIEWING_MODE_REVIEW:"",VIEWING_MODE_RENTAL:"",VIEWING_MODE_SHARED:""},text:{"-9":r.default.fullpage_9_text,401:r.default.fullpage_401_text,404:r.default.fullpage_404_text,503:r.default.fullpage_503_text,GENERIC:r.default.fullpage_generic_text,LINK_INVALID:r.default.fullpage_link_invalid_text,LINK_SUSPENDED:r.default.fullpage_link_suspended_text,LINK_TERMINATED:r.default.fullpage_link_terminated_text,OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"<x> has been canceled.",CONNECTION_ERROR:"<action> was interrupted due to a connection error.",GENERIC_ALTER:"",OFFLINE:r.default.offlineStatus,OVER_QUOTA:r.default.savingOffline_over_quota,PERMISSIONS_DEPLETED:"Your <span>X</span> permits have depleted. <span>Y</span>.",SERVER_UNAVAILABLE:r.default.server_unavailable,SERVICE_UNAVAILABLE:r.default.fullpage_503_text,SHARE_PREVIEW:r.default.share_preview,SORRY:r.default.generic_sorry_message,SUCCESS:"<Description of the action that was just performed>",TEMPORARY_ERROR:r.default.temporary_error,UNSUPPORTED:"<span>X</span> is not supported by your browser.",USER_UNAUTHORIZED:"You do not have the required license. The publication cannot be <span>X</span>.",SHARING_DISABLED:"Sharing access to publications is not currently enabled.",FREE_ACCESS:"You do not have permission to <span>X</span> this publication<span>Y</span>. ",FREE_ACCESS_TIP:"You do not have permission to <span>X</span> this publication<span>Y</span>.",SHARING_UNAVAILABLE:"The publication is not available for sharing.",ACCESS_UNAUTHORIZED:r.default.viewMode_expired_text,CONFIRMATION:"<Explanation of the consequences of the action>",TERMS:r.default.terms_and_conditions_label,TERMS_NEW_TAB:r.default.terms_and_conditions_label,TEMPORARY_ERROR_ALTER:r.default.permissions_retry_text,SERIOUS_ERROR:r.default.permissions_refresh_text,VIEWING_MODE_REVIEW:r.default.viewMode_preview,VIEWING_MODE_RENTAL:r.default.viewMode_rental,VIEWING_MODE_SHARED:r.default.sharedAccess_default_sponsor_message},icon:{"-9":"wifi_off",401:"sentiment_very_dissatisfied",404:"face",503:"ev_station",GENERIC:"error_outline",LINK_INVALID:"local_florist",LINK_SUSPENDED:"query_builder",LINK_TERMINATED:"face",OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"info",CONNECTION_ERROR:"cancel",GENERIC_ALTER:"",OFFLINE:"info",OVER_QUOTA:"sentiment_very_dissatisfied",PERMISSIONS_DEPLETED:"sentiment_very_dissatisfied",SERVER_UNAVAILABLE:"sentiment_very_dissatisfied",SERVICE_UNAVAILABLE:"info",SHARE_PREVIEW:"info",SORRY:"sentiment_very_dissatisfied",SUCCESS:"check_circle",TEMPORARY_ERROR:"cancel",UNSUPPORTED:"sentiment_very_dissatisfied",USER_UNAUTHORIZED:"sentiment_very_dissatisfied",SHARING_DISABLED:"sentiment_very_dissatisfied",FREE_ACCESS:"",SHARING_UNAVAILABLE:"sentiment_very_dissatisfied",ACCESS_UNAUTHORIZED:"query_builder",CONFIRMATION:"<feature icon> or info",TERMS:"<feature icon>",TERMS_NEW_TAB:"<feature icon>",TEMPORARY_ERROR_ALTER:"info",SERIOUS_ERROR:"sentiment_very_dissatisfied",VIEWING_MODE_REVIEW:"query_builder",VIEWING_MODE_RENTAL:"query_builder",VIEWING_MODE_SHARED:"share"},presentation:{"-9":"full",401:"full",404:"full",503:"full",GENERIC:"full",LINK_INVALID:"full",LINK_SUSPENDED:"full",LINK_TERMINATED:"full",OFFLINE_UNAVAILABLE:"full",PUBLICATION_NOT_OFFLINE:"full",CANCEL:"toast",CONNECTION_ERROR:"toast",GENERIC_ALTER:"toast",OFFLINE:"toast",OVER_QUOTA:"toast",PERMISSIONS_DEPLETED:"toast",SERVER_UNAVAILABLE:"toast",SERVICE_UNAVAILABLE:"toast",SHARE_PREVIEW:"toast",SORRY:"toast",SUCCESS:"toast",TEMPORARY_ERROR:"toast",UNSUPPORTED:"toast",USER_UNAUTHORIZED:"toast",SHARING_DISABLED:"toast",FREE_ACCESS:"toast",FREE_ACCESS_TIP:"access-tip",SHARING_UNAVAILABLE:"toast",ACCESS_UNAUTHORIZED:"modal",CONFIRMATION:"modal",TERMS:"modal",TERMS_NEW_TAB:"modal",TEMPORARY_ERROR_ALTER:"modal",SERIOUS_ERROR:"modal",VIEWING_MODE_REVIEW:"top",VIEWING_MODE_RENTAL:"top",VIEWING_MODE_SHARED:"top"},preset:{"-9":"",401:"",404:"",503:"",GENERIC:"",LINK_INVALID:"",LINK_SUSPENDED:"",LINK_TERMINATED:"",OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"",CONNECTION_ERROR:"",GENERIC_ALTER:"",OFFLINE:"info",OVER_QUOTA:"sorry",PERMISSIONS_DEPLETED:"sorry",SERVER_UNAVAILABLE:"fail",SERVICE_UNAVAILABLE:"",SHARE_PREVIEW:"info",SORRY:"sorry",SUCCESS:"success",TEMPORARY_ERROR:"fail",UNSUPPORTED:"sorry",SHARING_DISABLED:"sorry",FREE_ACCESS:"",SHARING_UNAVAILABLE:"sorry",USER_UNAUTHORIZED:"sorry",ACCESS_UNAUTHORIZED:"sorry",CONFIRMATION:"",TERMS:"",TERMS_NEW_TAB:"",TEMPORARY_ERROR_ALTER:"info",SERIOUS_ERROR:"info",VIEWING_MODE_REVIEW:"",VIEWING_MODE_RENTAL:"",VIEWING_MODE_SHARED:""},extra_buttons:{"-9":"",401:"",404:"",503:"",GENERIC:"",LINK_INVALID:"Link to homepage",LINK_SUSPENDED:"Link to homepage",LINK_TERMINATED:"",OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"",CONNECTION_ERROR:"",GENERIC_ALTER:"",OFFLINE:"",OVER_QUOTA:"",PERMISSIONS_DEPLETED:"",SERVER_UNAVAILABLE:"",SERVICE_UNAVAILABLE:"",SHARE_PREVIEW:"",SORRY:"",SUCCESS:"",TEMPORARY_ERROR:"",UNSUPPORTED:"",USER_UNAUTHORIZED:"",FREE_ACCESS:"<a href='<span>url</span>' class='text-link'> Get Full Access </a>",ACCESS_UNAUTHORIZED:"(No buttons at all)",CONFIRMATION:"Yes, <download>",TERMS:"I agree, Continue",TERMS_NEW_TAB:"I agree, Continue",TEMPORARY_ERROR_ALTER:"",SERIOUS_ERROR:"",VIEWING_MODE_REVIEW:"Learn more (Optional)",VIEWING_MODE_RENTAL:"Learn more (Optional)",VIEWING_MODE_SHARED:"Learn more (Optional)"},customClasses:{FREE_ACCESS:"toast__light"}},p={popup:function(e,t){var n={primaryBtn:!0,primaryBtnClasses:"js__close",primaryBtnText:r.default.generic_ok},a={hasIcon:""!==c.icon[e],icon:c.icon[e],messageType:c.preset[e],title:c.title[e].replace("<span>X</span>",t),description:c.text[e]},i=(0,u.default)({settings:a});s.default.popup(i,n)},customPopup:function(e,t){e.role="toast"===e.position?"alert":"dialog",s.default.popup(t,e)},toast:function(e,t,n,a,i){var o={position:c.presentation[e],icon:c.icon[e],preset:c.preset[e],customClasses:c.customClasses[e],role:"alert"};i&&i.isButtonVisible&&(o.button=c.extra_buttons[e].replace("<span>url</span>",i.accessUrl));var r=a||c.text[e];r=r.replace("<span>X</span>",t).replace("<span>Y</span>",n),s.default.popup(r,o)},tip:function(e,t,n,a){var i={position:c.presentation[e],appendTarget:$(a.appendTarget).closest(".access-tip__container"),role:"access-tip",button:c.extra_buttons[e]},o={message:c.text[e].replace("<span>X</span>",t).replace("<span>Y</span>",n),accessUrl:a.accessUrl,isFreeToRead:a.freeToRead};a.isButtonVisible&&(o.isButtonVisible=!0);var l='<div class="tipArrow '+a.arrowClasses+'"></div><div class="access-popup">'+(0,d.default)({data:o,strings:r.default})+"</div>";s.default.popup(l,i)},fullpage:function(e,t,n){var a={position:c.presentation[e],autoReload:t&&t.autoreload||!1},i={hasIcon:"true",icon:c.icon[e],title:c.title[e],description:c.text[e].replace("<span>X</span>",n)},r=(0,l.default)({settings:i});s.default.popup(r,a),function(e){e&&e.goToLibrary&&window.setTimeout((function(){window.location.assign(o.default.customConfig.libraryPath)}),4e3),$(".page-error-reload-the-page").off("click").on("click",(function(e){e.preventDefault(),window.location.reload(!0)})),$(".page-error-return-to-site").off("click").on("click",(function(e){e.preventDefault();var t=o.default.customConfig.siteUrl;t&&window.location.assign(t)})),$(".page-error-go-back").off("click").on("click",(function(e){e.preventDefault(),history.back()}))}(t)},closeAlert:function(){s.default.removePopup()}};t.default=p}.apply(t,a))||(e.exports=i)},82710:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(32514),n(99004),n(72024),n(27437),n(38031),n(73383),n(43397),n(66877),n(62811),n(13765),n(42481)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g){"use strict";function m(e){return e&&e.__esModule?e:{default:e}}var v,h;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=m(i),o=m(o),r=m(r),s=m(s),l=m(l),u=m(u),d=m(d),f=m(f),c=m(c),p=m(p),g=m(g);var _=function(){$(d.default.navbar_info.id).find("button").not(".figure__image-btn").each((function(){var e=$(this);e.attr("type")||b(e)}))},b=function(e){e.addClass("btn");var t=e.attr("title"),n="";void 0!==t&&(n=t.substring($.inArray("[",t)+1,$.inArray("]",t))),e.is("button")&&e.attr("type","button"),e.attr({tabindex:"0",type:"button",accesskey:n}),e.find(".icon").each((function(){$(this).attr("aria-hidden","true")}))},E=function(){_(),$(d.default.navbar_info.id+" "+d.default.navbar_info.hidden).each((function(){var e=$(this);e.addClass("d-none"),e.attr({tabindex:"-1","aria-hidden":"true"})}))},y=function(){EREADER.utils.isFullScreen()?document.body.classList.add(d.default.fullscreen_mode):document.body.classList.remove(d.default.fullscreen_mode)},w=function(){$(d.default.var_container).hasClass(d.default.left_panel_info.panel_class)&&c.default.reset()},R={init:function(){R.repeatedInit(),c.default.init(),f.default.init(),p.default.init(),r.default.init(),u.default.onFullscreenChange(y)},repeatedInit:function(e){p.default.repeatedInit(e),s.default.init(),o.default.init()},loadPanel:function(e){var t;$(d.default.navbar_info.id).empty(),$(d.default.navbar_info.id).attr("aria-label",e),R.renderTemplate(),c.default.loadPanel(),p.default.loadPanel(),E(),l.default.fetchPermissions().done((function(e){t=e,l.default.enableControls(e)})),$(window).on("resize.navbar",(function(){if((v=[EREADER.utils.isMobile(),EREADER.utils.isTablet()])[0]===h[0]){if(v[1]===h[1])return;return h=v,void w()}h=v,w(),p.default.renderTemplate(!0),E(),R.repeatedInit(!0),l.default.enableControls(t)}))},afterPublicationLoad:function(){v=[EREADER.utils.isMobile(),EREADER.utils.isTablet()],h=v,c.default.afterPublicationLoad(),p.default.afterPublicationLoad(),i.default.afterPublicationLoad(),_()},update:function(){f.default.update(),c.default.update(),r.default.progress()},renderTemplate:function(){$(d.default.navbar_info.id).empty(),$(d.default.navbar_info.id).append(g.default),c.default.renderTemplate(),f.default.renderTemplate(),p.default.renderTemplate()}},A=R;t.default=A}.apply(t,a))||(e.exports=i)},66877:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(32514),n(32153),n(65714),n(43397),n(32536)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=u(i),o=u(o),r=u(r),s=u(s),l=u(l);var d=i.default.returnActionOrder().center,f=i.default.returnActionList(),c=i.default.returnSuppressedArray(),p={init:function(){o.default.init()},update:function(){o.default.updateWidgetDisplay()},renderTemplate:function(){var e=[],t=[];r.default._manageSuppressed(d,e,f,c),r.default._updateObjectList(e,f,t),$(s.default.navbar_info.id).find(s.default.navbar_info.center).replaceWith((0,l.default)({centerPanel:t}))}};t.default=p}.apply(t,a))||(e.exports=i)},62811:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(32514),n(60433),n(46925),n(87462),n(72638),n(65714),n(43397),n(12325)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=c(i),o=c(o),r=c(r),s=c(s),l=c(l),u=c(u),d=c(d),f=c(f);var p=i.default.returnActionOrder().left,g=i.default.returnActionList(),m=i.default.returnSuppressedArray(),v={init:function(){r.default.initPanel()},loadPanel:function(){r.default.loadPanel()},renderTemplate:function(){var e=[],t=[];u.default._manageSuppressed(p,e,g,m),u.default._updateObjectList(e,g,t),t.unshift(i.default.returnLeftMenu()),$(d.default.navbar_info.id).find(d.default.navbar_info.left).replaceWith((0,f.default)({leftPanel:t}))},afterPublicationLoad:function(){l.default.init(),l.default.onShow(),s.default.init(),o.default.init()},update:function(){r.default.updatePanel()},reset:function(){r.default.closePanel(!0)}};t.default=v}.apply(t,a))||(e.exports=i)},13765:function(e,t,n){var a,i;n(69070),a=[t,n(40561),n(57327),n(41539),n(68309),n(47941),n(69826),n(85626),n(39968),n(88995),n(32514),n(15510),n(83475),n(58951),n(1809),n(61593),n(50615),n(84767),n(70828),n(16414),n(65714),n(43397),n(16709),n(90793),n(73461),n(3071),n(89321),n(58150),n(72487),n(41930),n(21555),n(38031)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y,w,R,A,C,T,S,O,D,P,I,L){"use strict";function k(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,l=k(l),u=k(u),d=k(d),f=k(f),c=k(c),p=k(p),g=k(g),m=k(m),v=k(v),h=k(h),_=k(_),b=k(b),E=k(E),y=k(y),w=k(w),R=k(R),A=k(A),C=k(C),T=k(T),S=k(S),O=k(O),D=k(D),P=k(P),I=k(I),L=k(L);var x=u.default.customConfig,M=[],N=[],F=[],U={left:[],center:[],right:[]},B=f.default.returnSuppressedArray(),j=f.default.returnActionList(),V=f.default.returnActionOrder(),H=function(e,t,n){y.default.pushInToArray(U[e],j,y.default.searchInArray(j,n,"name"),t)},K=function(e){var t=y.default.searchInArray(e,"help","name");if(void 0!==t){var n={strings:l.default,FAQLink:c.default.getFAQLink(u.default.customConfig.faqLinkData)};$.extend(!0,n,c.default.renderMobileWidget(B)),e[t].templateMore=(0,O.default)(n)}var a=f.default.returnMoreMenu(e);return 1===N.length&&(a=N[0]),a},W=!1,z={init:function(){p.default.initPanel(),h.default.init(),A.default.init(),_.default.init(),E.default.init(),c.default.init(),b.default.dropdownHandlers()},repeatedInit:function(e){v.default.init(x.switchFormats,x.doi),e&&E.default.repeatedInit(),R.default.init()},loadPanel:function(){D.default.setup(),p.default.loadPanel(),0===$(".helpGuide.onboarding").length&&c.default.renderDesktopWidget(B),x.sharedAccessConfig.isShared&&g.default.init(),x.freeToReadConfig.isFreeToRead&&m.default.init()},afterPublicationLoad:function(){var e=d.default.isFixedLayout;R.default.init(),c.default.onLoadPublication(e)},renderTemplate:function(e){var t,n,a,i,o,r,s;W||(t=j[y.default.searchInArray(j,"download","name")],n=L.default.accessPermissionConfig(),a=(0,C.default)({ariaLabel:"Download "+d.default.download_files_type+"  "+d.default.download_files_size,classlist:"navbar-download not_resolved_yet btn btn--cta_roundedColored",href:d.default.download_files_url,target:"_blank",content:'<span class="icon material-icons">get_app</span>',otherAttributes:"data-single-download="+d.default.download_single+" data-download-files-key="+d.default.download_files_key,title:l.default.download+" ["+Keyboard.accesskeys.DownloadList+"]",tooltip:"bottom",accessKey:Keyboard.accesskeys.DownloadList}),i=(0,P.default)({classList:"navbar-download not_resolved_yet",dataPersist:"false",trigger:{ariaLabel:"Download document",classList:"btn--cta_roundedColored",icon:'<span class="icon material-icons">get_app</span>',title:l.default.download+" ["+Keyboard.accesskeys.DownloadList+"]",tooltip:"bottom"},content:{classList:"dropdown-list medium wider",content:(0,I.default)({strings:l.default,data:{title:l.default.download,message:l.default.download_no_access_message,accessUrl:n.accessUrl,isButtonVisible:n.isButtonVisible,isFreeToRead:n.freeToRead}})}}),o=n.isNoAccess?i:a,d.default.download_single&&(t.template=o,t.templateMore=(0,T.default)({classList:"view_in_website",content:(0,C.default)({ariaLabel:"Download "+d.default.download_files_type+"  "+d.default.download_files_size,classlist:"download drawerMenu--trigger list-button not_resolved_yet",href:d.default.download_files_url,target:"_blank",content:'<span class="icon material-icons">get_app</span><span class="tab-text"> '+l.default.download_button_text+"</span>",otherAttributes:"data-single-download="+d.default.download_single+" data-download-files-key="+d.default.download_files_key})})),W=!0),M=[],N=[],F=[],U={left:[],center:[],right:[]},r=y.default.searchInArray(B,"download")>=0,s=y.default.searchInArray(V.right,"download")>=0,r&&s&&(V.right.splice(0,1,"user"),V.right.pop()),y.default._manageSuppressed(V.right,M,j,B),y.default._manageSuppressed(V.more,N,j,B),y.default._manageSuppressed(["narrator","zoom"],F,j,B),function(){var e=EREADER.utils.isMobile(),t=e?N.length:M.length;if(H("left",F[0]),H("center",void 0,"search"),e)H("right",K(N));else{if(EREADER.utils.isMobileHeight()){var n=N.filter((function(e){return"help"===e.name}))[0];n&&M.splice(M.length-1,0,n)}t>3?(H("right",M[0]),H("center",M[1]),M.splice(0,2),H("center",K(M))):(H("right",M[0]),H("center",M[1]),H("center",M[2]))}}();var u="true"===$(".search > .search-trigger").attr("aria-expanded");if(e&&u)for(var f=Object.keys(U),c=0;c<f.length;c++){for(var p=U[f[c]],g=!1,m=0;m<p.length;m++)if(p[m]&&"search"===p[m].name){p[m].template=$(".search")[0].outerHTML,g=!0;break}if(g)break}$(w.default.navbar_info.id).find(w.default.navbar_info.right).replaceWith((0,S.default)({rightPanel:U}));var v=$(".center #user_button span:not(.icon)");v.length>0&&v.text(v[0].innerText[0])},reset:function(){p.default.closePanel(!0),$("body").removeClass("mediaOverlay on")}};t.default=z}.apply(t,a))||(e.exports=i)},28388:function(e,t,n){var a,i;n(69070),a=[t,n(35666),n(74916),n(23123),n(41539),n(88674),n(39968),n(25644)],i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){d(o,a,i,r,s,"next",e)}function s(e){d(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,s=u(s);var c=(l=u(l)).default.tables.AVAILABLE_CONTENTS_TABLE;function p(){return(p=f(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.add(c,{url:t,doi:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.delete(c,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.get(c,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v,h={url:(v=s.default.customConfig.epubConfig.epubUrl,v.split("?")[0]),doi:window.location.pathname,add:function(){var e=$.Deferred();return function(e,t){return p.apply(this,arguments)}(h.url,h.doi).then((function(){e.resolve()})).catch((function(t){e.reject(t)})),e.promise()},delete:function(){var e=$.Deferred();return function(e){return g.apply(this,arguments)}(h.url).then((function(){e.resolve()})).catch((function(t){e.reject(t)})),e.promise()},get:function(e){var t=$.Deferred();return function(e){return m.apply(this,arguments)}(e).then((function(e){var n=[];e&&(n=e.url?e.url:e),t.resolve(n)})).catch((function(){t.resolve([])})),t.promise()}},_=h;t.default=_}.apply(t,a),void 0===i||(e.exports=i)},60386:function(e,t,n){var a,i;n(69070),a=[t,n(35666),n(26699),n(32023),n(82772),n(40561),n(41539),n(88674),n(39968),n(25644)],i=function(e,n,a,i,o,r,s,l,u,d){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){c(o,a,i,r,s,"next",e)}function s(e){c(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,u=f(u);var g=(d=f(d)).default.tables.FORMATS_TABLE;function m(e,t){return v.apply(this,arguments)}function v(){return(v=p(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.add(g,{formats:t,doi:n||u.default.customConfig.doi});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.delete(g,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.get(g,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b={format:u.default.customConfig.format,doi:u.default.customConfig.doi,addOfflineFormat:function(e,t){var n=e||b.format,a=t||b.doi,i=$.Deferred();return this.getOfflineFormats(a).then((function(e){e.includes(n)?i.resolve():(e.push(n),m(e,t).then((function(){i.resolve()})).catch((function(e){i.reject(e)})))})).catch((function(e){i.reject(e)})),i.promise()},deleteOfflineFormat:function(){var e=$.Deferred();return this.getOfflineFormats(b.doi).then((function(t){if(1===t.length&&t[0]===b.format)(function(e){return h.apply(this,arguments)})(b.doi).then((function(){e.resolve()})).catch((function(t){e.reject(t)}));else{var n=t.indexOf(b.format);n>-1&&t.splice(n,1),m(t).then((function(){e.resolve()})).catch((function(t){e.reject(t)}))}})).catch((function(t){e.reject(t)})),e.promise()},getOfflineFormats:function(e){var t=$.Deferred();return function(e){return _.apply(this,arguments)}(e).then((function(e){var n=[];e&&(n=e.formats?e.formats:e),t.resolve(n)})).catch((function(){t.resolve([])})),t.promise()}},E=b;t.default=E}.apply(t,a),void 0===i||(e.exports=i)},99427:function(e,t,n){var a,i;n(69070),a=[t,n(35666),n(41539),n(88674),n(24221),n(39968)],i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){l(o,a,i,r,s,"next",e)}function s(e){l(o,a,i,r,s,"throw",e)}r(void 0)}))}}var d,f;function c(){return p.apply(this,arguments)}function p(){return(p=u(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.READER_OFFLINE=!1,$('[data-disable-offline="true"]').removeClass("js__disabled"),o.default.contentActions.offlineStorage.onOnline(),!(t=r.default.customConfig.readingProgress)||!t.syncProgress){e.next=10;break}return e.next=7,f.retrieveProgressFromServer();case 7:n=e.sent,a=f.getLocalProgress(),n&&(f.shouldOverrideLocalProgress(n,a)?(i=JSON.parse(n.location),f.updateLocalProgress(i),o.default.navigationActions.openContentByProgressLocation(i.location)):f.syncProgress(a));case 10:d&&o.default.contentActions.handleFailedRequest(d);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){window.READER_OFFLINE=!0,$('[data-disable-offline="true"]').addClass("js__disabled"),o.default.contentActions.offlineStorage.onOffline()}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=s(o),r=s(r);var m={init:function(e){f=e,window.addEventListener("online",c),window.addEventListener("offline",g)},isOffline:function(){return window.READER_OFFLINE},setFailedRequest:function(e){d=e}};t.default=m}.apply(t,a),void 0===i||(e.exports=i)},42105:function(e,t,n){var a,i;n(69070),a=[t,n(32564),n(3843),n(83710),n(85626),n(39968),n(23069),n(43397),n(38031),n(34707),n(4646),n(20178)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Math.round(e/(t+2)*100),a=document.querySelector(".progress-ring__circle"),i=2*a.r.baseVal.value*Math.PI;a.style.strokeDasharray=i+" "+i,a.style.strokeDashoffset=i,a.style.strokeDashoffset=i-n/100*i}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=p(o),r=p(r),s=p(s),l=p(l),u=p(u),d=p(d),f=p(f),c=p(c);var m={clicked:function(){var e=$(l.default.menudrawer_info.offline_btn),t=e.data("inDevice");try{if(c.default.isDeleting())return;if(c.default.isRetrieving())c.default.stopRetrieving();else if(t)m.removeForOfflineReading(e);else if(window.READER_OFFLINE)if(t){window.setTimeout((function(){$(window).trigger(Events.FILE_LOAD_ERROR,{message:"ERROR loading File",status:-9,cause:"deleting content while being offline"})}),4500)}else s.default.toast("OFFLINE",o.default.savingOffline_offline);else{var n=u.default.accessPermissionConfig(e,"left extra-move");!r.default.customConfig.isOfflineSupportedForBrowser||EREADER.utils.isEdgePrivateMode()?s.default.toast("UNSUPPORTED","Offline reading"):n.isNoAccess?EREADER.utils.isMobile()||EREADER.utils.isMobileHeight()?s.default.toast("FREE_ACCESS","save","","",n):s.default.tip("FREE_ACCESS_TIP","save","",n):$(this).attr("internal-error")?s.default.toast("TEMPORARY_ERROR","Saving offline"):$(this).hasClass(l.default.menudrawer_info.disabled)?s.default.toast("OFFLINE",o.default.savingOffline_offline):e.hasClass(l.default.menudrawer_info.not_resolved_yet)?s.default.popup("TEMPORARY_ERROR_ALTER","Saving offline"):e.hasClass(l.default.menudrawer_info.could_not_resolve)?s.default.popup("SERIOUS_ERROR","Saving offline"):e.hasClass(l.default.menudrawer_info.permissionDisabled)?s.default.toast("USER_UNAUTHORIZED","saved"):u.default.UNLIMITED_PERMISSIONS.OFFLINE?m.doSavingOffline(e,u.default.UNLIMITED_USAGE):u.default.fetchPermissions({reqType:u.default.PERMISSION_OFFLINE}).done((function(t){u.default.canUsePermissions(t).done((function(t){m.doSavingOffline(e,t)})).fail((function(t){m.doSavingOffline(e,t.availableUsage),LIT.Reader.LogEnabled&&console.log(t.message)}))})).fail((function(e){s.default.popup("SERIOUS_ERROR","Saving offline"),console.error("Error fetching OFFLINE permission, "+e.message)}))}}catch(e){LIT.Reader.LogEnabled&&console.log("well this isn't good",e)}},reset_status:function(e){e.removeClass("processing success fail add remove blink")},doSavingOffline:function(e,t){t===u.default.PERMISSION_NOT_AVAILABLE?(s.default.toast("USER_UNAUTHORIZED","saved"),$(l.default.menudrawer_info.offline_btn).addClass(l.default.menudrawer_info.permissionDisabled)):t===u.default.NO_USAGE?(s.default.toast("PERMISSIONS_DEPLETED","saving","The publication cannot be saved"),$(l.default.menudrawer_info.offline_btn).addClass(l.default.menudrawer_info.permissionDisabled)):r.default.customConfig.usageRightsEnabled?u.default.consumePermissions({usageType:u.default.PERMISSION_OFFLINE,usageAmount:1}).done((function(t){t.success?(m.keepForOfflineReading(e),LIT.Reader.LogEnabled&&console.log("You have "+t.remainingUsages+" usages left.")):s.default.toast("USER_UNAUTHORIZED","saved")})).fail((function(e){s.default.toast("SERVER_UNAVAILABLE"),console.error(e.message)})):m.keepForOfflineReading(e)},keepForOfflineReading:function(e){var t=$(l.default.menudrawer_info.offline_library),n=e.data("inDevice");t.addClass("processing add"),c.default.save().progress((function(e){g(e.childrenSaved,e.totalChildren),LIT.Reader.LogEnabled&&console.log("keeping offline progress "+e.message)})).done((function(){m.reset_status(t),t.addClass("success blink"),e.data("inDevice",!0);var a=o.default.savingOffline_add_success;n&&(a=o.default.savingOffline_remove_success),s.default.customPopup({position:"toast",preset:"success"},a),$(l.default.menudrawer_info.offline_btn).attr("data-disable-offline",!1)})).fail((function(a){if(a===c.default.CANCEL_RETRIEVAL)n=!n,m.removeForOfflineReading(e,!0,"cancel-retrieval",!0);else if(a===c.default.OUT_OF_MEMORY)s.default.toast("OVER_QUOTA"),n=!n,m.removeForOfflineReading(e,!0);else{m.reset_status(t);var i=o.default.savingOffline_add_error;n&&(i=o.default.savingOffline_remove_error,t.addClass("success")),s.default.customPopup({position:"toast",preset:"fail"},i)}})),d.default.trigger(d.default.eventTypes.SAVE_OFFLINE,{customProperties:{eventTime:Date.now()}})},removeForOfflineReading:function(e,t,n,a){var i=$(l.default.menudrawer_info.offline_library),u=e.data("inDevice");if(i.addClass("processing remove"),a)c.default.remove().progress((function(e){g(e.totalRemaining,e.totalChildren),LIT.Reader.LogEnabled&&console.log("removing offline progress "+e.message)})).done((function(){var a;g(0,100),e.data("inDevice",!1),"cancel-retrieval"===n&&(a=o.default.savingOffline_add_cancel,s.default.customPopup({position:"toast",preset:"info"},o.default.savingOffline_add_cancel)),t||(a=o.default.savingOffline_add_success,u&&(a=o.default.savingOffline_remove_success,window.READER_OFFLINE&&(a=o.default.savingOffline_remove_success_offline)),s.default.customPopup({position:"toast",preset:"success"},a),window.READER_OFFLINE&&setTimeout((function(){window.location.assign(r.default.customConfig.libraryPath)}),4e3)),$(l.default.menudrawer_info.offline_btn).attr("data-disable-offline",!0)})).fail((function(e){m.reset_status(i);var t=o.default.savingOffline_add_error;u&&(t=o.default.savingOffline_remove_error,i.addClass("success")),s.default.customPopup({position:"toast",preset:"fail"},t)})).always((function(){m.reset_status(i)}));else{m.reset_status(i),i.addClass("success");var d=o.default.saving_offline_remove_text;window.READER_OFFLINE&&(d=o.default.saving_offline_remove_text_offline);var p={primaryBtn:!0,primaryBtnClasses:"continueRemoval",primaryBtnText:o.default.saving_offline_remove_button,secondaryBtn:!0},v={hasIcon:"true",icon:"info",messageType:"info",title:o.default.saving_offline_remove_title,description:'<p class="subTitle">'+d+"</p>"},h=(0,f.default)({settings:v});s.default.customPopup(p,h),$(document).one("click",".continueRemoval",(function(a){s.default.closeAlert(),m.reset_status(i),i.addClass("processing"),m.removeForOfflineReading(e,t,n,!0)}))}}},v=m.clicked;t.default=v}.apply(t,a))||(e.exports=i)},20178:function(e,t,n){var a,i;n(69070),a=[t,n(41539),n(88674),n(35666),n(76683),n(24221),n(8008),n(29455),n(4503),n(60386)],i=function(e,n,a,i,o,r,s,l,u,d){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){c(o,a,i,r,s,"next",e)}function s(e){c(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=f(o),r=f(r),s=f(s),l=f(l),u=f(u),d=f(d);var g,m,v,h={NO_SUCH_DATA_ERROR:"cannotLocateData",NO_SUCH_FILE_ERROR:"cannotLocateContentFile",SYSTEM_ERROR:"systemError",CANCEL_RETRIEVAL:"cancelContentRetrieval",OUT_OF_MEMORY:"contentRetrievalOutOfMemory",getMetadata:(v=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.getMetaData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)}),getReferences:(m=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.getReferences();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),remove:function(){var e=$.Deferred();return r.default.contentActions.offlineStorage.remove().progress((function(t){t.totalChildren&&t.hasOwnProperty("totalRemaining")&&e.notify({totalRemaining:t.totalRemaining,totalChildren:t.totalChildren})})).done((function(t){s.default.remove().done((function(){e.resolve(t)})).catch((function(t){e.reject()}))})).fail((function(t){e.reject(t)})),e.promise()},save:function(){var e=$.Deferred();return r.default.contentActions.offlineStorage.save().progress((function(t){t.totalChildren&&t.childrenSaved&&e.notify({childrenSaved:t.childrenSaved,totalChildren:t.totalChildren+Math.round(.1*t.totalChildren)})})).done((function(t){s.default.store().done((function(){e.resolve(t)})).catch((function(t){e.reject()}))})).fail((function(t){e.reject(t)})),e.promise()},isThisAvailableOffline:function(){return r.default.contentActions.offlineStorage.isThisAvailableOffline()},isRetrieving:function(){return r.default.contentActions.offlineStorage.isRetrieving()},isDeleting:function(){return r.default.contentActions.offlineStorage.isDeleting()},stopRetrieving:function(){return r.default.contentActions.offlineStorage.stop()},cloneDataFromOldReader:(g=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.default.get("isOfflineDataCloned",function(){var e=p(regeneratorRuntime.mark((function e(t){var n,a,i,s,f,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=25;break}return e.next=3,r.default.contentActions.offlineStorage.getOldData();case 3:if(!(n=e.sent)||!n.length){e.next=25;break}a=0;case 6:if(!(a<n.length)){e.next=24;break}return i=n[a],s=i.doi,f=i.format,c={sourceFormat:f,title:i.title,rootUrl:i.rootUrl,doi:s},e.next=13,u.default.addWithMetadata(c);case 13:if($.isEmptyObject(i.metadata)){e.next=16;break}return e.next=16,o.default.storeWithMetadata(i.metadata,s);case 16:if($.isEmptyObject(i.references)){e.next=19;break}return e.next=19,o.default.storeWithReferences(i.references,s);case 19:return e.next=21,d.default.addOfflineFormat(f,s);case 21:a++,e.next=6;break;case 24:l.default.put("isOfflineDataCloned",!0);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)})},_=h;t.default=_}.apply(t,a),void 0===i||(e.exports=i)},25644:function(e,t,n){var a,i;n(69070),a=[t,n(41539),n(88674),n(35666),n(28346)],i=function(e,n,a,i,o){"use strict";var r,s;function l(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){l(o,a,i,r,s,"next",e)}function s(e){l(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=(r=o)&&r.__esModule?r:{default:r};var d={METADATA_TABLE:"metadataAttachment",REFERENCES_TABLE:"referencesAttachment",FORMATS_TABLE:"formats",CONTENT_TABLE:"libraryContents",AVAILABLE_CONTENTS_TABLE:"availableContents"},f=[{name:d.METADATA_TABLE,options:{keyPath:"doi",autoIncrement:!1},indexes:[{name:"metadata",keyPath:"doi",unique:!0}]},{name:d.REFERENCES_TABLE,options:{keyPath:"doi",autoIncrement:!1},indexes:[{name:"references",keyPath:"doi",unique:!0}]},{name:d.FORMATS_TABLE,options:{keyPath:"doi",autoIncrement:!1},indexes:[{name:"formats",keyPath:"doi",unique:!0}]},{name:d.AVAILABLE_CONTENTS_TABLE,options:{keyPath:"url",autoIncrement:!1},indexes:[{name:"contentUrl",keyPath:"url",unique:!0}]},{name:d.CONTENT_TABLE,options:{keyPath:"doi",autoIncrement:!1}}];function c(){s||(s=new o.default("sharedOffline",f))}var p,g,m,v,h={tables:d,add:(v=u(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,s.addToDB(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)}),get:(m=u(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,s.getFromDB(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),getAll:(g=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,s.getAllFromDB(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)}),delete:(p=u(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,s.removeFromDB(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},_=h;t.default=_}.apply(t,a),void 0===i||(e.exports=i)},8008:function(e,t,n){var a,i;n(69070),a=[t,n(66992),n(41539),n(88674),n(78783),n(33948),n(76683),n(4503),n(60386),n(28388)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,s=f(s),l=f(l),u=f(u),d=f(d);var c={store:function(){var e=$.Deferred();return Promise.all([s.default.storeMetaData(),s.default.storeReferences(),l.default.add(),u.default.addOfflineFormat(),d.default.add()]).then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()},remove:function(){var e=$.Deferred();return Promise.all([s.default.deleteMetadata(),s.default.deleteReferences(),l.default.remove(),u.default.deleteOfflineFormat(),d.default.delete()]).then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()}};t.default=c}.apply(t,a))||(e.exports=i)},76683:function(e,t,n){var a,i;n(69070),a=[t,n(41539),n(88674),n(35666),n(57365),n(3996),n(39968),n(25644)],i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){d(o,a,i,r,s,"next",e)}function s(e){d(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=u(o),r=u(r),s=u(s);var c,p,g,m,v,h,_,b,E=(l=u(l)).default.tables.METADATA_TABLE,y=l.default.tables.REFERENCES_TABLE,w={storeMetaData:(b=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.Retriever.retrieve().then(function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.add(E,{metadata:t,doi:s.default.customConfig.doi});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)}),storeWithMetadata:(_=f(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.add(E,{metadata:t,doi:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)}),getMetaData:(h=f(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.get(E,t);case 2:return n="string"==typeof(n=(n=e.sent)?n.metadata:n)?JSON.parse(n):n,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),deleteMetadata:(v=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.delete(E,s.default.customConfig.doi);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)}),storeReferences:(m=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.Retriever.retrieve().then(function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.add(y,{references:t,doi:s.default.customConfig.doi});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),storeWithReferences:(g=f(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.add(y,{references:t,doi:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return g.apply(this,arguments)}),getReferences:(p=f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.get(y,s.default.customConfig.doi);case 2:return t="string"==typeof(t=(t=e.sent)?t.references:t)?JSON.parse(t):t,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),deleteReferences:(c=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.delete(y,s.default.customConfig.doi);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},R=w;t.default=R}.apply(t,a),void 0===i||(e.exports=i)},57365:function(e,t,n){var a,i;n(69070),a=[t,n(18730),n(77664),n(83296),n(39968)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={retrieve:function(){var e=$.Deferred();return new n.default.Retriever(n.default.RETRIEVAL_TYPES.JSON).retrieve(o.default.customConfig.metadataUrl).then((function(e){var t=e.data;return t.groupInfo?$.when(t,a.default.inlineDocument(t.groupInfo.abstract),a.default.inlineDocument(t.groupInfo.metadata)):$.when(t,"","")})).then((function(e,t,n){return e.groupInfo&&(t&&(e.groupInfo.abstract=t),n&&(e.groupInfo.metadata=n)),e.itemInfo?$.when(e,a.default.inlineDocument(e.itemInfo.abstract),a.default.inlineDocument(e.itemInfo.metadata)):$.when(e,"","")})).then((function(t,n,a){t.itemInfo&&(n&&(t.itemInfo.abstract=n),a&&(t.itemInfo.metadata=a)),e.resolve(t)})).fail((function(t){e.resolve({msg:"Error getting metadata",error:!0})})),e.promise()}},l={PLACEHOLDER:"<div>Metadata currently unavailable offline</div>",NAME:i.default.attachments.metadataKey,Retriever:s};t.default=l}.apply(t,a))||(e.exports=i)},3996:function(e,t,n){var a,i;n(69070),a=[t,n(18730),n(77664),n(83296),n(39968)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={retrieve:function(){var e=$.Deferred();return new n.default.Retriever(n.default.RETRIEVAL_TYPES.JSON).retrieve(o.default.customConfig.referencesUrl).then((function(e){var t=e.data;return t.references?$.when(t,a.default.inlineDocument(t.references)):$.when(t,"")})).then((function(t,n){t.references&&n&&(t.references=n),e.resolve(t)})).fail((function(){e.resolve({msg:"References are not available for this publication.",error:!0})})),e.promise()}},l={PLACEHOLDER:"<div>References currently unavailable offline</div>",NAME:i.default.attachments.referenceKey,Retriever:s};t.default=l}.apply(t,a))||(e.exports=i)},83296:function(e,t,n){var a;n(69070),void 0===(a=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;t.default={attachments:{metadataKey:"metadata",referenceKey:"references",relatedKey:"related",citationsKey:"citations",filesKey:"files"}}}.apply(t,[t]))||(e.exports=a)},32153:function(e,t,n){var a,i;n(69070),a=[t,n(43397),n(99004),n(86370),n(24221),n(85626),n(84926),n(49138),n(33279)],void 0===(i=function(e,n,a,i,o,r,s,l,u){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}var f,c,p,g,m;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=d(n),a=d(a),i=d(i),o=d(o),r=d(r),s=d(s),l=d(l),u=d(u);var v="#left-page-btn",h="#right-page-btn",_={init:function(){$(v).unbind("click"),$(h).unbind("click"),o.default.displayActions.shouldAddBookButtons()&&$("#app-container").append((0,l.default)({strings:r.default}));var e=$("#reader-book-page-btns");e.empty();var t=o.default.contentActions.tocActions.isRTL();e.append((0,s.default)({strings:r.default,keyboard:Keyboard,pageProgressionDirectionIsRTL:t})),$(v).on("click",(function(){u.default.isPDF()?_.previousPage():_.goLeft()})),$(h).on("click",(function(){u.default.isPDF()?_.nextPage():_.goRight()})),$(n.default.paging_info.first).on("click",(function(e){o.default.navigationActions.goToStartPage()})),$(n.default.paging_info.last).on("click",(function(e){o.default.navigationActions.goToEndPage()})),$(n.default.paging_info.nodeTraverseNext+n.default.paging_info.nodeTraverse).on("click",(function(e){_.nextPage()})),$(n.default.paging_info.nodeTraversePrevious+n.default.paging_info.nodeTraverse).on("click",(function(e){_.previousPage()})),$(n.default.paging_info.select).on("click",(function(e){_.goToSpecific()})),$(n.default.paging_info.page_input).on("keypress",(function(e){13===e.which&&_.goToSpecific()})),Keyboard.on(Keyboard.PagePrevious,"reader",(function(){g.attr("disabled")||o.default.navigationActions.leftArrowKey()})),Keyboard.on(Keyboard.PageNext,"reader",(function(){m.attr("disabled")||o.default.navigationActions.rightArrowKey()})),Keyboard.on(Keyboard.scrollUp,"reader",(function(){o.default.navigationActions.upArrowKey()})),Keyboard.on(Keyboard.scrollDown,"reader",(function(){o.default.navigationActions.downArrowKey()})),Keyboard.on(Keyboard.NodePrevious,"reader",(function(){o.default.navigationActions.leftArrowKey()})),Keyboard.on(Keyboard.NodeNext,"reader",(function(){o.default.navigationActions.rightArrowKey()})),$(n.default.paging_info.page_input).on("input.paging",(function(e){var t=$(this),n=t[0].value;if(""===n||o.default.navigationActions.isValidPageNumber(n))t.removeClass("error"),t.siblings(".errors").empty();else if(!t.hasClass("error")){t.addClass("error");var a=_.getHtmlData().errorMessage;t.siblings(".errors").append((0,i.default)({msg:a}))}}))},initWidgetDisplay:function(){f=$(n.default.paging_info.current_page),c=$(n.default.paging_info.all_pages),p=$(n.default.paging_info.page_input),g=$(n.default.paging_info.nodeTraverse+n.default.paging_info.nodeTraversePrevious),m=$(n.default.paging_info.nodeTraverse+n.default.paging_info.nodeTraverseNext)},updateWidgetDisplay:function(){void 0===f&&(o.default.navigationActions.init(),this.initWidgetDisplay());var e=_.getCurrent();if(!(e<1)){f.text(e);var t=_.getTotal();c.text(t),p.attr("max",t),_.hidePreviousButton(e)?g.attr("disabled","disabled"):g.removeAttr("disabled"),_.hideNextButton(e)?m.attr("disabled","disabled"):m.removeAttr("disabled"),u.default.isScrolling()||(_.hideBookNextButton()?$(h).hide():$(h).show(),_.hideBookPreviousButton()?$(v).hide():$(v).show())}},hidePreviousButton:function(e){return o.default.navigationActions.isFirstPage(e)},hideNextButton:function(e){return o.default.navigationActions.isLastPage(e)},hideBookPreviousButton:function(){return o.default.navigationActions.isBookFirstPage()},hideBookNextButton:function(){return o.default.navigationActions.isBookLastPage()},getCurrent:function(){return o.default.navigationActions.getCurrent()},getTotal:function(){return o.default.navigationActions.getTotal()},getHtmlData:function(){return o.default.navigationActions.getHtmlData()},goToSpecific:function(){var e,t=$(n.default.paging_info.page_input);t.length&&(e=t.val()),o.default.navigationActions.isValidPageNumber(e)?(o.default.navigationActions.goToPage(e),a.default.reset()):t.focus()},goRight:function(){o.default.navigationActions.rightArrowKey()},goLeft:function(){o.default.navigationActions.leftArrowKey()},openContentUsingUrl:function(e){o.default.navigationActions.openContentUsingUrl(e)},isLastPage:function(){return o.default.navigationActions.isLastPage(_.getCurrent())},nextPage:function(){o.default.navigationActions.nextPage()},previousPage:function(){o.default.navigationActions.previousPage()}},b=_;t.default=b}.apply(t,a))||(e.exports=i)},46925:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(69826),n(41539),n(85626),n(39968),n(36658),n(10520),n(32514),n(65714),n(33279),n(43397),n(16709),n(54417),n(99004),n(27437),n(62684),n(52486),n(85032),n(10366),n(24221),n(24755)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y,w){"use strict";function R(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=R(i),r=R(r),s=R(s),l=R(l),u=R(u),d=R(d),f=R(f),c=R(c),p=R(p),g=R(g),m=R(m),v=R(v),h=R(h),_=R(_),b=R(b),E=R(E),y=R(y),w=R(w);var A,C=!1,T=c.default.left_panel_info.panel_class,S=c.default.left_panel_info.id,O=c.default.left_panel_info.close_btn,D=$("body"),P=!1,I=!1,L=!1,k=1,x=1,M=1,N=1,F=function(e){var t="with-transparency",n=$(O);e?n.addClass(t):n.removeClass(t)},U=function(e,t,n){if(!EREADER.isTouchDeviceKeyboardTriggered()){var a=D.hasClass("info-visible"),i=p.default.getPreset(),o=$("#app-container"),r=$("#reader-left-panel"),s=o.width()-r.width();if(f.default.isPDF()){if("user"===i){if(N=$(A).height(),x=$(A).width(),p.default.getPageWidth()>x||I){var l=x/k*(N/M);p.default.customScale(l),M=N,k=x,I=!1,L=!0}}else"fit-width"===i?p.default.fitWidth():"fit-height"===i&&p.default.fitHeight();f.default.isScrolling()&&e&&P&&(p.default.fixPositionNeeded()&&EREADER.utils.fixPositionAfterResizing(t,e),P=!1)}y.default.displayActions.zoomActions.resizeReadingArea(a,s,n)}},B=function(e){var t=EREADER.utils.isMobile(),n={},a=y.default.navigationActions.getCurrentPageElement();a&&(n.offsetTop=a[0].offsetTop,n.relativeOffsetTop=$(A)[0].scrollTop-n.offsetTop,P=!0),$(O).toggleClass("expanded").find(".icon").toggleClass("flip-horizontal");var i=D.hasClass(T);i?(F(!0),$(".l-panel--button-container [data-trigger]").removeClass("active"),v.default.resetStates(S),EREADER.utils.isMobile()&&h.default.statesReset(),D.removeClass(T),EREADER.utils.isIosDevice()&&EREADER.utils.forceStyleRecalculation($("#app-container")),$(S).find(c.default.tabs_info.tabpanel).attr("tabindex","-1"),EREADER.utils.scrolledContentFocus(),EREADER.utils.isIosDevice()&&EREADER.utils.isMobile()&&$(c.default.reader_info.scrolled_content_frame).css("overflow","auto"),C=!1,I=L):(F(!1),function(e){m.default.reset(void 0,!0),EREADER.utils.ltTablet()&&j(!0),D.addClass(T),$(S).find(c.default.tabs_info.tabpanel).attr("tabindex","0"),g.default.updateToc(),EREADER.utils.isIosDevice()&&EREADER.utils.isMobile()&&$(c.default.reader_info.scrolled_content_frame).css("overflow","hidden"),EREADER.utils.gtTablet()&&e&&$('[data-trigger="#info"]').trigger("click")}(e),C=!0),L=!1,t||U(a,n,i)},j=function(e){e&&(h.default.statesReset(),m.default.reset()),D.hasClass(T)&&B(!0)},V={closePanel:j,initPanel:function(){A=y.default.contentActions.getReadingContainerSelector(),h.default.init(),h.default.initTabPanels(),Keyboard.on(Keyboard.ToggleLeftPanel,"reader",(function(){B(!0)}));var e=$(".l-panel--button-container .btn--rounded");e.click((function(){e.blur()})),$(O).on("click",B),$(".l-panel--button-container [data-trigger]").on("click",(function(e){var t="leftPanelbtn"===e.target.id,n=$(this),a="active";if(n.tooltip("hide"),!n.hasClass(a)){n.addClass(a),n.siblings().removeClass("active"),D.hasClass("info-visible")||B(t);var i=n.data("trigger");"#notes"===i&&EREADER.emit(E.default.NOTES_TAB_CLICKED),$(c.default.menudrawer_info.drawer).find(i).trigger("click")}})),s.default.setup(),M=$(c.default.reader_info.reading_area).height(),k=$(c.default.reader_info.reading_area).width(),g.default.init();var t=o.debounce((function(){U(),f.default.check()}),150);$(window).resize((function(e){EREADER.printButtonClicked?EREADER.printButtonClicked=!1:(I=!0,t())}));var n=0;$(document).on("mousewheel DOMMouseScroll scroll",(function(){if(!C){var e=$(A)[0]?$(A)[0].scrollTop:void 0;F(n<e),n=e}})),EREADER.on(E.default.TOC_RETRIEVED,b.default.loadToc)},loadPanel:function(){var e=u.default.returnButtonOrder(),t=u.default.returnButtonList(),n=u.default.returnSuppressedArray(),a=$(S);a.empty();var o=[],s=[];d.default._manageSuppressed(e,o,t,n),d.default._updateObjectList(o,t,s);var f={strings:i.default,keyboard:Keyboard,customConfig:r.default.customConfig,tabConfig:l.default,recommendationEnabled:w.default.enabled,materialTabs:r.default.customConfig.materialTabs,tabsSuppressionConfig:r.default.customConfig.profileConfig,type:r.default.customConfig.publicationType,buttons:s};a.append((0,_.default)(f))},updatePanel:function(){C&&$(c.default.activetoc_info.toc).isVisible()&&g.default.updateToc()},isPanelOpen:C};t.default=V}.apply(t,a))||(e.exports=i)},83475:function(e,t,n){var a,i;n(69070),a=[t,n(32564),n(69826),n(41539),n(65328),n(43397),n(17261),n(27437)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=u(o),r=u(r),s=u(s),l=u(l);var d=!1,f=r.default.right_panel_info.panel_class,c=r.default.right_panel_info.id,p=r.default.right_panel_info.close_btn,g=$("body"),m=function(e,t){e.length>0&&setTimeout((function(){e.data("originalText",e[0].innerHTML),o.default.init(e,t||2,!0)}),30)},v=function(e,t){if(e){var n=$(".user_id.logged .name");n.hasClass("truncated")?(setTimeout((function(){o.default.destroy(n)}),30),m(n)):m(n)}if(t){var a=$(".user_id.logged .email");a.hasClass("truncated")?(setTimeout((function(){o.default.destroy(a)}),30),m(a,1)):m(a,1)}},h=function(){g.removeClass(f),l.default.resetStates(c),EREADER.utils.isIosDevice()&&EREADER.utils.forceStyleRecalculation($("#app-container")),EREADER.utils.scrolledContentFocus()},_=function(e){e.preventDefault();var t,n,a,i=g.hasClass(f),o=$(e.currentTarget);i?(h(),d=!1):(t=$(".user_id.logged"),n=t.find(".name"),a=t.find(".email"),v(!n.hasClass("truncated"),!a.hasClass("truncated")),g.addClass(f),setTimeout((function(){$(r.default.menudrawer_info.user_panel)[0].focus()}),100),o.attr("aria-expanded",!0),d=!0)},b=function(){g.hasClass(f)&&h()},E={closePanel:b,initPanel:function(){Keyboard.on(Keyboard.ToggleRightPanel,"reader",(function(){$(p).trigger("click")})),$(p).on("click",(function(e){_(e)})),$(c).on("keydown",(function(e){9===e.keyCode&&$(c).addClass("tab-focus")})),$(c).on("click",(function(){$(c).removeClass("tab-focus")})),window.addEventListener("orientationchange",(function(){document.body.classList.contains(r.default.fullscreen_mode)||b()}),!1),$(window).resize((function(){v(!0,!0)}));var e=$('input[name="download-format"]');e.length>0&&e.first().prop("checked",!0)},loadPanel:function(){s.default.init()},isPanelOpen:d};t.default=E}.apply(t,a))||(e.exports=i)},61593:function(e,t,n){var a,i;n(69070),a=[t,n(68309),n(69826),n(41539),n(89554),n(54747),n(47941),n(21249),n(82772),n(43397),n(99427),n(99004),n(23069),n(85626),n(8617),n(94405),n(60386)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,d=_(d),f=_(f),c=_(c),p=_(p),g=_(g),m=_(m),v=_(v),h=_(h);var b={externalConfig:{},doi:void 0,current:{},multiple:!1,available:[],elements:{navbarContainer:null,panelContainer:null},init:function(e,t){if(!e||!e.enabled)return!1;this.externalConfig=e,this.doi=t,this.elements.navbarContainer=document.querySelector(d.default.switch_formats_info.navbar_dropdown_class),this.elements.panelContainer=document.querySelector(d.default.switch_formats_info.rpanel_button_class),this.prepareData().done((function(){b.render()}))},prepareData:function(){var e=this.externalConfig;return e.available?this._prepareDataForMultiFormat(e):this._prepareDataForSingleFormat(e),f.default.isOffline()?this._disableUnavailableOfflineFormats():$.Deferred().resolve()},render:function(){var e={current:this.current,multiple:this.multiple,available:this.available};this._renderInNavbar(e),this._renderInRightPanel(e),f.default.isOffline()&&this._afterOfflineRender()},_renderInNavbar:function(e){this.elements.navbarContainer&&(this.elements.navbarContainer.innerHTML=(0,m.default)(e),c.default.initDropdown($(this.elements.navbarContainer)))},_renderInRightPanel:function(e){for(var t=[],n=0;n<e.available.length;n++)if(!e.available[n].active&&!0===e.available[n].availableOffline){var a=e.available[n];a.className=a.name.toLowerCase(),a.isEPUB="epub"===a.className,t.push(a)}this.elements.panelContainer&&t.length&&(this.elements.panelContainer.outerHTML=(0,v.default)({availableFormats:t}))},_afterOfflineRender:function(){if(this.elements.navbarContainer){var e=$(this.elements.navbarContainer).find("a.not-available-offline");$(e).on("click",(function(e){e.preventDefault(),p.default.toast("OFFLINE","","",g.default.format_not_saved_offline)}))}},_prepareDataForMultiFormat:function(e){var t=[];this.current=e.available[e.current],Object.keys(e.available).forEach((function(n){if(e.available.hasOwnProperty(n)){var a=e.available[n];a.active=e.current===n,a.name=a.name.toUpperCase(),a.availableOffline=!0,t.push(a)}})),this.available=t,this.multiple=this.available.length>1},_prepareDataForSingleFormat:function(e){this.current={name:e.current.toUpperCase()},this.multiple=!1},_disableUnavailableOfflineFormats:function(){var e=this,t=$.Deferred();return h.default.getOfflineFormats(this.doi).done((function(n){var a=n.map((function(e){return e.toLowerCase()}));e.available.forEach((function(t,n){-1===a.indexOf(t.name.toLowerCase())&&(e.available[n].availableOffline=!1)})),e.multiple=e.available.length>1,t.resolve()})),t}},E=b;t.default=E}.apply(t,a))||(e.exports=i)},38031:function(e,t,n){var a,i;n(69070),a=[t,n(57327),n(41539),n(69826),n(43397),n(39968),n(98927),n(99427),n(28478)],void 0===(i=function(e,n,a,i,o,r,s,l,u){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=d(o),r=d(r),s=d(s),l=d(l),u=d(u);var f="OFFLINE",c="DOWNLOAD",p="PRINT",g="NA",m={OFFLINE:!1,SHARE:!1,DOWNLOAD:!1,PRINT:!1},v={PRINT:!1,DOWNLOAD:!1,OFFLINE:!1,SHARE:!1},h="type",_="usageType",b="reqType",E="GET",y="POST",w=void 0,R=void 0,A={fetchPermissions:function(e,t){var n,a=$.Deferred();if(l.default.isOffline())e?a.reject({message:"permission is disabled, because reader is in offline mode"}):(O(),I(null,$(o.default.menudrawer_info.offline_library),null,!0),I(null,$(o.default.menudrawer_info.offline_btn),null,!0),a.resolve((n=!1,m.OFFLINE=n,m.SHARE=n,m.PRINT=n,m.DOWNLOAD=n,m)));else{var i={doi:r.default.customConfig.doi,format:t||r.default.customConfig.format};e&&(i.reqType=e.reqType),C({data:i,path:r.default.customConfig.permissionsUrl,displayLoader:i.reqType,method:E},(function(t){t?a.resolve(L(t,e)):(e||(S(o.default.menudrawer_info.offline_library),S(o.default.menudrawer_info.offline_btn),S(o.default.menudrawer_info.download_list),S(o.default.printing_info.print_btn),S(o.default.navbar_info.navbarDownload)),a.reject({message:"Error fetching JSON, server didn't respond"}))}))}return a.promise()},consumePermissions:function(e){var t=$.Deferred();return C({data:{doi:r.default.customConfig.doi,format:r.default.customConfig.format,usageType:e.usageType,usageAmount:e.usageAmount},path:r.default.customConfig.consumePermissionsUrl,displayLoader:!0,method:y},(function(n){n?t.resolve(L(n,e)):t.reject({message:"Error consuming JSON, server didn't respond"})})),t.promise()},enableControls:function(e){e.usageRights?$.each(e.usageRights,(function(e,t){!function(e){switch(e.type){case f:I(e,$(o.default.menudrawer_info.offline_btn),r.default.customConfig.isOfflineDisabled),I(e,$(o.default.menudrawer_info.offline_library),r.default.customConfig.isOfflineDisabled),I(e,$(o.default.navbar_info.offline_add_button),r.default.customConfig.isOfflineDisabled);break;case c:I(e,$(o.default.menudrawer_info.download_list),r.default.customConfig.isDownloadDisabled),function(e,t){var n=$(o.default.navbar_info.navbarDownload);t?P(n):void 0!==$(".download")&&(n.removeClass(o.default.menudrawer_info.not_resolved_yet),T(e,e.type)&&(n.removeClass(o.default.menudrawer_info.permissionDisabled).removeAttr("aria-disabled").removeAttr("tabindex").children().prop("disabled",!1),$(".navbar-download > button").removeClass(o.default.menudrawer_info.permissionDisabled).attr("aria-disabled",!1).attr("tabindex","0").addClass("dropdown-trigger")))}(e,r.default.customConfig.isDownloadDisabled);break;case p:I(e,$(o.default.printing_info.print_btn),r.default.customConfig.isPrintDisabled)}}(t)})):O()},canUsePermissions:function(e){var t=$.Deferred();return T(e,e.type)?t.resolve(e.availableUsage):t.reject({message:"you can't use the "+e.type+" permission",availableUsage:e.availableUsage}),t.promise()},isCopyingAllowed:function(){var e=$.Deferred();function t(t){for(var n=t.usageRights.filter((function(e){return e.type===A.PERMISSION_DOWNLOAD||e.type===A.PERMISSION_PRINT})),a=0;a<n.length&&!(w=0!==n[a].availableUsage&&n[a].availableUsage!==g);a++);e.resolve(w)}return void 0!==w&&e.resolve(w),R?t(R):A.fetchPermissions().done(t).fail((function(){e.resolve(!1)})),e.promise()},accessPermissionConfig:function(e,t){var n=r.default.customConfig,a=n.freeToReadConfig,i=n.previewConfig,o={};return a.isFreeToRead?o={isNoAccess:!0,accessUrl:a.accessUrl,isButtonVisible:a.isGetAccessButtonVisible,freeToRead:!0}:n.epubActions.preview&&i&&(o={isNoAccess:!0,accessUrl:i.accessUrl,isButtonVisible:i.isGetAccessButtonVisible}),t&&(o.arrowClasses=t),e&&(o.appendTarget=e),o},PERMISSION_OFFLINE:f,PERMISSION_DOWNLOAD:c,PERMISSION_SHARE:"SHARE",PERMISSION_PRINT:p,NO_USAGE:0,UNLIMITED_USAGE:-1,PERMISSION_NOT_AVAILABLE:g,UNLIMITED_PERMISSIONS:v};function C(e,t){$.ajax({url:e.path,method:e.method,dataType:"json",data:{doi:e.data.doi,format:e.data.format,reqType:e.data.reqType,usageType:e.data.usageType,usageAmount:e.data.usageAmount},timeout:6e3,success:function(e){t(e)},error:function(e,n,a){"timeout"===n&&console.error("Connection with server timed out! Actions will be disabled"),console.error("Failed with status code: "+e.status+", text status: "+n+", error: "+a),t()},beforeSend:function(){e.displayLoader&&(0===$(".atyLoader").length&&$(o.default.reader_info.reading_area).append((0,u.default)({strings:{loaderText:"processing"}})))},complete:function(){var e=$(".atyLoader").first();0!==e.length&&e.fadeOut().remove()}})}function T(e,t){return e.availableUsage===g||0===e.availableUsage?m[t]=!1:m[t]=e.availableUsage>=-1,m[t]}function S(e){$(e).removeClass(o.default.menudrawer_info.not_resolved_yet).addClass(o.default.menudrawer_info.could_not_resolve)}function O(){D(o.default.menudrawer_info.offline_library),D(o.default.menudrawer_info.offline_btn),D(o.default.menudrawer_info.download_list),D(o.default.printing_info.print_btn),D(o.default.navbar_info.navbarDownload)}function D(e){$(e).removeClass(o.default.menudrawer_info.not_resolved_yet)}function P(e){e.remove()}function I(e,t,n,a){if(n)P(t);else if(void 0!==t&&(t.removeClass(o.default.menudrawer_info.not_resolved_yet),T(e=e||{},e.type)||a)){t.removeClass(o.default.menudrawer_info.permissionDisabled);var i=e.limited,r=e.availableUsage>0||-1===e.availableUsage,l=i&&!r;s.default.WaiAria.setState(t,"aria-disabled",l),t.find("button, .button").attr("tabindex","0"),-1===e.availableUsage&&(v[e.type]=!0)}}function L(e,t){return t?e.usageRights?k(e,t,h,b):e.consumptionDefaults?k(e,t,_,_):e:(R=e,e)}function k(e,t,n,a){for(var i=e.usageRights||e.consumptionDefaults,o=0;o<i.length;o++){var r=i[o];if(r[n]===t[a])return r}}var x=A;t.default=x}.apply(t,a))||(e.exports=i)},50615:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(57327),n(41539),n(82772),n(3843),n(83710),n(39714),n(88674),n(85626),n(39968),n(34707),n(38031),n(23069),n(43397),n(4857),n(28478),n(94603),n(24221)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p,g,m,v,h,_,b){"use strict";function E(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,d=E(d),f=E(f),c=E(c),p=E(p),g=E(g),m=E(m),v=E(v),h=E(h),_=E(_),b=E(b);var y,w,R={};function A(e){var t=$(m.default.printing_info.reading_area);if(R.isValidPrint)b.default.contentActions.printingActions.beforePrint();else{if($("#"+m.default.printing_info.print_page).length)return;var n='<div id="'+m.default.printing_info.print_page+'" class="'+m.default.printing_info.enable_printing+'">'+w.PRINTING_DISABLED_MESSAGE+"</div>";t[0].insertAdjacentHTML("afterbegin",n),$("body").addClass("print-not-allowed"),$(m.default.reader_info.app_container).addClass("print-not-allowed"),$(m.default.printing_info.reading_area).addClass("print-not-allowed")}}function C(){S(),$("body").removeClass("print-not-allowed"),$(m.default.reader_info.app_container).removeClass("print-not-allowed"),$(m.default.printing_info.reading_area).removeClass("print-not-allowed"),R.isValidPrint?(R.isValidPrint=!1,b.default.contentActions.printingActions.afterPrint(),c.default.trigger(c.default.eventTypes.PRINT,{customProperties:{eventTime:Date.now(),printedPages:y?y.toString():0}})):$("#"+m.default.printing_info.print_page).remove()}R.init=function(){w=f.default.customConfig.alertPopupMsg,function(){window.onbeforeprint=A,window.onafterprint=function(e){EREADER.utils.isRealMobileOrTablet()?T():C()};var e=$(document);e.on("click.printingPopup",m.default.printing_info.print_btn,o.debounce((function(){var e=p.default.accessPermissionConfig($(m.default.printing_info.print_btn),"left extra-move");window.READER_OFFLINE?g.default.toast("OFFLINE",d.default.printing_offline):e.isNoAccess?EREADER.utils.isMobile()||EREADER.utils.isMobileHeight()?g.default.toast("FREE_ACCESS","print","","",e):g.default.tip("FREE_ACCESS_TIP","print","",e):$(this).hasClass(m.default.menudrawer_info.not_resolved_yet)?g.default.popup("TEMPORARY_ERROR_ALTER","Printing"):$(this).hasClass(m.default.menudrawer_info.could_not_resolve)?g.default.popup("SERIOUS_ERROR","Printing"):$(this).hasClass(m.default.menudrawer_info.disable_by_default)?(g.default.toast("TEMPORARY_ERROR","Printing"),$(m.default.printing_info.print_btn).addClass("hidden")):f.default.customConfig.isPrintSupportedForBrowser?f.default.customConfig.epubActions.print?p.default.UNLIMITED_PERMISSIONS.PRINT?R.presentPrintPopup(p.default.UNLIMITED_USAGE):p.default.fetchPermissions({reqType:p.default.PERMISSION_PRINT}).done((function(e){p.default.canUsePermissions(e).done((function(e){R.presentPrintPopup(e)})).fail((function(e){R.presentPrintPopup(e.availableUsage),LIT.Reader.LogEnabled&&console.log(e.message)}))})).fail((function(e){g.default.popup("SERIOUS_ERROR","Printing"),console.error("Error fetching PRINT permission, "+e.message)})):g.default.toast("USER_UNAUTHORIZED","printed"):g.default.toast("UNSUPPORTED","Printing")}),200,{leading:!1,trailing:!0})),e.on("click.printingDuplicate","#duplicatePages_proceed",(function(){R.previewPrint(v.default.getSelectedPages())})),e.on("click.printingRemoveDuplicate","#duplicatePages_remove",(function(){var e=v.default.getSelectedPages().filter((function(e,t,n){return n.indexOf(e)===t}));R.previewPrint(e)})),e.on("change.printing",'.printPopup [type="radio"]',(function(e){v.default.validateInput(!1)})),e.on("click.printingPreview",".printPreview",(function(e){var t=v.default.validateInput(!0);t.entireDoc?R.previewPrint(o.range(1,b.default.contentActions.getEntireContentPagesLength()+1)):t.range&&R.previewPrint(t.range)})),window.addEventListener("CloneAdd",(function(e){v.default.validateInput(!1)}),!1),window.addEventListener("CloneRemove",(function(e){v.default.validateInput(!1)}),!1),e.on("input.printing",".printPageInput",(function(e){var t=e.target.dataset.associatedRadio;t&&(document.querySelector("#"+t).checked=!0),v.default.validateInput(!1)})),e.on("click.printingPreview",".select-content .choice",(function(e){v.default.validateInput(!1)}))}(),b.default.contentActions.printingActions.init(A,C)},R.isValidPrint=!1,R.presentPrintPopup=function(e){if(e===p.default.PERMISSION_NOT_AVAILABLE)$(m.default.printing_info.print_btn).addClass(m.default.menudrawer_info.permissionDisabled),g.default.toast("USER_UNAUTHORIZED","printed",void 0,w.USER_UNAUTHORIZED);else if(e===p.default.NO_USAGE)$(m.default.printing_info.print_btn).addClass(m.default.menudrawer_info.permissionDisabled),g.default.toast("PERMISSIONS_DEPLETED","printing","The publication cannot be printed");else{var t=b.default.contentActions.printingActions.getSinglePrintableItem();if(t.isSingleItem)R.previewPrint([t.singlePageToPrint]);else{var n=b.default.contentActions.printingActions.getPrintingPopupData();if(n){var a=(0,_.default)(n);g.default.customPopup({position:"popup",preset:"",customClasses:"printPopup",primaryBtn:!0,primaryBtnClasses:"printPreview",primaryBtnText:"PRINT",secondaryBtn:!0},a),v.default.validateInput(!1)}else console.error("MAXIMUM PAGE 0"),g.default.popup("SERIOUS_ERROR","Printing")}}},R.previewPrint=function(e){y=e,g.default.closeAlert();var t=document.querySelector(m.default.right_panel_info.close_btn);t&&t.click(),new Promise((function(e,t){f.default.customConfig.usageRightsEnabled?p.default.consumePermissions({usageType:p.default.PERMISSION_PRINT,usageAmount:1}).done((function(n){n.success?(LIT.Reader.LogEnabled&&console.log("You have "+n.remainingUsages+" usages left."),e()):t(new Error("USER_UNAUTHORIZED"))})).fail((function(){t(new Error("SERVER_UNAVAILABLE"))})):e()})).then((function(){return document.querySelector(m.default.reader_info.reading_area).insertAdjacentHTML("beforeend",(0,h.default)()),R.isValidPrint=!0,b.default.contentActions.printingActions.previewPrint(e)})).catch((function(e){S(),"USER_UNAUTHORIZED"===e.message?g.default.toast(e.message,"printed"):"SERVER_UNAVAILABLE"===e.message?g.default.toast(e.message):(g.default.toast("TEMPORARY_ERROR","Printing"),console.error(e))}))};var T=o.debounce((function(){C()}),2e3);function S(){var e=document.querySelector(".atyLoader");null!=e&&e.parentNode.removeChild(e)}var O=R;t.default=O}.apply(t,a))||(e.exports=i)},4857:function(e,t,n){var a,i;n(69070),a=[t,n(89554),n(41539),n(54747),n(90793),n(27120),n(24221)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=l(o),r=l(r),s=l(s);var u={errors:{empty:!1,notSelected:!1,duplicate:!1,limitReached:!1,outOfRange:!1,invalidRange:!1,singlePageAndCampaign:!1},inputs:{pageNumInputs:void 0,selectedRadio:void 0,submit:void 0,ids:{entireDoc:"entire-doc-radio",currentNode:"current-node-radio",selectRange:"select-range-radio",currentPageSection:"current-section-radio",pageSectionRange:"select-section-radio"}},result:{entireDoc:!1,range:!1},validate:function(e){u.inputs.pageNumInputs=document.querySelectorAll(".printPageInput"),u.inputs.selectedRadio=document.querySelector("input[type='radio']:checked"),u.inputs.submit=document.querySelector(".printPreview"),u.errors={empty:!1,duplicate:!1,limitReached:!1,outOfRange:!1,invalidRange:!1},u.result={entireDoc:!1,range:!1},o.default.error.reset($(".printPreview")),o.default.submit.disable($(u.inputs.submit));var t=s.default.contentActions.printingActions.validate(u,e);return t.length>0&&t.forEach((function(e){switch(e.errorType){case"emptyInput":!function(e){o.default.error.addClass(e.inputs[0]),null==document.querySelector("div.printPopup .emptyInputError")&&o.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"optionNotSelected":!function(e){o.default.error.addClass(e.inputs[0]),null==document.querySelector("div.printPopup .notSelectedError")&&o.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"outOfRange":!function(e){var t=e.inputs[0];t.addClass("outOfRangeInput"),o.default.error.addClass(t),null==document.querySelector("div.printPopup .outOfRangeError")&&o.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"invalidRange":!function(e){var t=e.inputs;o.default.error.addClass(t[0]),o.default.error.addClass(t[1]),null==document.querySelector("div.printPopup .wrongInputs")&&o.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"limitReached":!function(e){o.default.error.addClass(e.inputs[0]),null==document.querySelector("div.printPopup .pageLimitReached")&&o.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"duplicatePages":!function(e){u.inputs.submit.blur(),o.default.submit.disable($(u.inputs.submit));var t=(0,r.default)(e.errorMsg);document.querySelector("div.printPopup .formError").insertAdjacentHTML("beforebegin",t),document.querySelector("div.printPopup #popup_inline_form").focus()}(e);break;case"singlePageAndCampaign":!function(e){u.inputs.selectedRadio.id!==u.inputs.ids.currentNode&&o.default.error.addClass(e.inputs[0]);null==document.querySelector("div.printPopup .printingCampaign")&&o.default.error.appendErrorMsg(e.errorMsg)}(e)}})),e||u.errors.outOfRange||u.errors.invalidRange||u.errors.limitReached||o.default.submit.enable($(u.inputs.submit)),u.result},getSelectedPages:function(){return s.default.contentActions.printingActions.getSelectedPages(u.inputs.pageNumInputs)}};var d={getSelectedPages:u.getSelectedPages,validateInput:u.validate};t.default=d}.apply(t,a))||(e.exports=i)},20282:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(83710),n(88674),n(3843),n(99427),n(39968),n(29455),n(10366),n(34707)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,s=c(s),l=c(l),u=c(u),d=c(d),f=c(f);var p={PROGRESS_OBJ_VERSION:"1.1",getProgressStorageKey:function(){var e=l.default.customConfig;if(e){var t=e.doi,n=e.format;if(void 0!==t&&t&&void 0!==n&&n)return encodeURIComponent(t)+"_"+n}},getProgressStorageJsonStr:function(e){if(void 0!==e){var t={};return"string"==typeof e?t=JSON.parse(e):t.location=e,t.version||(t.version=this.PROGRESS_OBJ_VERSION,t.date=new Date),JSON.stringify(t)}return e},syncProgress:function(e){if(!$.isEmptyObject(e)&&!s.default.isOffline()){var t=l.default.customConfig;if(t&&t.readingProgress){var n=l.default.customConfig.readingProgress,a=t.format,i=n.syncUrl;if(i&&0!==i.length&&n.syncProgress){var o={doi:l.default.customConfig.doi,location:e,format:a};$.ajax({data:o,type:"POST",url:i,async:!0,onSuccess:function(){LIT.Reader.LogEnabled&&console.log("successfully synced progress data with server")},onError:function(){LIT.Reader.LogEnabled&&console.log("oops..failed to sync progress with server")}})}}}},shouldOverrideLocalProgress:function(e,t){var n=!1;if(e&&!0===e.syncProgress&&!$.isEmptyObject(e.serverReadingProgress)&&!$.isEmptyObject(e.location))try{if(void 0===t)n=!0;else{var a=JSON.parse(e.serverReadingProgress),i=JSON.parse(a.location).date,o=t.date;n=void 0===o&&"undefined"!==i||void 0!==i&&Date.parse(o)-Date.parse(i)<0}}catch(e){LIT.Reader.LogEnabled&&console.log("Failed to parse progress from server."+e)}return n},retrieveProgressFromServer:function(){return new Promise((function(e){var t=l.default.customConfig,n=t.readingProgress,a=t.format;if(!(a&&n&&n.syncProgress))return e();var i=l.default.customConfig.doi;$.ajax({url:n.retrieveUrl,data:{doi:i,format:a},dataType:"json"}).done((function(t){return e(t)})).fail((function(t){return console.error(t),e()}))}))},getLocalProgress:function(){var e=p.getProgressStorageKey();return u.default.getSync(e)},defineProgressChangedEvent:function(){var e=this;EREADER.on(d.default.PROGRESS_CHANGED,(function(t,n,a){var i,o=t;a||(o=e.getProgressStorageJsonStr(t),p.updateLocalProgress(o),p.syncProgress(o)),f.default.trigger(f.default.eventTypes.READ,{customProperties:{eventTime:Date.now(),location:n,locationType:a?"campaign":"normal",tocEntry:(i=$("#reader-toc-body"),i.find('a[tabindex="60"]')[0]?i.find('a[tabindex="60"]')[0].text:""),readDuration:Date.now(),subSection:o,spineIndex:n}})}))},updateLocalProgress:function(e){var t=p.getProgressStorageKey(),n=this.getProgressStorageJsonStr(e);u.default.put(t,n,$.noop)}},g=p;t.default=g}.apply(t,a))||(e.exports=i)},16414:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(74916),n(64765),n(32564),n(85626),n(88995),n(65328),n(23069),n(43397),n(99004),n(98927),n(92275),n(24221)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m){"use strict";function v(e){return e&&e.__esModule?e:{default:e}}var h,_,b,E,y,w,R,A;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,s=v(s),l=v(l),u=v(u),d=v(d),f=v(f),c=v(c),p=v(p),g=v(g),m=v(m);var C=0,T=0,S={init:function(){h=$(f.default.navbar_info.id).find(f.default.search_info.search_class),_=h.find("form"),E=_.find(".search-field"),b=h.find(".results"),c.default.initDropdown(h),_.on("submit",(function(e){e.preventDefault(),S.onSubmit()})),h.find(f.default.dropdown_info.trigger).on("click",(function(){var e=h.find(f.default.dropdown_info.content+" "+f.default.dropdown_info.trigger);p.default.WaiAria.toggleState(e,"aria-expanded")})),h.find(f.default.dropdown_info.trigger).on("dropdown:opened",(function(){E.focus()})),h.find(f.default.dropdown_info.trigger).on("dropdown:closed",(function(){E.blur()})),this.handleAdditionalPopupBindings(h)},observeCurrent:function(){var e=$(".current")[0],t=new MutationObserver((function(){S.result.setCurrentCountFromSearchRes(R.text()),S.buttons.disable(),S.buttons.enable()}));e&&t.observe(e,{attributes:!0,childList:!0,subtree:!0})},repeatedInit:function(){var e="true"===h.find(".search-trigger").attr("aria-expanded");if(S.init(),e){var t=!1;C>0&&(t=!0),S.commonInit({success:t}),h.find(".search-trigger").attr("aria-expanded","true")}},handleAdditionalPopupBindings:function(e){e.on("click",f.default.dropdown_info.trigger+"."+f.default.dropdown_info.disabled_class,(function(){d.default.toast("UNSUPPORTED","","",s.default.search_disabled)}))},onSubmit:function(){""===E.val()?E.focus():(h.addClass("show-results"),S.doSearch())},doSearch:function(){m.default.contentActions.search.doSearch(this.getSearchTerm(),".current",S.renderTemplate)},getSearchTerm:function(){return E.val()},initCounters:function(e){(T=this.result.getTotalCountFromSearchRes(e))>0&&(C=1)},updateCounters:function(e,t){T=e,C=t},initPagination:function(e){this.initCounters(e)},initSearchInfo:function(e){this.resetCounters(),this.initPagination(e)},resetCounters:function(){T=0,C=0},renderTemplate:function(e,t){if(EREADER.utils.isMobile()&&e.error)S.clear(),d.default.customPopup({customClasses:"search",position:"top",preset:"fail"},s.default.searchError);else{if(t&&t.update)return R.text(t.current),A.text(t.count),S.updateCounters(t.count,t.current),S.buttons.disable(),void S.buttons.enable();b.html((0,g.default)({strings:s.default,response:e,res:t,query:S.getSearchTerm()})),S.commonInit(e,t)}},commonInit:function(e,t){e.success&&(S.needsTruncation(),R=b.find(".current"),A=b.find(".total"),y=b.find(".next"),w=b.find(".previous"),S.buttons.disable(),y.on("click",S.result.next),w.on("click",S.result.previous),t&&S.renderSearchResults(t),0===$(".atyLoader").length&&S.buttons.enable(),l.default.search_notification_shown||(d.default.customPopup({position:"toast",autoFade:!1,primaryBtn:!0,primaryBtnClasses:"js__close"},s.default.search_from_term),l.default.search_notification_shown=!0),this.observeCurrent()),h.data("persist",!0),$("#"+f.default.dropdown_info.overlay_id).fadeOut(),b.find(".clear").on("click",S.clear)},renderSearchResults:function(e){S.initSearchInfo(e),S.result.changeText()},clear:function(){E.val(""),b[0].innerHTML="",h.removeClass("show-results"),S.resetCounters(),m.default.contentActions.search.clear()},buttons:{enable:function(){C<T&&y.removeAttr("disabled"),C>1&&w.removeAttr("disabled")},disable:function(){y.attr("disabled","disabled"),w.attr("disabled","disabled")}},result:{next:function(){S.result.setCurrentCountFromSearchRes(R.text()),C++,S.buttons.disable(),S.buttons.enable(),S.result.changeCurrentTermCounter(),m.default.contentActions.search.next()},previous:function(){S.result.setCurrentCountFromSearchRes(R.text()),C--,S.buttons.disable(),S.buttons.enable(),S.result.changeCurrentTermCounter(),m.default.contentActions.search.previous()},changeText:function(){this.changeCurrentTermCounter()},changeCurrentTermCounter:function(){R.text(this.getCurrentCountFromSearchRes())},getCurrentCountFromSearchRes:function(){return C},getTotalCountFromSearchRes:function(e){return e.count},setCurrentCountFromSearchRes:function(e){C=e}},needsTruncation:function(){var e=$(".resultText .term");$(window).on("orientationchange",(function(t){e.text(e.attr("title")),setTimeout((function(){u.default.init(e,1)}),50)}))}},O=S;t.default=O}.apply(t,a))||(e.exports=i)},60433:function(e,t,n){var a,i;n(69070),a=[t,n(68309),n(69826),n(41539),n(85626),n(39968),n(10520),n(43397),n(17261),n(62684),n(99427),n(54416),n(24221),n(64530),n(53420),n(32515),n(35665),n(44128),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b){"use strict";function E(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=E(o),r=E(r),s=E(s),l=E(l),u=E(u),d=E(d),f=E(f),c=E(c),p=E(p),g=E(g),m=E(m),v=E(v),h=E(h),_=E(_),b=E(b);var y=[m.default.tips,h.default.tips,v.default.tips,_.default.tips],w=function(e){for(var t=0;t<y.length;t++)if(y[t].name===e)return t},R={mathJaxInjected:!1,fetchFiguresFromContent:!1,init:function(){var e=this;r.default.customConfig.profileConfig.materialsSuppressed||(e.fetchFiguresFromContent=p.default.contentActions.shouldGetFiguresFromContent(),e.manageTabSuppression(),e.loadMaterialTab(),e.getAllMaterials(),$(document).one("click","#filesDesktop, #figures",(function(){$("#"+m.default.pane).find(".figure__image").loadInview()})))},getSubTabPane:function(e){return y[w(e)].pane},getAllMaterials:function(){for(var e=0;e<y.length;e++)this.onMaterialsShow(y[e].name)},getMaterialsTab:function(){return $("#"+s.default.panes.data)},onMaterialsShow:function(e){var t=$("#"+this.getSubTabPane(e)).data("loaded");void 0!==t&&t||this.loadFiles(e)},manageTabSuppression:function(){var e=[],t=r.default.customConfig.materialTabs;t.figuresSuppressed&&e.push(w("figures")),t.tablesSuppressed&&e.push(w("tables")),t.mediaSuppressed&&e.push(w("media")),t.supplementsSuppressed&&e.push(w("supplements"));var n=$.grep(y,(function(t,n){return-1==$.inArray(n,e)}));y=n,g.default.isSingleTab=1===y.length},loadMaterialTab:function(){var e=this,t=e.getMaterialsTab(),n=r.default.customConfig.materialTabs,a=(0,c.default)({title:g.default.isSingleTab?y[0].title:o.default.data_title,isSingleTab:g.default.isSingleTab,tabs:y,tabsSuffix:s.default.suffix});e.getMaterialsTab().html($(a));var i=e.fetchFiguresFromContent;if(f.default.isOffline()&&!i)b.default.handleErrorLoadingData(t,o.default.data_offline,"wifi","","offline",!0);else if(r.default.customConfig.epubActions.preview)b.default.handleErrorLoadingData(t,o.default.data_preview,"visibility","","",!0);else if(n.figuresSuppressed&&n.mediaSuppressed&&n.tablesSuppressed&&n.supplementsSuppressed)b.default.handleErrorLoadingData(t,o.default.data_error,"remove_from_queue","","display",!0);else{if($('[data-panel-desktop="materials"]').length>0)return;d.default.initTabItems(t.find(l.default.tabs_info.tablist)),u.default.init()}},loadFiles:function(e){switch(e){case"figures":m.default.loadTab();break;case"tables":h.default.loadTab();break;case"media":v.default.loadTab();break;case"supplements":_.default.loadTab()}}};t.default=R}.apply(t,a))||(e.exports=i)},87462:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(17261),n(62684),n(39968),n(10520),n(99427),n(20178),n(85626),n(77691),n(24221),n(70135),n(24755),n(69903),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=h(i),o=h(o),r=h(r),s=h(s),l=h(l),u=h(u),d=h(d),f=h(f),c=h(c),p=h(p),g=h(g),m=h(m),v=h(v);var _={selectedTab:void 0,init:function(){var e=this;e.populateData({},e.getEl()),$(document).one("click",m.default.selector,(function(){m.default.init(),e.selectedTab=m.default,e.onShow()})),$(document).one("click",p.default.selector,(function(){p.default.init(),e.selectedTab=p.default,e.onShow()})),$(document).one("click",g.default.selector,(function(){g.default.init(),e.selectedTab=g.default,e.onShow()}))},getEl:function(){return $("#"+s.default.panes.links)},onShow:function(){var e=this,t=e.getEl(),n=t.data(e.selectedTab.tab+"-data-loaded");void 0!==n&&n||e.loadTabContent(e.selectedTab.tab,t)},loadTabContent:function(e,t){var n=this,a=n.selectedTab.url,o=n.selectedTab.errorString,s=n.selectedTab.previewString,d=n.selectedTab.emptyString,f=n.selectedTab.offlineString,p=n.selectedTab.tabClass,g=n.selectedTab.icon,h=n.selectedTab.type,_=n.selectedTab.$el;if(void 0!==a){EREADER.utils.displaySpinner(_);var b=function(a){var r=a[n.selectedTab.dataRes];a?r?(n.appendResponse(_,r),e===m.default.tab&&i.default.init(),$(p).find("a").attr("target","_blank")):a.error&&v.default.handleErrorLoadingData(_,d,g,"",h):v.default.handleErrorLoadingData(_,o,"remove_from_queue","","display"),t.data(e+"-data-loaded",!0)};l.default.isOffline()?e===m.default.tab?u.default.getReferences().then((function(e){b(e)})).catch((function(e){var t=c.default.contentActions.getReferencesFromContent();$.isEmptyObject(t)||$.isEmptyObject(t.references)?v.default.handleErrorLoadingData(_,o,"remove_from_queue","","display"):b(t)})):v.default.handleErrorLoadingData(_,f,"wifi","","offline"):r.default.customConfig.epubActions.preview?v.default.handleErrorLoadingData(_,s,"visibility","","preview"):EREADER.utils.getData(a).done((function(t){if(e===m.default.tab&&t.error){var n=c.default.contentActions.getReferencesFromContent();$.isEmptyObject(n)||$.isEmptyObject(n.references)?b(t):b(n)}else b(t)})).fail((function(e){404===e.status?v.default.handleErrorLoadingData(_,d,"image","","content"):v.default.handleErrorLoadingData(_,o,"remove_from_queue","","display")}))}else console.error("Error linking "+e+" : url is not defined"),v.default.handleErrorLoadingData(_,o,"remove_from_queue","","display")},appendResponse:function(e,t){e.html('<div class="tabbedPane"></div>'),e.find("div").html(t),o.default.scrollingTab(e)},populateData:function(e,t){if(!($('[data-panel-desktop="links"]').length>0)){var n=(0,f.default)({data:e,strings:d.default,recommendationEnabled:g.default.enabled,tabConfig:s.default});t.html($(n)),o.default.init()}}};t.default=_}.apply(t,a))||(e.exports=i)},72638:function(e,t,n){var a,i;n(69070),a=[t,n(41539),n(88674),n(35666),n(39968),n(10520),n(82198),n(99427),n(20178),n(9703),n(85626),n(25574),n(13142),n(9073),n(54396),n(24221),n(37070)],i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=_(o),r=_(r),s=_(s),l=_(l),u=_(u),d=_(d),f=_(f),c=_(c),p=_(p),g=_(g),m=_(m),v=_(v),h=_(h);var E={getEl:function(){return $("#"+r.default.panes.info)},init:function(){this.getEl().on("show",(function(){E.onShow(),E.styleMetadata()})),$("body").on("click",".authorsContainer",(function(){$(".authorsContainer").toggleClass("expanded")}))},onShow:function(){var e=this.getEl(),t=e.data("loaded");void 0!==t&&t||this.loadMetadata(e)},styleMetadata:function(){var e=$("#info-tab-pane .authors");if(e.height()>44){if(e.hasClass("truncate"))return;e.addClass("truncate"),e.before('<div class="authorsContainer"></div>'),(t=$(".authorsContainer")).append(e.detach()),t.append('<span class="authorsAction">...<button class="btn--action__text expand">See all authors</button><button class="btn--action__text collapse">Hide</button></span>')}else{if(!e.hasClass("truncate"))return;var t;e.removeClass("truncate"),(t=$(".authorsContainer")).before(e.detach()),t.remove()}},loadMetadata:function(e){var t=this,n=o.default.customConfig.metadataUrl,a=function(n){t.populateMetadata(n,e),e.data("loaded",!0)},i=function(){h.default.handleErrorLoadingData(e,f.default.info_error,"remove_from_queue","","display")};void 0!==n?l.default.isOffline()?u.default.getMetadata(o.default.customConfig.doi).then((function(e){a(e)})).catch((function(e){i()})):EREADER.utils.getData(o.default.customConfig.metadataUrl).done(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=7;break}return e.next=3,v.default.contentActions.getMetadataFromContent();case 3:void 0===(n=e.sent)||""===n.groupInfo?i():(n.groupInfo.metadata=(0,c.default)(n.groupInfo.metadata),a(n)),e.next=8;break;case 7:a(t);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){b(o,a,i,r,s,"next",e)}function s(e){b(o,a,i,r,s,"throw",e)}r(void 0)}))});return function(e){return t.apply(this,arguments)}}()).fail((function(e){i()})):(console.error("Error loading metadata references: url is not defined"),i())},populateMetadata:function(e,t){var n=(0,p.default)({tabTitle:"Details",data:e});t.html($(n));var a=$("#info-tab-pane .authors");a.first().after((0,g.default)({strings:f.default,keyboard:Keyboard,customConfig:o.default.customConfig,runtimeConfig:EREADER.utils.getRunTimeReaderConfig()}));var i=$("#info-tab-pane .citation_btn");i.length>0?i.first().after((0,m.default)({customConfig:o.default.customConfig})):a.first().after((0,m.default)({customConfig:o.default.customConfig})),d.default.offline(),s.default.init(t)}},y=E;t.default=y}.apply(t,a),void 0===i||(e.exports=i)},85032:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(32564),n(85626),n(43397),n(75977),n(45380),n(24221)],void 0===(i=function(e,n,a,i,o,r,s,l,u){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=d(o),r=d(r),s=d(s),l=d(l),u=d(u);var f={loadToc:function(){var e=$(r.default.activetoc_info.toc),t=u.default.contentActions.tocActions.getToc();if(t.error)e.html((0,l.default)({title:o.default.outline,settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:o.default.outline_empty}}));else{var n=u.default.contentActions.tocActions.isRTL();!function(e){var t=$(r.default.activetoc_info.toc),n=e.is("ol, ul, nav");t.append((0,s.default)({tabTitle:o.default.outline_title}));var a=t.find(".paddedPane");n||(a.append("<ol></ol>"),a=a.find("ol")),a.append(e)}(t),n&&(t[0].setAttributeNS("http://www.w3.org/1999/xhtml","dir","rtl"),t[0].style.direction="rtl"),e.find("li > a").each((function(){$(this).attr("tabindex","-1"),$(this).on("focus",(function(t){var n=e.find('a[tabindex="60"]');n.length>0&&n[0]!==t.target&&n.attr("tabindex","-1"),t.target.setAttribute("tabindex","60")}))})),e.on("click","a",(function(e){try{var t=$(this).attr("href");u.default.contentActions.tocActions.tocElementClicked(t)}catch(e){console.error(e)}finally{var n=$(this);return setTimeout((function(){n.blur()}),500),!1}}))}}};t.default=f}.apply(t,a))||(e.exports=i)},70135:function(e,t,n){var a,i;n(69070),a=[t,n(10520),n(39968),n(85626)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var r={tab:"citedBy",selector:"."+n.default.tabs.cit+",#"+n.default.tabs.cit,url:a.default.customConfig.citedByUrl,errorString:i.default.citedBy_error,previewString:i.default.citedBy_preview,emptyString:i.default.citedBy_empty,offlineString:i.default.citedBy_offline,dataRes:"citedBy",icon:"format_quote",type:"citations",tabClass:".citedby-list",$el:void 0,init:function(){this.$el=$("#"+n.default.panes.cit)}};t.default=r}.apply(t,a))||(e.exports=i)},24755:function(e,t,n){var a,i;n(69070),a=[t,n(10520),n(39968),n(85626)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var r={tab:"recommendations",selector:"."+n.default.tabs.recommended+",#"+n.default.tabs.recommended,url:a.default.customConfig.recommendationsUrl,errorString:i.default.recommendations_error,previewString:i.default.recommendations_preview,emptyString:i.default.recommendations_error,offlineString:i.default.recommendations_offline,dataRes:"recommendations",icon:"remove_from_queue",type:"display",tabClass:".recommendation",enabled:a.default.customConfig.recommendedEnabled,$el:void 0,init:function(){this.$el=$("#"+n.default.panes.recommended)}};t.default=r}.apply(t,a))||(e.exports=i)},69903:function(e,t,n){var a,i;n(69070),a=[t,n(10520),n(39968),n(85626)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var r={tab:"ref",selector:"."+n.default.tabs.ref+",#"+n.default.tabs.ref,url:a.default.customConfig.referencesUrl,errorString:i.default.references_error,previewString:i.default.references_preview,emptyString:i.default.references_empty,offlineString:"",dataRes:"references",icon:"remove_from_queue",type:"display",tabClass:".references-list",$el:void 0,init:function(){this.$el=$("#"+n.default.panes.ref)}};t.default=r}.apply(t,a))||(e.exports=i)},53420:function(e,t,n){var a,i;n(69070),a=[t,n(26699),n(32023),n(74916),n(23123),n(10520),n(24221),n(99427),n(32153),n(64530),n(85626),n(39968),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p){"use strict";function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=g(r),s=g(s),l=g(l),u=g(u),d=g(d),f=g(f),c=g(c),p=g(p);var m={tab:r.default.tabs.fig,pane:r.default.panes.fig,tips:{name:"figures",text:f.default.figures,title:f.default.figures_title,tab:r.default.tabs.fig,pane:r.default.panes.fig},loadTab:function(){var e=this,t=s.default.contentActions.shouldGetFiguresFromContent(),n=$("#"+e.pane);if(c.default.customConfig.epubActions.preview)p.default.handleErrorLoadingData(n,f.default.data_preview,"visibility","","",!0);else if(t)s.default.contentActions.getFiguresFromContent().then((function(t){if(t.media&&0===t.media.length){if(l.default.isOffline())return void p.default.handleErrorLoadingData(n,f.default.figures_offline,"wifi","","offline");e.fetchFiguresFromServer(e,n)}m.populateData(t),n.data("loaded",!0),d.default.renderMath(n)})).catch((function(e){console.error("Error fetching all figures from Content File.",e)}));else{if(l.default.isOffline())return void p.default.handleErrorLoadingData(n,f.default.figures_offline,"wifi","","offline");e.fetchFiguresFromServer(e,n,e.pane)}},fetchFiguresFromServer:function(e,t){var n=s.default.contentActions.shouldGetFiguresFromContent();EREADER.utils.getData(c.default.customConfig.figuresUrl).done((function(a){a.error&&!n?s.default.contentActions.getFiguresFromContent().then((function(e){m.populateData(e),t.data("loaded",!0)})).catch((function(){p.default.handleErrorLoadingData(t,f.default.figures_error,"remove_from_queue","","display")})):(a=e.splitSubFigures(a),m.populateData(a),t.data("loaded",!0))})).fail((function(e){404===e.status?p.default.handleErrorLoadingData(t,f.default.figures_empty,"image","","content"):p.default.handleErrorLoadingData(t,f.default.figures_error,"remove_from_queue","","display")}))},splitSubFigures:function(e){var t=e.media||e.figures;if(!0===e.error)return e;if(void 0!==t){for(var n=t.length,a=[],i=[],o=0;o<n;o++){var r=t[o];if(void 0!==r.graphic){var s=r.graphic.length;if(s>0)for(var l=0;l<s;l++){var u={};u.alt=r.alt,u.caption=r.caption,u.subCaption=r["sub-caption"],u.id=r.id,u.graphic=r.graphic[l],u.desc=r.desc,u.bookmark=r.bookmark,u.removeDownload="do-not-distribute"===r.graphic[l].usage,a.push(u)}}else a.push(r)}return i.media=a,i}},emptyError:{text:f.default.figures_empty,icon:"image"},populateData:function(e){d.default.populateData(e,this.pane,this.emptyError),$(document).on("click",".figure__caption figcaption a",(function(e){e.preventDefault(),e.stopPropagation();var t=this.href.includes(window.location.origin),n=this.href.split("/");t?u.default.openContentUsingUrl(n):window.open(this.attributes.href.value,"_blank")}))}},v=m;t.default=v}.apply(t,a))||(e.exports=i)},32515:function(e,t,n){var a,i;n(69070),a=[t,n(10520),n(99427),n(34622),n(64530),n(85626),n(39968),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=u(n),a=u(a),i=u(i),o=u(o),r=u(r),s=u(s),l=u(l);var d={tab:n.default.tabs.media,pane:n.default.panes.media,tips:{name:"media",text:r.default.media,title:r.default.media_title,tab:n.default.tabs.media,pane:n.default.panes.media},loadTab:function(){var e=$("#"+this.pane);a.default.isOffline()?l.default.handleErrorLoadingData(e,r.default.media_offline,"wifi","","offline"):s.default.customConfig.epubActions.preview?l.default.handleErrorLoadingData(e,r.default.data_preview,"visibility","","",!0):EREADER.utils.getData(s.default.customConfig.mediaUrl).done((function(t){t=o.default.checkAndModifyMedia(t),d.populateData(t),e.data("loaded",!0),o.default.addWaveForms(),$(window).on("mediaPlayerLoaded",(function(){i.default.addVideoPlayer(t)})),i.default.setup()})).fail((function(t){404===t.status?l.default.handleErrorLoadingData(e,r.default.media_empty,"image","","content"):l.default.handleErrorLoadingData(e,r.default.media_error,"remove_from_queue","","display")}))},emptyError:{text:r.default.media_empty,icon:"video_library"},populateData:function(e){o.default.populateData(e,this.pane,this.emptyError)}},f=d;t.default=f}.apply(t,a))||(e.exports=i)},44128:function(e,t,n){var a,i;n(69070),a=[t,n(10520),n(99427),n(64530),n(85626),n(16031),n(39968),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=u(n),a=u(a),i=u(i),o=u(o),r=u(r),s=u(s),l=u(l);var d={tab:n.default.tabs.suppl,pane:n.default.panes.suppl,tips:{name:"supplements",text:o.default.supplements,title:o.default.supplements_title,tab:n.default.tabs.suppl,pane:n.default.panes.suppl},loadTab:function(){var e=$("#"+this.pane),t=s.default.customConfig.materialTabs;a.default.isOffline()?l.default.handleErrorLoadingData(e,o.default.supplements_offline,"wifi","","offline"):s.default.customConfig.epubActions.preview?l.default.handleErrorLoadingData(e,o.default.data_preview,"visibility","","",!0):t.supplementsLinkOut&&t.linkOutUrl?(e.html((0,r.default)({settings:{linkOutUrl:t.linkOutUrl}})),$("a#supplements-link-out").on("click",(function(e){e.stopPropagation()}))):EREADER.utils.getData(s.default.customConfig.supplementsUrl).done((function(t){t=i.default.checkAndModifyMedia(t),d.populateData(t),i.default.addWaveForms(),e.data("loaded",!0)})).fail((function(t){404===t.status?l.default.handleErrorLoadingData(e,o.default.supplements_empty,"image","","content"):l.default.handleErrorLoadingData(e,o.default.supplements_error,"perm_media","","content")}))},emptyError:{text:o.default.supplements_empty,icon:"perm_media"},populateData:function(e){i.default.populateData(e,this.pane,this.emptyError)}},f=d;t.default=f}.apply(t,a))||(e.exports=i)},35665:function(e,t,n){var a,i;n(69070),a=[t,n(27852),n(69826),n(41539),n(73210),n(74916),n(15306),n(10520),n(99427),n(64530),n(85626),n(39968),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p){"use strict";function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,l=g(l),u=g(u),d=g(d),f=g(f),c=g(c),p=g(p);var m={tab:l.default.tabs.tables,pane:l.default.panes.tables,tips:{name:"tables",text:f.default.tables,title:f.default.tables_title,tab:l.default.tabs.tables,pane:l.default.panes.tables},loadTab:function(){var e=this,t=$("#"+e.pane);u.default.isOffline()?p.default.handleErrorLoadingData(t,f.default.tables_offline,"wifi","","offline"):c.default.customConfig.epubActions.preview?p.default.handleErrorLoadingData(t,f.default.data_preview,"visibility","","",!0):EREADER.utils.getData(c.default.customConfig.tablesUrl).done((function(n){n=e.splitSubTables(n),m.populateData(n),t.data("loaded",!0),d.default.renderMath(t)})).fail((function(e){404===e.status?p.default.handleErrorLoadingData(t,f.default.tables_empty,"image","","content"):p.default.handleErrorLoadingData(t,f.default.tables_error,"remove_from_queue","","display")}))},splitSubTables:function(e){if(!0===e.error)return e;if(void 0!==e.media){for(var t=e.media.length,n=[],a={},i=0;i<t;i++){var o,r=e.media[i],s="table",l=r.title.endsWith(".")?"":".";if(void 0!==r.tables?o=r.tables:void 0!==r.graphic&&(o=r.graphic,s="graphic"),o){var u=o.length;if(u>0)for(var d=0;d<u;d++){var f={};f.caption=r.caption,f.id=r.id,f.title=1!==u?r.title+l+(d+1):r.title,f.footnotes=r.footnotes,f[s]=o[d],n.push(f)}}else n.push(r)}return a.media=n,a}},downloadLinks:function(){var e=$("#"+this.pane);d.default.downloadLinks(e,this.pane),$("#"+this.pane+" .article__tabFigure").each((function(){var e=$(this),t=e.find(".figure__table");e.find(".table__download").on("click",(function(n){n.preventDefault();var a=$(t[0].outerHTML);$.each(a.find("img"),(function(e,t){$(t).attr("src",t.src)}));var i=a[0].outerHTML,o=document.createElement("a"),r=e.find(".figure__title span").text().replace(/\s\s+/g," ").trim()+".html";if(window.navigator.msSaveBlob){var s=new Blob([i],{type:"text/plain;charset=utf-8;"});window.navigator.msSaveOrOpenBlob(s,r)}else o.setAttribute("download",r),o.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(i)),o.click()}))}))},emptyError:{text:f.default.tables_empty,icon:"subtitles"},populateData:function(e){var t=this.pane;e.isTable=!0,d.default.populateData(e,t,this.emptyError,(function(){m.downloadLinks(this,t)}))}},v=m;t.default=v}.apply(t,a))||(e.exports=i)},64530:function(e,t,n){var a,i;n(69070),a=[t,n(74916),n(64765),n(68309),n(69826),n(41539),n(89554),n(85626),n(39968),n(10520),n(82198),n(62684),n(98395),n(72288),n(83464),n(43397),n(37070)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,l=_(l),u=_(u),d=_(d),f=_(f),c=_(c),p=_(p),g=_(g),m=_(m),v=_(v),h=_(h);var b={tablePane:d.default.panes.tables,isSingleTab:!1,renderMath:function(e){if(e.html().search(/<(\w+:|)(?=math)/)>=0)if(window.MathJax)MathJax.Hub.Queue(["Typeset",MathJax.Hub]);else if(!self.mathJaxInjected){var t=document.createElement("script");t.type="text/javascript",t.src=u.default.mathJaxUrl,t.onload=function(){MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0}),MathJax.Hub.Queue(["Typeset",MathJax.Hub])},document.head.appendChild(t),self.mathJaxInjected=!0}},addWaveForms:function(){var e={width:"100%"};u.default.customConfig.standaloneMode||(e.soundWaveUrl="/cloud-reader/dist/images/soundwave.svg",e.soundWaveWhiteUrl="/cloud-reader/dist/images/soundwave_white.svg"),$.justwave(e),$(".justwave").addClass("waveform").removeClass("justwave")},checkAndModifyMedia:function(e){var t=e.media;if(t){for(var n=document.createElement("audio"),a=0;a<t.length;a++)t[a].audio&&!n.canPlayType(t[a].type)&&(t[a].streamed=!1);$(n).remove(),e.media=t}return e},populateData:function(e,t,n,a){var i=$("#"+t),o=e.media||e.figures;if(o&&0===o.length||e&&e.error)h.default.handleErrorLoadingData(i,n.text,n.icon,"","content");else{var r=u.default.customConfig.mediaPlayersConfig,s=r.player,_={data:e,tabConfig:d.default,isMaterialDownloadable:u.default.customConfig.isMaterialDownloadable,isFlowPlayerEnabled:r.enabled&&s.enabled&&"flowplayer"===s.name,isJWPlayerEnabled:r.enabled&&s.enabled&&"jwplayer"===s.name,strings:l.default};t===b.tablePane&&(o.tableImage=function(){return this.large||this.medium||this.tif},o.downloadTableImage=function(){return this.tif||this.large||this.medium});var E=(0,g.default)(_);i.html($((0,m.default)({settings:_,figureEntry:E}))),b.isSingleTab&&i.addClass(v.default.tabs_info.active_class),f.default.init(i),a?a():b.downloadLinks(i,t);var y=i.find(".truncatable");p.default.truncate(y),c.default.scrollingTab(i),i.find(".figure__image").loadInview(),$(document).on("click",".call_for_figures",(function(e){var t=$(this),n=t.next("dd"),a=t.attr("data-url");EREADER.utils.getData(a).done((function(e){n.html((0,g.default)({data:e})),t.removeClass("call_for_figures")}))}));var w=document.querySelectorAll("figcaption .title, figcaption p");[].forEach.call(w,(function(e){for(var t=!1,n=e.childNodes,a=0;a<n.length;a++)if(n[a].nodeType===n[a].TEXT_NODE){t=!0;break}t&&e.classList.add("hasText")}))}},downloadLinks:function(e,t){e.find(".media__download").on("click",(function(e){var n=$(this);u.default.customConfig.materialTabs.openDownloadLinkInNewTab&&t!==d.default.panes.fig&&n.removeAttr("download"),e.stopPropagation()}))}},E=b;t.default=E}.apply(t,a))||(e.exports=i)},37070:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(45380),n(85626)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=r(i),o=r(o);var s={handleErrorLoadingData:function(e,t,n,a,r,s){var l={settings:{icon:n,class:a,errorType:r,text:t}};s&&(l.title=o.default.data_title),e.find(".panel-error").length||(e.addClass("has-error"),e.html((0,i.default)(l)))}};t.default=s}.apply(t,a))||(e.exports=i)},98927:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539)],void 0===(i=function(e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var i={getState:function(e,t){return"true"===e.attr(t)},setState:function(e,t,n){e.attr(t,n)},toggleState:function(e,t){var n=!i.getState(e,t);i.setState(e,t,n)}},o={selector:"a, button, iframe",enablePanelFocus:function(e){o.disableAll(),e.focus(),e.find(o.selector).each((function(){o.enableElementFocus($(this))}))},disablePanelFocus:function(e){o.enableAll(),e.find(o.selector).each((function(){o.disableElementFocus($(this))}))},enableElementFocus:function(e){"true"===e.attr("aria-disabled")||i.setState(e,"tabindex","0")},disableElementFocus:function(e){i.setState(e,"tabindex","-1")},enableAll:function(){$(o.selector).each((function(){o.enableElementFocus($(this))}))},disableAll:function(){$(o.selector).each((function(){o.disableElementFocus($(this))}))}},r={WaiAria:i,KeyboardFocus:o};t.default=r}.apply(t,a))||(e.exports=i)},65714:function(e,t,n){var a,i;n(69070),a=[t,n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var d={searchInArray:function(e,t,n){for(var a=0;a<e.length;a++){if((void 0===n?e[a]:e[a][n])===t)return a}},pushInToArray:function(e,t,n,a){var i=a||t[n];void 0!==u(i)&&e.push(i)},_manageSuppressed:function(e,t,n,a){var i=$.grep(e,(function(e,t){return-1==$.inArray(e,a)}));d._pushTempArray(t,i,n)},_updateObjectList:function(e,t,n){for(var a in e)n.push(t[d.searchInArray(t,e[a])])},_returnSuppressedArray:function(e,t){return $.grep(e,(function(e,n){return-1==$.inArray(e,t)}))},_pushTempArray:function(e,t,n){for(var a in t){d.searchInArray(n,t[a],"name")>=0&&e.push(n[d.searchInArray(n,t[a],"name")])}}},f=d;t.default=f}.apply(t,a))||(e.exports=i)},23973:function(e,t,n){var a,i;n(69070),a=[t,n(41539),n(89554),n(74916),n(64765),n(23123),n(82772),n(4723),n(83710),n(39714),n(65069),n(47042),n(69826),n(66992),n(78783),n(33948),n(60285),n(41637),n(39968),n(43397),n(24221)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y){"use strict";function w(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,b=w(b),E=w(E),y=w(y),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var R=$(window),A={getURLQueryParams:function(){var e={},t=window.location.search;if(t&&t.length)for(var n=(t=t.substring(1)).split("&"),a=0;a<n.length;a++){var i=n[a].split("=");i.length>1&&(e[i[0]]=decodeURIComponent(i[1]))}return e},getEbookUrl:function(e){var t=b.default.customConfig;if(t){var n=t.epubConfig;if(n){var a=n.overrideEpubUrlParam,i=n.epubUrl;if(!0===a&&i&&0!==i.length)return i}}return e},getData:function(e,t,n){return $.ajax({url:e,type:t||"GET",async:n||!0})},isIE11:function(){return navigator.userAgent.indexOf("Trident/7")>-1},isIosDevice:function(){return!!navigator.platform.match(/iPhone|iPod|iPad/)},isSafari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isEdge:function(){return navigator.userAgent.indexOf("Edge")>-1},isEdgePrivateMode:function(){return!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent)},isFirefox:function(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1},displaySpinner:function(e){e.html('<p class="content-loader"></p>')},forceStyleRecalculation:function(e){e.hide(),e.height(),e.show()},isReaderStandaloneMode:function(){return void 0!==b.default.customConfig.standaloneMode&&b.default.customConfig.standaloneMode},isTouchDevice:function(){var e=!1;return("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(e=!0),e},ltTablet:function(){return R.width()<1024},isMobile:function(){return R.width()<768},isRealMobileOrTablet:function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)||/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)},isMobileHeight:function(){return R.height()<481},isTablet:function(){return R.width()>767&&R.width()<1025},gtTablet:function(){return R.width()>1024},isLargeDesktop:function(){return R.width()>1440},getRunTimeReaderConfig:function(){return{offline:window.READER_OFFLINE}},fetchFileContentsText:function(e,t){$.ajax({url:e,dataType:"text",async:!1,success:function(e){t(e)}})},getEpisodeType:function(){return b.default.customConfig.sharedAccessConfig.isShared?"share":b.default.customConfig.epubActions.preview?"preview":"full"},generateUID:function(){this.length=32,this.timestamp=+new Date;for(var e,t,n=this.timestamp.toString().split("").reverse(),a="",i=0;i<this.length;++i){a+=n[(e=0,t=n.length-1,Math.floor(Math.random()*(t-e+1))+e)]}return b.default.customConfig.doi+"_"+a},isOffline:function(){return window.READER_OFFLINE},setAttributes:function(e,t){for(var n in t)e.setAttribute(n,t[n])},chunkArray:function(e,t){for(var n,a=e.length,i=[],o=0;o<a;o+=t)n=e.slice(o,o+t),i.push(n);return i},isMaterialViewerOpen:function(){return $(document).find(".material-viewer").hasClass("open")},isFullScreen:function(){return void 0!==document.webkitIsFullScreen&&!0===document.webkitIsFullScreen||void 0!==document.mozFullScreen&&!0===document.mozFullScreen||void 0!==document.msFullscreenElement&&null!==document.msFullscreenElement},isAd:function(e){return"CustomReaderCamp-DYNAMIC"===e||"CustomReaderCamp-TOP"===e||"CustomReaderCamp-BOTTOM"===e},setIfPropertyNotPresent:function(e,t,n){void 0===e[t]&&(e[t]=n)},fixPositionAfterResizing:function(e,t){var n=t[0].offsetTop/e.offsetTop,a=e.relativeOffsetTop*n;$(y.default.contentActions.getReadingContainerSelector())[0].scrollTop=t[0].offsetTop+a},scrolledContentFocus:function(){if(!EREADER.utils.isTouchDevice()&&(!(n=$("#reader-right-panel")[0])||!n.contains(document.activeElement))){var e=$(E.default.reader_info.scrolled_content_frame),t=$(E.default.reader_info.fixed_book_frame);e.length?e.focus():t.length&&t.focus()}var n},getMathJaxUrl:function(){var e=b.default.mathJaxUrl;try{if(EREADER.utils.isOffline())if(LIT.Reader.MathJaxUrl)e=LIT.Reader.MathJaxUrl;else{var t=new XMLHttpRequest;t.open("GET",e,!1),t.onload=function(){200===t.status?e=window.URL.createObjectURL(new Blob([t.response],{type:"text/javascript"})):console.error("Failed to load MathJax in offline mode")},t.onerror=function(){console.error("Failed to load MathJax in offline mode")},t.send()}}catch(e){console.error("Failed to load MathJax in offline mode")}return e}};t.default=A}.apply(t,a))||(e.exports=i)},33279:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(29253),n(24221),n(43397)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=s(o),r=s(r);var l={isPDF:function(){return o.default.displayActions.isPDF()},isZoomButtonsDisplayed:function(){return"none"!==$(".zoom-wrapper").css("display")},shouldUseLoader:function(){return o.default.displayActions.shouldUseLoader()},isScrolling:function(){return o.default.displayActions.isScrolling()},isFacingPages:function(){return o.default.displayActions.isFacingPages()},isBookViewScrollable:function(e){return o.default.displayActions.isBookViewScrollable()},toggleDisplayFormat:function(){var e=o.default.displayActions.toggleDisplayFormat();$("#option-columns").find("input").prop("disabled",e)},reset:function(){var e=$(r.default.checklayout_info.reading_area),t=$(r.default.navbar_info.id);e.removeClass(r.default.checklayout_info.facing),e.removeClass(r.default.checklayout_info.fixed),e.removeClass(r.default.checklayout_info.scroll),t.removeClass(r.default.checklayout_info.fixed)},check:function(){var e=$(r.default.checklayout_info.reading_area);if(l.reset(),l.isPDF()&&(e.addClass(r.default.checklayout_info.fixed),$(r.default.navbar_info.id).addClass(r.default.checklayout_info.fixed)),$(r.default.navbar_info.id).find(".flex-container").removeClass("hidden"),$(r.default.dropdown_info.trigger).each((function(){"none"===$(this).css("display")&&($(this).hasClass("reflow")||$(this).hasClass("fxl"))&&$(this).remove()})),!l.isPDF()){var t=$(".js__paging-select");t.attr("title",t.data("alt-title"))}l.isScrolling()?e.addClass(r.default.checklayout_info.scroll):l.isFacingPages()&&e.addClass(r.default.checklayout_info.facing)}},u=l;t.default=u}.apply(t,a))||(e.exports=i)},65328:function(e,t,n){var a,i;n(69070),a=[t,n(74916),n(15306)],void 0===(i=function(e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var i={init:function(e,t,n,a,i,o,r){var s=2;void 0===a&&(a=!1),void 0===i&&(i=""),void 0===r&&(r=!1),n&&(s=1);var l=e.css("line-height").replace("px","")*t;e.height()>s*l&&($clamp(e[0],{clamp:l+"px",useNativeClamp:!1,truncationChar:i,truncationHTML:o,animate:r}),e.addClass("truncated"),e.css({"max-height":l,overflow:"hidden"}))},destroy:function(e){e.html(e.data("originalText")),e.removeClass("truncated"),e.css({"max-height":"",overflow:"unset"})}};t.default=i}.apply(t,a))||(e.exports=i)},34622:function(e,t,n){var a,i;n(69070),a=[t,n(68309),n(43397),n(39968),n(99427)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=r(a),i=r(i),o=r(o);var s={setup:function(){var e=i.default.customConfig.mediaPlayersConfig;o.default.isOffline()||e&&e.enabled&&this.setupPlayer(e)},setupPlayer:function(e){var t=e.player;void 0!==t&&t.enabled&&("flowplayer"===t.name?this.setupFlowPlayer(t):"jwplayer"===t.name&&this.setupJWPlayer())},setupFlowPlayer:function(e){var t=this.getScriptEl(e.playerScript),n=this.getCssLinkEl(e.css),a=this.getScriptEl("//releases.flowplayer.org/hlsjs/flowplayer.hlsjs.min.js");a.onload=function(){$(window).trigger("mediaPlayerLoaded")},document.getElementsByTagName("head")[0].appendChild(n),document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("head")[0].appendChild(a)},setupJWPlayer:function(){var e=i.default.customConfig.standaloneMode?"/Shared/js/vendors/optional-vendors/jwplayer.js":"/cloud-reader/dist/jwplayer.js",t=this.getScriptEl(e);t.onload=function(){$(window).trigger("mediaPlayerLoaded")},document.getElementsByTagName("head")[0].appendChild(t)},getCssLinkEl:function(e){var t=document.createElement("link");return t.href=e,t.rel="stylesheet",t},getScriptEl:function(e){var t=document.createElement("script");return t.src=e,t.type="text/javascript",t.async=!0,t},addVideoPlayer:function(e){var t=i.default.customConfig.mediaPlayersConfig,n=t.player,a=t.enabled&&n.enabled&&"flowplayer"===n.name,o=t.enabled&&n.enabled&&"jwplayer"===n.name;if(!0===e.error)return e;if(void 0!==e.media){for(var r=e.media,l=0;l<r.length;l++)r[l].video&&(a&&"undefined"!=typeof flowplayer?s.initFlowPlayer("#player_container-"+r[l].id,n.key):o&&"undefined"!=typeof jwplayer&&jwplayer("player_container_jw-"+r[l].id).setup({file:r[l].streamUrl,key:n.key,width:"100%",height:"210px"}));s.pauseMediaWhenPlayAnother(a,o),s.pauseMediaWhenLeftMenuIsClosed(a,o),s.pauseMediaWhenMaterialViewerIsOpened(a,o)}},initFlowPlayer:function(e,t){$(e).flowplayer({swf:"//releases.flowplayer.org/6.0.5/flowplayer.swf",swfHls:"//releases.flowplayer.org/6.0.5/flowplayerhls.swf",script:"//releases.flowplayer.org/6.0.5/embed.min.js",key:t,tooltip:!1,wmode:"opaque",embed:!1}).on("error",(function(){$(e+" .fp-message").html("An error has occurred trying to display this video. Please reload the page. If reloading the page doesn't work then please contact the support administrator.")})).on("resume",(function(){for(var e=$(this).data("flowplayer-instance-id"),t=$(".flowplayer"),n=0;n<t.length;n++)n!==e&&flowplayer(n).pause();s.pauseAudioPlayer()}))},pauseMediaWhenMaterialViewerIsOpened:function(e,t){var n=this;$(document).on("show.material-viewer hide.material-viewer",(function(){$("video, audio").each((function(){this.pause()})),n.pauseJWPlayer(t)}))},pauseMediaWhenLeftMenuIsClosed:function(e,t){var n=this;$(a.default.left_panel_info.close_btn).on("click",(function(){$("body").hasClass("info-visible")||($("video, audio").each((function(){this.pause()})),n.pauseJWPlayer(t))}))},pauseMediaWhenPlayAnother:function(e,t){var n=this;$("video, audio").each((function(){$(this).on("play",(function(){$("video, audio").not(this).each((function(){this.pause()})),n.pauseJWPlayer(t)}))})),this.pauseJWPlayerWhenPlayAnother(t)},pauseJWPlayerWhenPlayAnother:function(e){if(e){var t=$(".jwplayer, object"),n=[];t.each((function(e,t){n.push(t.id)})),$.each(n,(function(e,t){jwplayer(t).on("play",(function(){$.each(n,(function(e,n){if(t===n)return!0;jwplayer(n).pause(!0)})),s.pauseAudioPlayer()}))}))}},pauseJWPlayer:function(e){e&&$(".jwplayer, object").each((function(){"PLAYING"!==jwplayer(this).getState().toUpperCase()&&"BUFFERING"!==jwplayer(this).getState()||jwplayer(this).pause(!0)}))},pauseFlowPlayer:function(e){if(e)for(var t=$(this).data("flowplayer-instance-id"),n=$(".flowplayer"),a=0;a<n.length;a++)a!==t&&flowplayer(a).pause()},pauseAudioPlayer:function(){$("audio").each((function(){this.pause()}))},pauseAllPlayers:function(e,t){s.pauseJWPlayer(t),s.pauseFlowPlayer(e),s.pauseAudioPlayer()}},l=s;t.default=l}.apply(t,a))||(e.exports=i)},17261:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(43397),n(98927)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=r(i),o=r(o);var s={headerClickHandlerAdded:!1,init:function(){var e=$(i.default.accordion_info.accordion);e.length&&e.each((function(){void 0===$(this).attr("role")&&($(this).attr({role:"tablist","aria-multiselectable":"true"}),s.initStates($(this).find(i.default.accordion_info.accordion_head)),$(this).find(i.default.accordion_info.accordion_body).attr({role:"tabpanel"}))})),this.headerClickHandlerAdded||($(document).on("click",i.default.accordion_info.accordion_head,(function(){s.toggle($(this))})),this.headerClickHandlerAdded=!0)},initStates:function(e){e.attr({role:"tab","aria-selected":"false","aria-expanded":"false","aria-disabled":"false"}),e.attr("tabindex","0"),e.hasClass(i.default.accordion_info.disabled)&&(o.default.WaiAria.toggleState(e,"aria-disabled"),e.attr("tabindex","-1"))},close:function(e){$(i.default.accordion_info.accordion).hasClass(i.default.accordion_info.expandable_class)||$(i.default.accordion_info.accordion_head+'[aria-expanded="true"]').each((function(){$(this).is(e)||(o.default.WaiAria.toggleState($(this),"aria-expanded"),o.default.WaiAria.toggleState($(this),"aria-selected"),$(this).next(i.default.accordion_info.accordion_body).slideToggle())}))},toggle:function(e){var t=e.hasClass(i.default.accordion_info.disabled);s.close(e),t||(o.default.WaiAria.toggleState(e,"aria-expanded"),o.default.WaiAria.toggleState(e,"aria-selected"),e.next(i.default.accordion_info.accordion_body).slideToggle((function(){var t=$('.accordion-header[aria-expanded="true"]');t.length>0&&(e.offset().top<0||!EREADER.utils.isMobile())&&t[0].scrollIntoView(!1),e.attr("aria-expanded")&&e.parent(".help-tip")[0]&&e.parent(".help-tip")[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})})))}},l=s;t.default=l}.apply(t,a))||(e.exports=i)},54417:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(43397),n(24221)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=r(i),o=r(o);var s,l=-1,u=!1,d={init:function(){(s=$(i.default.activetoc_info.toc)).on("click","a",(function(){var e=$(this);s.find("a").removeClass(i.default.activetoc_info.active),e.addClass("clicked "+i.default.activetoc_info.active),u=!0})),(EREADER.utils.isMobile()||EREADER.utils.isMobileHeight())&&$("#chapters").on("click",(function(){d.scrollTocIntoView(!0)}))},updateToc:function(){var e=o.default.contentActions.tocActions.getToMakeActive(s,u),t=s.find("a.clicked");t.length>0&&(e=t,t.removeClass("clicked")),e&&1===e.length?this.changeActive(e,o.default.contentActions.tocActions.getIndex()):-1===l&&(e=s.find("[href]").first(),d.changeActive(e,0)),u=!1},changeActive:function(e,t){var n=s.find("."+i.default.activetoc_info.active);void 0!==n&&(n.removeClass(i.default.activetoc_info.active),n.attr("tabindex","-1")),void 0!==e&&(e.addClass(i.default.activetoc_info.active),e.attr("tabindex","60"),d.scrollTocIntoView()),void 0!==t&&(l=t)},scrollTocIntoView:function(e){var t=s.find("."+i.default.activetoc_info.active);if(1===t.length)try{t[0].scrollIntoView({behavior:e?"instant":"smooth",block:"center",inline:"nearest"})}catch(e){t[0].scrollIntoView(!0)}}},f=d;t.default=f}.apply(t,a))||(e.exports=i)},99004:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(68309),n(32564),n(43397),n(98927),n(23100)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=u(r),s=u(s),l=u(l),function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();var d={timeout:null,events:{open:{name:"dropdown:open",config:{cancelable:!0}},opened:{name:"dropdown:opened"},close:{name:"dropdown:close",config:{cancelable:!0}},closed:{name:"dropdown:closed"}},init:function(){$(r.default.dropdown_info.widget).length>0&&$(r.default.dropdown_info.widget).each((function(){var e=$(this);e.data("dropdown")||(d.initDropdown(e),e.data("dropdown",!0))}))},initDropdown:function(e){var t=e.find(r.default.dropdown_info.trigger);0!==t.length&&(t.data("initialized")||(s.default.WaiAria.setState(t,"aria-haspopup","true"),s.default.WaiAria.setState(t,"aria-expanded","false"),t.data("initialized",!0),t.off("click.initDropdown",d.dropdownClicked).on("click.initDropdown",d.dropdownClicked)),(t.hasClass(r.default.dropdown_info.disabled_class)||t.hasClass("js__disabled__permissions"))&&(s.default.WaiAria.setState(t,"aria-disabled",!0),t.attr("tabindex","-1")))},dropdownClicked:function(e){var t=$(e.currentTarget),n=t.hasClass("disabled");if(t.blur(),t.is(r.default.right_panel_info.close_btn)||$("body").removeClass(r.default.right_panel_info.panel_class),!n){d.toggleDropdown(t,e);var a=$("#"+r.default.alertpopups_info.alert_id);a&&a.hasClass("access-tip")&&l.default.removePopup()}},toggleDropdown:function(e,t){var n=!s.default.WaiAria.getState(e,"aria-expanded"),a=n?d.events.open:d.events.close;if(e[0].dispatchEvent(new CustomEvent(a.name,a.config))){if(d.reset(!n),n&&($("body .tooltip").remove(),$("body").attr("data-dropdown","active"),s.default.WaiAria.setState(e,"aria-expanded",n),e.next().one("transitionend",(function(){e[0].dispatchEvent(new CustomEvent(d.events.opened.name))})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.addClass("fadeIn")}),1),$(".scrollToTop").scrollTop(0)),e.removeClass("updated"),n){if(EREADER.utils.ltTablet())$(r.default.var_container).hasClass(r.default.left_panel_info.panel_class)&&$(r.default.left_panel_info.mobile_btn).trigger("click");var i=e.is(r.default.save_offline_info.save_offline_btn)?e.closest(".navbar-right"):e.parent(),o=i.data("persist")?' style="display: none;"':"",l='<div id="'+r.default.dropdown_info.overlay_id+'"'+o+"></div>";i.append(l),$("#"+r.default.dropdown_info.overlay_id).off("click.toggleDropdown",d.reset).on("click.toggleDropdown",d.reset),e.focus()}t.preventDefault()}},reset:function(e,t){var n=r.default.dropdown_info.trigger+'[aria-expanded="true"]';n+=t?":not("+r.default.right_panel_info.close_btn+")":"";var a=$(n);0!==a.length||e?a.each((function(){var e=$(this),t=e.is(r.default.save_offline_info.save_offline_btn)?e.closest(".navbar-right"):e.parent();if(e.next().one("transitionend",(function(){s.default.WaiAria.setState(e,"aria-expanded",!1),e[0].dispatchEvent(new CustomEvent(d.events.closed.name))})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.removeClass("fadeIn"),$("body").removeAttr("data-dropdown")}),1),t.find("#"+r.default.dropdown_info.overlay_id).remove(),t.hasClass("pagination")){var n=$(r.default.pagination_info.page_input);n.val(""),n.attr("value","")}})):$("body").removeAttr("data-dropdown")}},f=d;t.default=f}.apply(t,a))||(e.exports=i)},90793:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(74916),n(85626),n(33279),n(86370)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=l(o),r=l(r),s=l(s);var u={cloneContainer:".printRanges",cloneEl:".cloned",errorContainer:".print_errors",cloneError:"error",cloneSuccess:"success",tagsViewOnly:"viewOnly",tagInputContainer:".tagsInput",tagInputs:'[data-role="tagsinput"]',init:function(){var e=$(document);$("body").off("input.formInput","input").on("input.formInput","input",(function(e){$(e.currentTarget).attr("data-empty",!e.currentTarget.value),$(e.currentTarget).parents(".fieldWithButton").attr("data-empty",!e.currentTarget.value)}));var t=u.cloneContainer+" .add";e.off("click.formClone",t).on("click",t,(function(e){u.clone.add($(this)),window.dispatchEvent(new Event("CloneAdd"))}));var n=u.cloneContainer+" .remove";e.off("click.formRemoveCloned",n).on("click.formRemoveCloned",n,(function(e){u.clone.remove($(this)),window.dispatchEvent(new Event("CloneRemove"))}));var a="input[type=number]";e.off("keydown.form paste.form",a).on("keydown paste",a,(function(e){return Keyboard.comparePressedKey(e,["0","1","2","3","4","5","6","7","8","9","Enter","Backspace","Delete","Tab","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"])})),u.tags.init()},clone:{add:function(e){e.parents(u.cloneEl).clone().appendTo(u.cloneContainer);var t=$(u.cloneEl).last().find("input");u.error.removeClass(t),t.val("")},remove:function(e){var t=!1;e.parents(".printPopup ").length>0&&(u.error.reset($(".printPreview")),t=!0),e.parents(".cloned").remove(),t&&u.emptyFieldsTest($(".printPreview"))}},emptyFieldsTest:function(e){var t,n=!0;r.default.isPDF()?t=$(".printPageInput"):t=$('input[type="radio"]:checked').next("label").find(".printPageInput");return t.length>0&&t.each((function(t){var a=$(this);if(""===a.val()){n=!1,u.error.addClass(a);var i="";0===$(".emptyInputError").length&&(i='<span class="emptyInputError">'+o.default.printing_error_empty_input+"</span>"),u.error.test(a,e,!0,i)}})),!n},submit:{enable:function(e){e.prop("disabled",!1)},disable:function(e){e.prop("disabled",!0)}},error:{addClass:function(e){e.addClass(u.cloneError)},removeClass:function(e){e.removeClass(u.cloneError)},appendErrorMsg:function(e){$(u.errorContainer).append((0,s.default)({msg:e}))},test:function(e,t,n,a){n?(u.error.addClass(e),u.submit.disable(t),u.error.appendErrorMsg(a)):(u.error.removeClass(e),0===$("input.error").length&&($(u.errorContainer).empty(),u.submit.enable(t)))},reset:function(e){u.error.removeClass($("."+u.cloneError)),$(u.errorContainer).empty(),u.submit.enable(e)}},tags:{init:function(){$(u.tagInputs).tagsinput({tagClass:"",focusClass:"",confirmKeys:[13,44,188],onTagExists:function(e,t){t.hide().fadeIn()}})},mode:{edit:function(){$(u.tagInputContainer).removeClass(u.tagsViewOnly),$(u.tagInputContainer).append('<input type="text"/>')},viewOnly:function(){$(u.tagInputContainer).addClass(u.tagsViewOnly),$(u.tagInputContainer).find("input").remove()}},destroyAll:function(){$(u.tagInputs).tagsinput("destroy")}}},d=u;t.default=d}.apply(t,a))||(e.exports=i)},82198:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(68309),n(74916),n(15306),n(57327),n(47042),n(73210),n(26699),n(32023),n(66992),n(78783),n(33948),n(60285),n(41637),n(39968),n(98395),n(65328),n(98927),n(43397),n(34622),n(62684),n(99004),n(27437),n(85626),n(68822),n(45380),n(39968)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c,p,g,m,v,h,_,b,E,y,w,R,A,C,T,S,O,D){"use strict";function P(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,h=P(h),_=P(_),b=P(b),E=P(E),y=P(y),w=P(w),R=P(R),A=P(A),C=P(C),T=P(T),S=P(S),O=P(O),D=P(D);var I,L,k,x,M,N,F,U,B,j,V,H,K,W,z,G,q,Y,Z,J,X,Q,ee,te,ne,ae,ie,oe,re,se,le,ue=!0,de=0,fe=!1,ce=$(window),pe=$(document),ge=pe.find(".material-viewer"),me=pe.find("figure:not(.holder), .figure:not(.holder)"),ve="",he=null,_e="is-hidden",be="js-open",Ee=!1,ye=window.pageYOffset,we=".download-toggle-hidden",Re={init:function(e){if(Re.append(),Ae.expand(e),!EREADER.utils.isMobile()){var t=B.find(".icon");V.addClass(be),U.addClass(be),t.addClass("flip-horizontal")}ue&&(ue=!1,Ae.control(),EREADER.transpileContent(),ce.on("resize.materialViewer",(function(){EREADER.transpileContent(),Q.hasClass(be)&&!EREADER.utils.isMobile()&&Q.removeClass(be),Ae.truncate()})))},append:function(){if(0===$(".material-viewer").length){var e={isMaterialDownloadable:h.default.customConfig.isMaterialDownloadable,strings:T.default};$("body").append((0,S.default)(e));var t=pe.find(".material-viewer").find(y.default.menudrawer_info.drawer);C.default.initWaiRoles(t),C.default.initTriggers(t)}},destroy:function(){ge.remove()}},Ae={variablesInit:function(){ge=pe.find(".material-viewer"),me=pe.find("#reader-left-panel figure.material-fig"),M=ge.find(".material-viewer_hold_fig"),N=ge.find(".material-viewer_hold_list"),F=ge.find(".material-viewer_figCaption .js__caption"),ve=ge.find(".material-viewer_title_text"),I=h.default.customConfig.mediaPlayersConfig,L=I.player,k=I.enabled&&L.enabled&&"flowplayer"===L.name,x=I.enabled&&L.enabled&&"jwplayer"===L.name,U=ge.find(".material-viewer_cent_left"),B=U.find(".material-viewer_ctrl_caption"),j=ge.find(".material-viewer_top_left .material-viewer_ctrl_caption"),Q=ge.find(".material-viewer_cent_right"),V=ge.find(".material-viewer_cent_center"),H=ge.find(".material-viewer_ctrl_next, .material-viewer_ctrl_prev"),K=ge.find(".material-viewer_navigation"),W=ge.find(".material-viewer_zoom"),z=ge.find(".zoom-in"),G=ge.find(".zoom-out"),q=ge.find(".zoom-fit"),Y=ge.find("figure"),Z=$(".material-viewer_ctrl_browse").parent(),J=$(".grid-view"),X=ge.find(".dropdown-trigger"),ee=ge.find(".media__download"),te=$(".sorting-list"),ne=$(".sorting_title_selection")},control:function(){N.empty(),ge.find("a, button").not(".media__download").each((function(){var e=$(this);e.on({click:function(t){if(t.preventDefault(),t.stopPropagation(),e.blur(),e.hasClass("material-viewer_ctrl_close"))Ae.on.hide(),Ae.sortingMenu.reset();else if(e.hasClass("material-viewer_ctrl_next"))Ae.navigation.next();else if(e.hasClass("material-viewer_ctrl_prev"))Ae.navigation.prev();else if(e.hasClass("material-viewer_ctrl_caption")){var n=B.find(".icon");n.removeClass("flip-horizontal"),EREADER.utils.isMobile()&&$("video, audio").each((function(){this.pause()})),U.hasClass(be)||n.toggleClass("flip-horizontal"),j.toggleClass("active"),V.toggleClass(be),U.toggleClass(be)}else e.hasClass("material-viewer_ctrl_browse")?Ae.gridView($(this)):e.hasClass("material-viewer_ctrl_return")?(Ae.figureView($(this)),Ae.sortingMenu.reset()):e.hasClass("material-viewer_ctrl_sorting")&&(Q.find("[data-panel-mobile]").removeClass("hidden"),Q.toggleClass(be))}})})),pe.keydown((function(e){ge.hasClass("open")&&(Keyboard.comparePressedKey(e,["ArrowLeft"])?Ae.navigation.prev():Keyboard.comparePressedKey(e,["ArrowRight"])?Ae.navigation.next():Keyboard.comparePressedKey(e,["Escape"])&&Ae.on.hide())})),q.on("click",(function(){var e=$(this);e.hasClass("width")?Ae.zoom.fitWidth():e.hasClass("height")&&Ae.zoom.fitHeight()})),R.default.init(),A.default.init();var e=$(".figure__image-btn");e.on("keyup.popup",(function(e){Keyboard.comparePressedKey(e,["Enter"])&&$(this).find(".figure__image").trigger("click")})),e.on("click",(function(e){$(this).find(".figure__image").trigger("click")}))},expand:function(e){Ae.variablesInit(),e.find("figure").each((function(){var e=$(this);function t(t,n,a,i){t.preventDefault(),Ae.sortingMenu.reset(),e.hasClass("ui-disabled")||0===ge.length||0===!M.length||(Ae.updateCenterPanels(!1),he=a,Ae.on.show(n,a,i))}e.data("graphical-abstract-image")||e.data("number",de++),EREADER.utils.isIE11()&&e.find(".figure__image-btn").on("click",(function(t){e.find(".figure__image").trigger("click")})),e.find(".figure__image").on({click:function(n){n.stopPropagation();var a=e.data("number");t(n,e,a,"figure")}}),e.find(".figure__title, .figure__details-title").on({click:function(n){var a=e.data("type"),i=e.data("number"),o=e.data("streamed");"supplement"!==a&&("video"!==a&&"audio"!==a||o)&&t(n,e,i,a)}}),e.find(".table-internal-link").on({click:function(e){var n=$("#"+tabConfig.panes.tables).find("[data-id='"+e.target.id+"']"),a=n.data("number");t(e,n,a,"table")}});var n=e.find("figcaption"),a=0===n.children().length&&!n.text(),i=0===e.find(".html, .desc, .figure__details").length;a&&i||e.find(".figure__caption").addClass("hasDescription")}))},replace:function(e,t){Ae.load.publicationTitle(e),fe=e.data("graphical-abstract-image");var n=Ae.load.material(e);n.data("removeDownload")?(ee.removeAttr("href").addClass("hidden"),$(we).prev().addClass("no-border")):(ee.removeClass("hidden"),$(we).prev().removeClass("no-border"),Ae.load.downloadLinks(e,n,t)),Ae.load.details(e,t),Ae.zoom.check(),Ae.navigation.setStatus(),Ae.truncate()},toggleViewModes:function(e){N.empty(),e?(M.addClass(_e),K.addClass(_e),Z.addClass(_e),J.removeClass(_e),ve.parent().parent().addClass(_e),W.addClass(_e),Ae.updateCenterPanels(!0),$(".material-viewer_top_left .element-view").addClass(_e),$(we).addClass(_e),N.removeClass(_e),me.each((function(){var e=$(this).data("type"),t=$(this).data("id"),n=$(this).data("link"),a="grid-container-"+t;if($(this).hasClass("article__tabFigure")){var i=$(this).clone(!0);_.default.destroy(i.find(".html, .desc, figcaption"));var o=i.find(".label");if(2===o.length&&o.eq(0).text(o.eq(0).text()+" - "+o.eq(1).text()),N.append(i),"video"===e&&n){x?(i.find(".jwplayer").replaceWith("<div class='jwplayer' id='"+a+"'></div>"),jwplayer(a).setup({file:n,key:L.key,width:"100%",height:"100%"}),w.default.pauseJWPlayerWhenPlayAnother(x)):k&&(i.find(".flowplayer").replaceWith("<div class='flowPlayer' id='"+a+"'><video><source type='application/x-mpegurl' src='"+n+"'></video></div>"),w.default.initFlowPlayer("#"+a,L.key))}}})),N.find(".figure__image").loadInview(N),Ae.sortingMenu.init()):fe?(K.addClass(_e),Z.parent().addClass(_e),J.addClass(_e)):(M.removeClass(_e),Z.removeClass(_e),Z.parent().removeClass(_e),$(".material-viewer_top_left .element-view").removeClass(_e),ve.parent().parent().removeClass(_e),K.removeClass(_e),J.addClass(_e),Ae.updateCenterPanels(!1),N.addClass(_e),$(we).removeClass(_e),Ae.getCurrentFig().has("img").length&&W.removeClass(_e))},updateCenterPanels:function(e){var t=B.find(".icon");e?(U.addClass(_e),Q.removeClass(_e),V.removeClass(be),Q.removeClass(be)):(U.removeClass(_e),Q.addClass(_e),t.addClass("flip-horizontal"),EREADER.utils.isMobile()?(U.removeClass(be),V.removeClass(be)):(U.addClass(be),V.addClass(be)))},gridView:function(){Ae.toggleViewModes(!0);var e={};h.default.customConfig.standaloneMode||(e.soundWaveUrl="/cloud-reader/dist/images/soundwave.svg",e.soundWaveWhiteUrl="/cloud-reader/dist/images/soundwave_white.svg"),$(document).trigger("show.material-viewer"),se.length>0&&(se.find(".justwave_wrapper").remove(),se.find("audio").addClass("justwave-gridView").removeClass("waveform"),$.justwave(e,"justwave-gridView"),$(".-gridView").addClass("waveform").removeClass("justwave-gridView"))},figureView:function(){Ae.toggleViewModes(!1)},on:{show:function(e,t,n){var a=$("body .tooltip");a.length>0&&a.remove(),ye=window.pageYOffset,pe.attr("data-active","materialViewer"),Ee=!0,he=t,Ae.replace(e,n),ge.addClass("open"),Ae.zoom.check(),Ae.toggleViewModes(!1),Ae.truncate(),E.default.KeyboardFocus.enablePanelFocus(ge),$(document).trigger("show.material-viewer")},hide:function(){Ee?pe.removeAttr("data-active"):pe.removeClass("lock-screen").removeAttr("data-active"),Ae.zoom.reset(),ge.removeClass("open"),ce.scrollTop(ye),E.default.KeyboardFocus.disablePanelFocus(ge),$(document).trigger("hide.material-viewer")}},zoom:{reset:function(){Y.panzoom("reset",[{silent:!0}]),Y.removeClass("zoomed"),Ae.zoom.changeButtonVisibility("width")},check:function(){void 0!==Y?Ae.zoom.panzoom.init():LIT.Reader.LogEnabled&&console.debug("Undefined element for zooming",Y)},panzoom:{init:function(){void 0!==$.fn.panzoom&&(Y.panzoom({$zoomIn:z,$zoomOut:G,panOnlyWhenZoomed:!0,minScale:1}),G.attr("disabled",!0),Y.on("panzoomzoom",(function(){var e=Y.panzoom("getMatrix"),t=!0;$.each(e,(function(e,n){0!==e&&3!==e||("1"!==n&&(t=!1),"6"===n?z.attr("disabled",!0):z.removeAttr("disabled"))})),t?(Ae.zoom.reset(),G.attr("disabled",!0)):(G.removeAttr("disabled"),$(this).addClass("zoomed"))})))}},fitWidth:function(){var e=Y.width()/Y.find("img").width();Y.panzoom("zoom",e),Ae.zoom.changeButtonVisibility("height")},fitHeight:function(){var e=Y.height()/Y.find("img").height();Y.panzoom("zoom",e),Ae.zoom.changeButtonVisibility("width")},changeButtonVisibility:function(e){q.addClass("d-none"),q.filter("."+e).removeClass("d-none")}},sortingMenu:{init:function(){var e=te.find('[type="radio"]');X.find(".counter").text(me.length),Ae.sortingMenu.types(),Ae.sortingMenu.counters(e),Ae.sortingMenu.selectOption(e)},reset:function(){var e=$("#dropdownSort");e.attr("aria-expanded",!1),e.removeClass("fadeIn"),te.find("#all-radio").click()},types:function(){ae=N.find('figure[data-type="figure"]:not(.tableImage)'),ie=N.find('figure[data-type="table"], figure[data-type="figure"].tableImage'),oe=N.find('figure[data-type="code"]'),re=N.find('figure[data-type="video"]'),se=N.find('figure[data-type="audio"]'),le=N.find('figure[data-type="supplement"]')},counters:function(e){e.each((function(e,t){var n=$(this),a=n.next().find(".counter"),i=n.val(),o=0;o="figure"===i?ae.length:"table"===i?ie.length:"code"===i?oe.length:"video"===i?re.length:"audio"===i?se.length:"supplement"===i?le.length:me.length,a.text(o),0===o?n.prop("disabled",!0):n.prop("disabled",!1)}))},selectOption:function(e){e.on("change",(function(){var e=$(this),t=e.val(),n=e.next(),a=n.find(".text").text(),i=n.find(".counter").text();w.default.pauseAllPlayers(k,x),ne.find(".text").text(a),ne.find(".counter").text(i),Q.removeClass(be),N.find("figure").removeClass(_e),"all"!==t&&("figure"==t?N.find('figure:not([data-type="'+t+'"]:not(.tableImage))').addClass(_e):"table"==t?N.find("figure").not(ie).addClass(_e):N.find('figure:not([data-type="'+t+'"])').addClass(_e))}))}},load:{publicationTitle:function(e){var t=e.parents("dl").find("dt").text();""===t&&(t=$("#app-navbar").find(".js__book-title").text()),$(".material-viewer_title_chapter").text(t).attr("title",t)},details:function(e,t){var n=e.find(".figure__caption").clone();_.default.destroy(n.find(".truncatable")),n.hasClass("hasDescription")||n.html((0,O.default)({settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:T.default.figures_viewer_desc_empty}}));var a=".label, .heading, .figlabel",i=n.find(a).length?n.find(a):e.find(".figure__title span"),o=i.eq(0).text();if(i.length||(o=t.charAt(0).toUpperCase()+t.slice(1),"graphical-abstract"===t&&(o="Graphical Abstract")),F.empty(),F.append(n),F.find(".figure__desc").text(F.find(".figure__desc").attr("title")),F.find(a).not(".sub-caption .label").first().remove(),""===o||void 0===o){var r=n.find("figcaption").find(":first-child").eq(0);o=r.text(),r.not(".sub-caption .label").remove()}$(ve[0]).attr("data-original-title",o),ve.text(o),n.find(".figure__actions").remove(),2===i.length&&(o+=" - "+i.eq(1).text(),ve.filter(".material-viewer_title").text(o))},downloadLinks:function(e,t,n){var a=e.find(".media__download").attr("href");if(ee.off("click"),"table"===n)Ae.load.downloadTableActions(ee,t);else{if(!t.attr("data-lg-src")&&!a)return void ee.addClass("disabled");ee.removeClass("disabled"),ee.attr("href",t.attr("data-lg-src")||a),h.default.customConfig.materialTabs.openDownloadLinkInNewTab&&"figure"!==n&&ee.removeAttr("download")}},downloadTableActions:function(e,t){var n=t.closest("figure")[0].outerHTML.trim();""!==n?(e.removeClass("disabled"),e.on("click",(function(e){e.preventDefault();var a=$(n);$.each(a.find("img"),(function(e,t){$(t).attr("src",t.src)}));var i=a[0].outerHTML,o=document.createElement("a"),r=t.closest(".material-viewer_reg_center").find(".material-viewer_title_text").text().replace(/\s\s+/g," ").trim()+".html";if(window.navigator.msSaveBlob){var s=new Blob([i],{type:"text/plain;charset=utf-8;"});window.navigator.msSaveOrOpenBlob(s,r)}else o.setAttribute("download",r),o.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(i)),o.click()}))):e.addClass("disabled")},material:function(e){var t,n=e.data("type"),a=e.data("id"),i=e.data("link"),o=M.find("figure");if(o.html("").scrollTop(0),o.css("overflow","unset"),"figure"!==n&&"graphical-abstract"!==n||!e.has("img").length)if("supplement"===n)t=e.find("supplement").clone(),W.addClass(_e),o.append((0,O.default)({settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:"There is no available preview for this file"}}));else if("code"===n)t=e.find("code").clone(),o.append((0,O.default)({settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:"There is no available preview for code snippets"}}));else if("audio"===n){var r={width:EREADER.utils.isMobile()?"90%":"100%"};h.default.customConfig.standaloneMode||(r.soundWaveUrl="/cloud-reader/dist/images/soundwave.svg",r.soundWaveWhiteUrl="/cloud-reader/dist/images/soundwave_white.svg"),t=e.find("audio").clone();var s=e.find(".figure__title").clone();o.prepend(s),o.append(t),W.addClass(_e),t.addClass("justwave-viewer").removeClass("waveform"),$.justwave(r,"justwave-viewer"),$(".justwave-viewer").addClass("waveform").removeClass("justwave-viewer")}else if("video"===n){var l="material-container-"+a;k&&"undefined"!=typeof flowplayer?(t=$("<div class='flowPlayer' id='"+l+"'><video><source type='application/x-mpegurl' src='"+i+"'></video></div>"),o.append(t),w.default.initFlowPlayer("#"+l,L.key)):x&&"undefined"!=typeof jwplayer&&(t=$("<div class='jwplayer' id='"+l+"'></div>"),o.append(t),jwplayer(l).setup({file:i,key:L.key,width:"100%",height:"100%"})),W.addClass(_e)}else t=e.find("table, supplement").clone(),o.append(t),"table"===n&&o.css("overflow","auto"),W.addClass(_e);else t=e.find(".figure__media img").clone(),Ae.load.image(t),W.removeClass(_e);return t},image:function(e){var t=M.find("figure"),n=$('<div class="content-loader"></div>').appendTo(t),a=function(){if(n.remove(),EREADER.utils.isIE11()?i.show():i.fadeIn(),!h.default.customConfig.isMaterialDownloadable||D.default.customConfig.restrictContent){var e=$(this).attr("src");e.includes("blob:http")&&window.URL.revokeObjectURL(e)}};if(1!==e.length)e.each((function(){var e;(e=$("<img/>",{class:$(this).attr("class"),id:$(this).attr("id"),src:window.READER_OFFLINE?$(this).attr("src"):$(this).attr("data-lg-src"),alt:$(this).attr("alt")})).attr("data-lg-src",$(this).attr("data-lg-src")),t.append(e),e.on("load",a)}));else{var i=$("<img />");h.default.customConfig.isMaterialDownloadable&&!D.default.customConfig.restrictContent||window.READER_OFFLINE?i.attr("src",window.READER_OFFLINE?e.attr("src"):e.attr("data-lg-src")):Ae.restrictImage(i,e.attr("data-lg-src")),t.append(i),i.hide(),i.on("load",a)}}},restrictImage:function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.open("GET",t,!0),n.onload=function(){200===n.status?e.attr("src",window.URL.createObjectURL(n.response)):e.attr("src",t)},n.onerror=function(){e.attr("src",t)},n.send(),e.on("copy cut dragstart",(function(e){e.preventDefault()})),e.on("contextmenu",(function(e){e.preventDefault()}))},truncate:function(){var e=$(".material-viewer_reg_top .material-viewer_title_chapter"),t=$(".material-viewer_reg_top .material-viewer_title_text");b.default.init(e,1,!0),b.default.init(t,1,!0)},navigation:{setStatus:function(){me.filter('[data-type!="supplement"] [data-streamed!="false"]').length<2?(H.attr("disabled",!0),H.css("cursor","not-allowed")):H.attr("disabled",!1)},next:function(){if($(".material-viewer.open").length>0){var e=this.getTargetFig(!0);Ae.replace(e,e.data("type")),Ae.zoom.reset()}},prev:function(){if($(".material-viewer.open").length>0){var e=this.getTargetFig(!1);Ae.replace(e,e.data("type")),Ae.zoom.reset()}},getTargetFig:function(e){e&&++he===me.length&&(he=0),!e&&he--<=0&&(he=me.length-1);var t=me.filter((function(e,t){return $(t).data("number")===he})),n=t.data("type"),a=t.data("streamed");return"supplement"!==n&&("video"!==n&&"audio"!==n||a)?t:this.getTargetFig(e)}},getCurrentFig:function(){return me.eq(he)}},Ce=Re;t.default=Ce}.apply(t,a))||(e.exports=i)},27437:function(e,t,n){var a,i,o=n(41999);n(69070),a=[t,n(69826),n(41539),n(32564),n(3843),n(83710),n(39968),n(98927),n(23069),n(43397),n(70828),n(20178),n(42105),n(10520),n(34707)],void 0===(i=function(e,n,a,i,r,s,l,u,d,f,c,p,g,m,v){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}function _(e){var t=$(f.default.menudrawer_info.offline_library),n=$(f.default.menudrawer_info.offline_btn);e?(t.addClass("success"),n.data("inDevice",!0),$(f.default.menudrawer_info.offline_btn).attr("data-disable-offline",!1)):(t.addClass("general"),n.data("inDevice",!1),$(f.default.menudrawer_info.offline_btn).attr("data-disable-offline",!0))}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,l=h(l),u=h(u),d=h(d),f=h(f),c=h(c),p=h(p),g=h(g),m=h(m),v=h(v);var b={init:function(){var e=$(f.default.menudrawer_info.drawer),t=f.default.menudrawer_info.download_btn+", "+f.default.menudrawer_info.download_list+", "+f.default.navbar_info.navbarDownload;e.length>0?(e.each((function(){var e=$(this);e.attr("role")||b.initWaiRoles(e)})),b.initTriggers(),b.specificButtons()):t.length>0&&b.specificButtons()},initWaiRoles:function(e){e.attr("role","menu"),e.find("li").each((function(){var e=$(this);e.attr("role")||b.initStates(e)}))},initTriggers:function(e){var t=$('[role="menuitem"]:not('+f.default.menudrawer_info.disabled+")");if(e&&(t=e),t.find(f.default.menudrawer_info.submenu_btn).length>0){var n=f.default.menudrawer_info.submenu_btn;t.find(n).off("click",b.submenuClick),t.find(n).on("click",b.submenuClick)}if(t.find(f.default.menudrawer_info.checkbox_btn).length>0){var a=f.default.menudrawer_info.checkbox_btn;t.find(a).off("click",b.checkboxClick),t.find(a).on("click",b.checkboxClick)}},initStates:function(e){e.attr({role:"menuitem","aria-haspopup":"false","aria-expanded":"false","aria-disabled":"false"}),e.find("button, .button").attr("tabindex","0"),e.find(f.default.menudrawer_info.submenu_panel)&&u.default.WaiAria.toggleState(e,"aria-haspopup")},resetStates:function(e){var t=$(e);t.find(f.default.menudrawer_info.submenu_open_class).each((function(e){$(this).removeClass(f.default.menudrawer_info.submenu_open)})),t.find('[role="menuitem"]').each((function(e){u.default.WaiAria.setState($(this),"aria-expanded","false")})),t.find(".overflow-container").removeClass(f.default.menudrawer_info.submenu_open)},openSubMenu:function(e,t){e.addClass(f.default.menudrawer_info.submenu_open),u.default.WaiAria.setState(t,"aria-expanded",!0),t.parents(".overflow-container").addClass(f.default.menudrawer_info.submenu_open),$("#info-tab-pane").trigger("show")},closeSubMenu:function(e,t){e.removeClass(f.default.menudrawer_info.submenu_open),u.default.WaiAria.setState(t,"aria-expanded",!1),$(".overflow-container").removeClass(f.default.menudrawer_info.submenu_open)},submenuClick:function(){var e=$(this),t=e.parents("li"),n=t.parent("ul"),a=u.default.WaiAria.getState(t,"aria-disabled");switch(e[0].id){case"downloadDoc":if(window.READER_OFFLINE||e.parents(f.default.navbar_info.download_list).hasClass(f.default.menudrawer_info.not_resolved_yet)||e.parents(f.default.navbar_info.download_list).hasClass(f.default.menudrawer_info.could_not_resolve))return n.hasClass(f.default.menudrawer_info.submenu_open)&&b.toggleSubMenu(n,t),!0;break;case m.default.tabs.links:EREADER.utils.gtTablet()&&$("#"+m.default.panes.links).find("a."+m.default.tabs.ref).trigger("click");break;case m.default.tabs.data:EREADER.utils.gtTablet()&&$("#"+m.default.panes.data).find("a."+m.default.tabs.fig).trigger("click")}a||b.toggleSubMenu(n,t)},toggleSubMenu:function(e,t){var n=u.default.WaiAria.getState(t,"aria-expanded"),a=e.hasClass(f.default.menudrawer_info.submenu_open);n?b.closeSubMenu(e,t):(a?(u.default.WaiAria.setState(t.siblings(),"aria-expanded",!1),u.default.WaiAria.setState(t,"aria-expanded",!0)):b.openSubMenu(e,t),setTimeout((function(){t[0].focus()}),100),v.default.trigger(v.default.eventTypes.OPEN_LEFT_MENU,{customProperties:{eventTime:Date.now(),openedMenuItem:t.find(".list-button")[0].id}})),$(f.default.right_panel_info.id+" > div").scrollTop(0)},checkboxClick:function(){var e=$(this);u.default.WaiAria.toggleState(e,"aria-checked"),Narration.setNarrator(u.default.WaiAria.getState(e,"aria-checked"))},specificButtons:function(){$(document);var e=f.default.menudrawer_info.download_btn+", "+f.default.menudrawer_info.download_list+", "+f.default.navbar_info.navbarDownload;$(e).on("click",o.debounce((function(e){e.stopPropagation(),e.target.id!==f.default.free_to_read_info.access_button_id&&c.default.manageDownload($(this),e)}),200,{leading:!1,trailing:!0})),$(f.default.menudrawer_info.download_list).find("input").one("change input",(function(){0!==$(f.default.menudrawer_info.download_list).find("#"+f.default.alertpopups_info.alert_id).length&&d.default.closeAlert()})),p.default.isThisAvailableOffline().done(_),$(f.default.menudrawer_info.offline_btn).length>0&&$(f.default.menudrawer_info.offline_btn).find("button").on("click",g.default),$(f.default.menudrawer_info.offline_documents).length>0&&$(f.default.menudrawer_info.offline_documents).on("click",(function(e){l.default.customConfig.isOfflineSupportedForBrowser&&!EREADER.utils.isEdgePrivateMode()||(e.preventDefault(),d.default.toast("UNSUPPORTED","Offline reading"))}))}},E=b;t.default=E}.apply(t,a))||(e.exports=i)},72024:function(e,t,n){var a,i;n(69070),a=[t,n(43397),n(24221)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o={init:function(){var e=$(n.default.progressbar_info.bar);$(document).on("mousewheel DOMMouseScroll scroll",(function(e){$(n.default.progressbar_info.scroll_frame).length&&o.progress()})),e.length>0&&e.each((function(){$(this).attr("role","progressbar"),$(this).attr("aria-valuenow","1"),$(this).attr("aria-valuemin","1"),$(this).attr("aria-valuemax","100")}))},progress:function(){var e=$(n.default.progressbar_info.bar),t=$(document).width(),i=a.default.navigationActions.getPaginationProgress(),o=i/t;e.attr("aria-valuenow",o),e.css("width",i+"%")}},r=o;t.default=r}.apply(t,a))||(e.exports=i)},84767:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(74916),n(64765),n(89554),n(54747),n(24603),n(39714),n(4723),n(15306),n(98927)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d,f,c){"use strict";var p;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,c=(p=c)&&p.__esModule?p:{default:p};var g={container:".select-widget",trigger:".select-toggle",content:".select-content ",choice:".choice",input:'[name^="dropdown-"]',expanded:"expanded",disabled:"disabled",activeChoice:"selected",isMobile:!1,init:function(){g.initializeStates(),g.control()},control:function(){var e=$("body");e.on("click",(function(e){0===$(e.target).parents(g.container).length&&g.on.reset()})),e.on("click",g.trigger,(function(e){e.preventDefault();var t=e.target.dataset.associatedRadio;t&&(document.querySelector("#"+t).checked=!0),g.on.clicked($(this))}));var t=g.content+" "+g.choice;e.on("click",t,(function(e){e.preventDefault(),g.on.optionSelect($(this))})),e.on("input.printing",g.trigger,(function(){var e=$(this),t=e.parents(g.container).find(g.content);e.removeData("index"),"false"===e.attr("aria-expanded")&&g.on.open(t,e),e.hasClass("filtered-input")&&g.search()}))},search:function(){document.querySelectorAll(g.choice).forEach((function(e){var t=e.querySelector(".select-item__text"),n=t.innerText,a=document.querySelector(g.trigger),i=a?a.value:"",o=new RegExp(i,"ig");n.match(o)?(e.classList.remove("d-none"),(i=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).length>0?(t.innerHTML=n.replace(/(<mark>|<\/mark>)/gim,""),t.innerHTML=t.innerHTML.replace(o,"<mark>$&</mark>")):($(g.choice).removeClass("first-visible-element"),t.innerHTML=n.replace(/(<mark>|<\/mark>)/gim,""))):(e.classList.add("d-none"),$(g.choice).removeClass("first-visible-element"),$(g.choice+":visible:first").addClass("first-visible-element"))}))},initializeStates:function(){$(g.content).each((function(){$(this).slideUp()})),$(g.trigger).each((function(){var e=$(this);c.default.WaiAria.setState(e,"aria-haspopup",!0),c.default.WaiAria.setState(e,"aria-expanded",!1),e.hasClass(g.disabled)&&(c.default.WaiAria.setState(e,"aria-disabled",!0),c.default.WaiAria.setState(e,"tabindex","-1"))}))},dropdownPosition:function(e,t){var n,a,i=e.outerHeight(),o=t.offset().top,r=t.outerHeight(),s=t.outerWidth(),l=$(window).height()-o-r;l<i&&o>i?(n="auto",a=l+r):l<i&&o<i?(n=16,a=16):(n=o+r,a="auto"),e.css({top:n,left:t.offset().left,width:s,bottom:a})},on:{clicked:function(e){var t=e.hasClass(g.disabled),n=e.parents(g.container).find(g.content);if(!t){var a=!("true"===e.attr("aria-expanded"));g.on.reset(),c.default.WaiAria.setState(e,"aria-expanded",a),a?g.on.open(n,e):g.on.close(n)}},open:function(e,t){e.addClass("open"),e.closest(g.container).addClass("js--active"),g.isMobile=EREADER.utils.isMobile()||EREADER.utils.isMobileHeight(),g.isMobile||g.dropdownPosition(e,t)},close:function(e){e.removeClass("open"),e.closest(g.container).removeClass("js--active")},optionSelect:function(e){g.on.reset();var t=$(g.input),n=e.parents(g.container).find(g.trigger),a=e.parents(g.container).find(g.content);a.find("."+g.activeChoice).removeClass(g.activeChoice),e.parent().addClass(g.activeChoice),t.val(e[0].innerHTML),t.attr("value",e[0].innerHTML),n.is("input")?(n.val(e.find(".select-item__text")[0].innerText),n.data("index",e.data("index"))):n.find("span")[0].innerHTML=e[0].innerHTML,g.on.close(a)},reset:function(){var e=$(g.trigger+'[aria-expanded="true"]');0!==e.length&&c.default.WaiAria.setState(e,"aria-expanded",!1),$(g.content).each((function(){g.on.close($(this))}))}}},m=g;t.default=m}.apply(t,a))||(e.exports=i)},62684:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(74916),n(23123),n(82772),n(43397),n(98927)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var d,f;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,s=u(s),l=u(l);var c={init:function(){d=!EREADER.utils.gtTablet(),f=d;var e=$(s.default.tabs_info.tablist).find(s.default.tabs_info.tab);e.length&&e.each((function(){c._initializeTabItem($(this))})),$(s.default.tabs_info.back_btn).on("click",(function(e){c.statesReset(!0,$(this))})),$(window).on("resize.tabsWidget",(function(){(d=!EREADER.utils.gtTablet())!==f&&(f=d,c.statesReset(),EREADER.transpileContent(),d||$(s.default.tabs_info.tablist).each((function(e,t){var n=$(this).find(s.default.tabs_info.tab).first();c.activeTab(n)})))}))},initTabItems:function(e){var t=e.find(s.default.tabs_info.tab);0!==t.length&&t.each((function(){c._initializeTabItem($(this))}))},initTabItem:function(e){c._initializeTabItem(e)},_initializeTabItem:function(e){e.attr("role")||(c.initStates(e),c.initTabs(e))},initStates:function(e){var t=e.attr("href");t&&e.attr({role:"tab","aria-controls":t.split("#")[1]||"","aria-disabled":"false","aria-selected":"false",tabindex:0}),e.find(s.default.tabs_info.icon).each((function(){$(this).attr({"aria-hidden":"true","aria-labelledby":e.attr("id")||""})})),$(t).attr({role:"tabpanel","aria-label":e.attr("title")||"","aria-hidden":"true",tabindex:0}),e.hasClass(s.default.tabs_info.disabled_class)&&(l.default.WaiAria.setState(e,"aria-disabled",!0),e.attr("tabindex","-1"))},initTabs:function(e){e.off("click").on("click",(function(e){e.preventDefault(),c.tabClicked(e)})),c.activeTab(e)},activeTab:function(e){var t=e.closest(s.default.tabs_info.tablist),n=l.default.WaiAria.getState(e,"aria-disabled"),a=t.find(s.default.tabs_info.tab),i=[];a.each((function(){if($(this).hasClass(s.default.tabs_info.active_class))return i=$(this),!1})),0!==i.length||n||(i=e),d||c.tabClicked(i)},initTabPanels:function(){$(s.default.tabs_info.tabpanel).each((function(){EREADER.utils.displaySpinner($(this))}))},tabClicked:function(e){var t=0!==$(e.delegateTarget).length?$(e.delegateTarget):e,n=t.attr("href")||"",a=$(n);if(0===n.indexOf("#")){var i=l.default.WaiAria.getState(t,"aria-disabled"),o=t.hasClass(s.default.tabs_info.active_class);if(!i&&!o){c.statesReset(!0,t),a.closest(s.default.tabs_info.tabcontent).find(s.default.tabs_info.mobile_title).text(t.find(s.default.tabs_info.tab_title).text()),t.addClass(s.default.tabs_info.active_class),l.default.WaiAria.toggleState(t,"aria-selected"),a.trigger("show"),a.addClass(s.default.tabs_info.active_class),l.default.WaiAria.toggleState(a,"aria-hidden");var r=t.closest(s.default.tabs_info.tablist);if(a=r.next(s.default.tabs_info.tabcontent),r.addClass(s.default.tabs_info.active_class),a.addClass(s.default.tabs_info.active_class),!d){var u=$(t.attr("href"));if(u.find(s.default.tabs_info.tabpanel).length>0){var f=u.find('[role="tab"].active');$(f.attr("href")).addClass(s.default.tabs_info.active_class)}}$(".scrollToTop").scrollTop(0)}}},scrollingTab:function(e){e.find(s.default.tabs_info.inner_tabContent).scroll((function(e){var t=$(this),n="scrollingTabContent";t.scrollTop()>0?t.addClass(n):t.removeClass(n)}))},statesReset:function(e,t){var n=$(s.default.tabs_info.tablist),a=$(s.default.tabs_info.tabcontent),i=n.find("a"),o=$(s.default.tabs_info.tabpanel);if(t){var r=t.parents(s.default.tabs_info.tabpanel);r.length>0&&(n=r.find(s.default.tabs_info.tablist),i=r.find(s.default.tabs_info.tablist).find("a"),o=r.find(s.default.tabs_info.tabpanel))}else a.removeClass(s.default.tabs_info.active_class);if(e)t.parentsUntil("body").last();i.removeClass(s.default.tabs_info.active_class),l.default.WaiAria.setState(i,"aria-selected","false"),o.removeClass(s.default.tabs_info.active_class),l.default.WaiAria.setState(o,"aria-hidden","true")}},p=c;t.default=p}.apply(t,a))||(e.exports=i)},16709:function(e,t,n){var a,i;n(69070),a=[t,n(69826),n(41539),n(24221)],void 0===(i=function(e,n,a,i){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,i=(o=i)&&o.__esModule?o:{default:o};var r={$ZoomWrapper:null,buttons:{$ZoomButtons:null,$ZoomIn:null,$ZoomOut:null,$FitHeight:null,$FitWidth:null},init:function(){r.$ZoomWrapper=$(".zoom-wrapper"),r.buttons.$ZoomButtons=r.$ZoomWrapper.find(".zoom-btn"),r.buttons.$ZoomInBtn=r.$ZoomWrapper.find(".zoom-btn.out"),r.buttons.$ZoomOutBtn=r.$ZoomWrapper.find(".zoom-btn.in"),r.buttons.$FitHeight=r.$ZoomWrapper.find(".zoom-btn.height"),r.buttons.$FitWidth=r.$ZoomWrapper.find(".zoom-btn.width"),r.buttons.$ZoomButtons.on("click",(function(){var e=$(this);e.hasClass("in")?r.zoomIn():e.hasClass("out")?r.zoomOut():e.hasClass("height")?r.fitHeight():e.hasClass("width")&&r.fitWidth()})),Keyboard.on(Keyboard.ZoomOut,"reader",(function(){void 0===r.buttons.$ZoomOutBtn.attr("disabled")&&r.zoomOut()})),Keyboard.on(Keyboard.ZoomIn,"reader",(function(){void 0===r.buttons.$ZoomInBtn.attr("disabled")&&r.zoomIn()})),Keyboard.on(Keyboard.ZoomScreenToggle,"reader",(function(){r.buttons.$FitHeight.isVisible()?r.fitHeight():r.buttons.$FitWidth.isVisible()&&r.fitWidth()}))},changeButtonVisibility:function(){"fit-width"===r.getPreset()?($(".zoom-btn.width").addClass("d-none"),$(".zoom-btn.height").removeClass("d-none")):($(".zoom-btn.height").addClass("d-none"),$(".zoom-btn.width").removeClass("d-none"))},zoomIn:function(){i.default.displayActions.zoomActions.zoomIn(),this.changeButtonVisibility()},zoomOut:function(){i.default.displayActions.zoomActions.zoomOut(),this.changeButtonVisibility()},fitWidth:function(){i.default.displayActions.zoomActions.fitWidth(),this.changeButtonVisibility()},fitHeight:function(){i.default.displayActions.zoomActions.fitHeight(),this.changeButtonVisibility()},customScale:function(e){i.default.displayActions.zoomActions.customScale(e)},disableZoom:function(){r.buttons.$ZoomButtons.attr("disabled",!0)},enableZoom:function(){$(".zoom-wrapper .zoom-btn:not(.js__limitsReached)").removeAttr("disabled")},getPreset:function(){return i.default.displayActions.zoomActions.getPreset()},getPageWidth:function(){return i.default.displayActions.zoomActions.getPageWidth()},isZoomed:function(){return i.default.displayActions.zoomActions.isZoomed()},fixPositionNeeded:function(){return i.default.displayActions.zoomActions.fixPositionNeeded()}},s=r;t.default=s}.apply(t,a))||(e.exports=i)},4503:function(e,t,n){var a,i;n(69070),a=[t,n(35666),n(41539),n(88674),n(25644),n(39968)],i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){l(o,a,i,r,s,"next",e)}function s(e){l(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=s(o),r=s(r);var d=o.default.tables.CONTENT_TABLE;function f(){return(f=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={sourceFormat:r.default.customConfig.format,title:r.default.customConfig.title,rootUrl:window.location.pathname,doi:r.default.customConfig.doi},e.next=3,c(t,t.doi,t.sourceFormat);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t,n){return p.apply(this,arguments)}function p(){return(p=u(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.add(d,{metadata:t,doi:n+"_"+a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.delete(d,r.default.customConfig.doi+"_"+r.default.customConfig.format);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.getAll(d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v={getOfflineContents:function(){var e=$.Deferred();return function(){return m.apply(this,arguments)}().then((function(t){e.resolve(t)})).catch((function(t){e.reject(t)})),e.promise()},add:function(){var e=$.Deferred();return function(){return f.apply(this,arguments)}().then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()},addWithMetadata:function(e){var t=$.Deferred();return c(e,e.doi,e.sourceFormat).then((function(){t.resolve()})).catch((function(e){t.reject()})),t.promise()},remove:function(){var e=$.Deferred();return function(){return g.apply(this,arguments)}().then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()}},h=v;t.default=h}.apply(t,a),void 0===i||(e.exports=i)},24221:function(e,t,n){var a,i;n(69070),a=[t,n(35666),n(41539),n(88674),n(74916),n(64765),n(66992),n(78783),n(33948),n(39968)],void 0===(i=function(e,n,a,i,o,r,s,l,u,d){"use strict";var f;function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,d=(f=d)&&f.__esModule?f:{default:f};var p=function(e,t,n,a){return new(n||(n=Promise))((function(i,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))},g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navigationActions={getPaginationProgress:function(){return e.renderer.navigationActions.getPaginationProgress()},getCurrentPageElement:function(){return e.renderer.navigationActions.getCurrentPageElement()},openContentUsingUrl:function(t){e.renderer.navigationActions.openContentUsingUrl(t)},openContentByProgressLocation:function(t){e.renderer.navigationActions.openContentByProgressLocation(t)},getHtmlData:function(){return e.renderer.navigationActions.getHtmlData()},isFirstPage:function(t){return e.renderer.navigationActions.isFirstPage(t)},isLastPage:function(t){return e.renderer.navigationActions.isLastPage(t)},init:function(){e.renderer.navigationActions.init()},getCurrent:function(){return e.renderer.navigationActions.getCurrent()},getTotal:function(){return e.renderer.navigationActions.getTotal()},downArrowKey:function(){e.renderer.navigationActions.downArrowKey()},leftArrowKey:function(){e.renderer.navigationActions.leftArrowKey()},rightArrowKey:function(){e.renderer.navigationActions.rightArrowKey()},upArrowKey:function(){e.renderer.navigationActions.upArrowKey()},isValidPageNumber:function(t){return e.renderer.navigationActions.isValidPageNumber(t)},goToEndPage:function(){e.renderer.navigationActions.goToEndPage()},goToPage:function(t){e.renderer.navigationActions.goToPage(t)},goToStartPage:function(){e.renderer.navigationActions.goToStartPage()},nextPage:function(){e.renderer.navigationActions.nextPage()},previousPage:function(){e.renderer.navigationActions.previousPage()},isBookFirstPage:function(){return e.renderer.navigationActions.isBookFirstPage()},isBookLastPage:function(){return e.renderer.navigationActions.isBookLastPage()}},this.offline={getOldData:function(){return e.renderer.contentActions.offlineStorage.getOldData()},onOffline:function(){e.renderer.contentActions.offlineStorage.onOffline()},onOnline:function(){e.renderer.contentActions.offlineStorage.onOnline()},isThisAvailableOffline:function(){return e.renderer.contentActions.offlineStorage.isThisAvailableOffline()},isDeleting:function(){return e.renderer.contentActions.offlineStorage.isDeleting()},isRetrieving:function(){return e.renderer.contentActions.offlineStorage.isRetrieving()},remove:function(){return e.renderer.contentActions.offlineStorage.remove()},save:function(){return e.renderer.contentActions.offlineStorage.save()},stop:function(){return e.renderer.contentActions.offlineStorage.stop()}},this.printingActions={init:function(t,n){e.renderer.contentActions.printingActions.init(t,n)},validate:function(t,n){return e.renderer.contentActions.printingActions.validate(t,n)},getSelectedPages:function(t){return e.renderer.contentActions.printingActions.getSelectedPages(t)},afterPrint:function(){return e.renderer.contentActions.printingActions.afterPrint()},beforePrint:function(){return e.renderer.contentActions.printingActions.beforePrint()},getPrintingPopupData:function(){return e.renderer.contentActions.printingActions.getPrintingPopupData()},getSinglePrintableItem:function(){return e.renderer.contentActions.printingActions.getSinglePrintableItem()},previewPrint:function(t){return e.renderer.contentActions.printingActions.previewPrint(t)}},this.search={clear:function(){e.renderer.contentActions.search.clear()},doSearch:function(t,n,a){e.renderer.contentActions.search.doSearch(t,n,a)},next:function(){e.renderer.contentActions.search.next()},previous:function(){e.renderer.contentActions.search.previous()}},this.toc={tocNotFound:!1,getIndex:function(){return e.renderer.contentActions.tocActions.getIndex()},getToMakeActive:function(t,n){return e.renderer.contentActions.tocActions.getToMakeActive(t,n)},getToc:function(){return e.renderer.contentActions.tocActions.getToc()},isRTL:function(){return e.renderer.contentActions.tocActions.isRTL()},tocElementClicked:function(t){return e.renderer.contentActions.tocActions.tocElementClicked(t)}},this.zoomActions={resizeReadingArea:function(t,n,a){e.renderer.displayActions.zoomActions.resizeReadingArea(t,n,a)},customScale:function(t){e.renderer.displayActions.zoomActions.customScale(t)},fitHeight:function(){e.renderer.displayActions.zoomActions.fitHeight()},fitWidth:function(){e.renderer.displayActions.zoomActions.fitWidth()},getPageWidth:function(){return e.renderer.displayActions.zoomActions.getPageWidth()},getPreset:function(){return e.renderer.displayActions.zoomActions.getPreset()},isZoomed:function(){return e.renderer.displayActions.zoomActions.isZoomed()},zoomIn:function(){e.renderer.displayActions.zoomActions.zoomIn()},zoomOut:function(){e.renderer.displayActions.zoomActions.zoomOut()},fixPositionNeeded:function(){return e.renderer.displayActions.zoomActions.fixPositionNeeded()}},this.contentActions={offlineStorage:this.offline,printingActions:this.printingActions,search:this.search,tocActions:this.toc,shouldGetFiguresFromContent:function(){return e.renderer.contentActions.shouldGetFiguresFromContent()},getEntireContentPagesLength:function(){return e.renderer.contentActions.getEntireContentPagesLength()},getReadingContainerSelector:function(){return e.renderer.contentActions.getReadingContainerSelector()},loadEbook:function(t,n,a,i){return e.renderer.contentActions.loadEbook(t,n,a,i)},addContentEventListener:function(t,n){e.renderer.contentActions.addContentEventListener(t,n)},init:function(){},handleFailedRequest:function(t){return e.renderer.contentActions.handleFailedRequest(t)},getFiguresFromContent:function(){return e.renderer.contentActions.getFiguresFromContent()},getMetadataFromContent:function(){return e.renderer.contentActions.getMetadataFromContent()},getReferencesFromContent:function(){return e.renderer.contentActions.getReferencesFromContent()}},this.displayActions={zoomActions:this.zoomActions,shouldAddBookButtons:function(){return e.renderer.displayActions.shouldAddBookButtons()},columnsEnabled:function(){return e.renderer.displayActions.columnsEnabled()},getDisplaySettingsData:function(t,n){return e.renderer.displayActions.getDisplaySettingsData(t,n)},saveDisplaySettings:function(t){e.renderer.displayActions.saveDisplaySettings(t)},initDisplaySettings:function(){e.renderer.displayActions.initDisplaySettings()},updateDisplaySettings:function(t){e.renderer.displayActions.updateDisplaySettings(t)},toggleDisplayFormat:function(){return e.renderer.displayActions.toggleDisplayFormat()},shouldUseLoader:function(){return e.renderer.displayActions.shouldUseLoader()},isPDF:function(){return e.renderer.displayActions.isPDF()},isScrolling:function(){return e.renderer.displayActions.isScrolling()},isBookViewScrollable:function(){return e.renderer.displayActions.isBookViewScrollable()},isFacingPages:function(){return e.renderer.displayActions.isFacingPages()},fixBookPagePosition:function(){e.renderer.displayActions.fixBookPagePosition()},fixedShouldScroll:function(){return e.renderer.displayActions.fixedShouldScroll()}}}var t,n,a;return t=e,a=[{key:"getActionController",value:function(){return null==e.instance&&(e.instance=new e),e.instance}}],(n=[{key:"init",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,import(d.default.customConfig.rendererData.src);case 3:return e.renderer=new RendererAPI,delete window.RendererAPI,t.next=7,e.renderer.Ready;case 7:return t.abrupt("return",e.renderer);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))}}])&&c(t.prototype,n),a&&c(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}().getActionController();t.default=g}.apply(t,a))||(e.exports=i)},48790:function(e,t,n){var a,i;n(69070),a=[t,n(35666),n(41539),n(88674),n(20282),n(23973),n(26729)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=l(o),r=l(r),s=l(s);var d=function(e,t,n,a){return new(n||(n=Promise))((function(i,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))},f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"initEreaderMetaData",value:function(){return d(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return d(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initEreaderGlobalNamespace(),t.abrupt("return",e());case 2:case"end":return t.stop()}}),t,this)})))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}},{key:"initEreaderGlobalNamespace",value:function(){window.EREADER={},$.extend(EREADER,new s.default),this.initEreaderGlobalFunctions(),this.initEreaderGlobalCoreUtils()}},{key:"initEreaderGlobalFunctions",value:function(){o.default.defineProgressChangedEvent()}},{key:"initEreaderGlobalCoreUtils",value:function(){EREADER.utils=r.default}}],(n=null)&&u(t.prototype,n),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=f}.apply(t,a))||(e.exports=i)},65781:function(e,t,n){"use strict";n.r(t)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=n,t=[],i.O=function(e,n,a,o){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],o=t[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(s=!1,o<r&&(r=o));if(s){t.splice(d--,1);var u=a();void 0!==u&&(e=u)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,a,o]},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},i.j=712,function(){var e={712:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,r=n[0],s=n[1],l=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(l)var d=l(i)}for(t&&t(n);u<r.length;u++)o=r[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=self.webpackChunkereader=self.webpackChunkereader||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=i.O(void 0,[736,3,580],(function(){return i(54754)}));o=i.O(o)}();